<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Kuro&#39;s Blog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://kuro.tw/"/>
  <updated>2017-07-26T08:26:36.000Z</updated>
  <id>https://kuro.tw/</id>
  
  <author>
    <name>Kuro Hsu</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å¾ Vue ä¾†çœ‹ CSS ç®¡ç†æ–¹æ¡ˆçš„ç™¼å±•</title>
    <link href="https://kuro.tw/posts/2017/07/26/%E5%BE%9EVue%E4%BE%86%E7%9C%8BCSS%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E7%9A%84%E7%99%BC%E5%B1%95/"/>
    <id>https://kuro.tw/posts/2017/07/26/å¾Vueä¾†çœ‹CSSç®¡ç†æ–¹æ¡ˆçš„ç™¼å±•/</id>
    <published>2017-07-26T06:48:26.000Z</published>
    <updated>2017-07-26T08:26:36.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ˜¨å¤©çœ‹åˆ° caesar å¤§å¤§ç™¼è¡¨çš„ <a href="https://blog.caesarchi.com/2017/07/25/react-css-styled-components/" target="_blank" rel="external">react &amp; CSS å¦é¡æ–°é¸æ“‡</a>ï¼Œè¬›çš„å…¶å¯¦æ˜¯ styled-components + react çš„ CSS è™•ç†æ–¹æ¡ˆã€‚ ç¾ä»Šçš„å¹¾å€‹ä¸»æµå‰ç«¯æ¡†æ¶å¤§å¤šä¹Ÿæœ‰é¡ä¼¼çš„åšæ³•ï¼Œèº«ç‚º Vue çš„æ“è­·è€…ï¼Œé€™è£¡å°±ä¾†ç°¡å–®èªªæ˜ä¸€ä¸‹ Vue çš„è™•ç†æ–¹å¼ã€‚</p>
<p>å…ˆå¾æ—©æœŸçš„ CSS ç®¡ç†æ–¹æ¡ˆé–‹å§‹èªªèµ·å§ã€‚</p>
<h2 id="CSS-é è™•ç†å™¨ã€CSS-å‘½åèˆ‡æ¶æ§‹å­¸"><a href="#CSS-é è™•ç†å™¨ã€CSS-å‘½åèˆ‡æ¶æ§‹å­¸" class="headerlink" title="CSS é è™•ç†å™¨ã€CSS å‘½åèˆ‡æ¶æ§‹å­¸"></a>CSS é è™•ç†å™¨ã€CSS å‘½åèˆ‡æ¶æ§‹å­¸</h2><p>é€™éº¼å¤šå¹´ä¾†ï¼ŒCSS çš„ç®¡ç†ä¸€ç›´éƒ½æ˜¯é–‹ç™¼è€…çš„å¤¢é¨ï¼Œå¾ˆå¤§çš„åŸå› åœ¨æ–¼ CSS çš„ç¨‹å¼åŒ–èˆ‡ JavaScript ç›¸æ¯”å…¶å¯¦æ˜¯ç›¸å°å›°é›£çš„ï¼Œ
å°¤å…¶åœ¨æ–¼ JS è‡³å°‘é‚„æœ‰å®ƒçš„ scope å¯ä»¥åˆ‡åˆ†ï¼Œè€Œ CSS åœ¨é€™é»æ˜¯ç›¸å°å¼±å‹¢çš„ï¼Œæ‰€æœ‰çš„ CSS æ¨£å¼éƒ½æ˜¯ global scopedã€‚ å¦‚æœé é¢ä¸Šçš„æ¨¡çµ„éå¤šï¼Œç®¡ç†èµ·ä¾†æ›´æ˜¯é›£ä»¥ç¶­è­·ã€‚
åš´æ ¼ä¾†èªªï¼ŒCSS æœ¬èº«ç”šè‡³éƒ½ä¸èƒ½ç®—æ˜¯å€‹ç¨‹å¼èªè¨€ã€‚</p>
<p>æ‰€ä»¥ï¼Œæ—©æœŸåœ¨ç¨‹å¼é¢æœƒæœ‰æ‰€è¬‚çš„ LESS, SASS, Stylus ç­‰é€™æ¨£çš„å·¥å…·ï¼Œè—‰ç”± preprocessor (é è™•ç†å™¨) ä¾†åšç·¨è­¯ï¼Œå¯ä»¥åšåˆ°ç¹¼æ‰¿ã€é‡ç”¨ã€è¤‡å¯«ç­‰åŠŸèƒ½ã€‚
å¦ä¸€æ–¹é¢ï¼Œé™¤äº†ä¸Šè¿°èªªçš„é€éå·¥å…·çš„é å…ˆç·¨è­¯å¤–ï¼Œä¹Ÿæœ‰å¦ä¸€æ´¾äººé¦¬æå€¡çš„æ˜¯ï¼Œç”± CSS çš„å‘½åå­¸ / æ¶æ§‹è«– ä¾†å®Œæˆ CSS æ¨¡çµ„çš„ç®¡ç†èˆ‡è¤‡ç”¨ã€‚</p>
<p>åœ¨å¹¾å¹´å‰ (2014) ï¼Œå°å¼Ÿä¹Ÿæœ‰é‡å°æ­¤é¡ CSS æ–¹æ³•è«–åœ¨å‰ç«¯ç¤¾ç¾¤èšæœƒåšåˆ†äº«ï¼Œæœ‰èˆˆè¶£çš„æœ‹å‹å¯ä»¥çœ‹ä¸‹é¢é€™ä»½æŠ•å½±ç‰‡ï¼š</p>
<iframe src="//www.slideshare.net/slideshow/embed_code/key/MOVEP2qBeaGyEO" width="595" height="485" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe> 


<p>ç°¡å–®ä¾†èªªï¼Œå°±æ˜¯é€éå‘½åè¦å‰‡ï¼Œä¾†åšåˆ° CSS æ¶æ§‹çš„ç®¡ç†ã€‚ 
<del>ä½†å¤§å®¶éƒ½çŸ¥é“ï¼Œè¨‚å‡ºäº† convention ï¼Œè¦æ˜¯æ²’æœ‰åš´æ ¼æª¢æŸ¥æ˜¯å¦éµå®ˆï¼Œå…¶å¯¦è·Ÿæ²’æœ‰ä¸€æ¨£ XD </del></p>
<h2 id="CSS-Modules"><a href="#CSS-Modules" class="headerlink" title="CSS Modules"></a>CSS Modules</h2><p>æ‰€ä»¥å¾Œä¾†å‡ºç¾äº†æ¯”è¼ƒç¬¦åˆäººæ€§çš„ CSS Modulesï¼Œé€éå·¥å…·ä¾†è™•ç†å…ˆå‰é‚£äº›äººå·¥å‘½åè¦ç¯„è¦åšçš„äº‹ã€‚
ä¹Ÿå°±æ˜¯èªªï¼Œç”± Webpack åšäº† BEM çš„äº‹æƒ…ã€‚ éå» BEM æ˜¯äººå·¥æ‰‹å‹•åšï¼Œè€Œ Webpack æ˜¯äº¤çµ¦å·¥å…·è‡ªå‹•åŒ–åšï¼Œç”¨é¡ä¼¼ Javascript module çš„æ–¹å¼ä¾†è™•ç† CSSã€‚</p>
<p>è¬›äº†å¤§åŠå€‹ç¯‡å¹…ï¼Œçµ‚æ–¼è¦è¬›åˆ°ç›®å‰çš„ä¸»æµï¼š CSS in JS / styled-components äº†ã€‚</p>
<h2 id="CSS-in-JS-All-in-JS"><a href="#CSS-in-JS-All-in-JS" class="headerlink" title="CSS in JS / All in JS"></a>CSS in JS / All in JS</h2><p>CSS in JS çš„æ¦‚å¿µæœ€æ—©æ˜¯ç”± React ç¤¾ç¾¤æ‰€æå‡ºï¼Œæ”¯æŒèˆ‡ä¸æ”¯æŒçš„å…©æ´¾åœ¨ç¤¾ç¾¤ç•¶ä¸­ä¹Ÿæœ‰è‘—æ¿€çƒˆçš„è«–æˆ°ã€‚
æˆ‘éå»ä¹Ÿæ˜¯åå°æ­¤é¡åšæ³•ï¼Œä½†ç›®å‰ä¿æŒä¸­ç«‹æ…‹åº¦çœ‹å¾…ã€‚ XD</p>
<p>éå»æˆ‘å‰›å…¥è¡Œçš„æ™‚å€™ï¼Œå‰è¼©å¤§åŠ›å€¡å° HTML / CSS / JavaScript ä¸‰è€…è² è²¬çš„é ˜åŸŸè¦åˆ‡å¾—è¶Šä¹¾æ·¨è¶Šå¥½ï¼Œç°¡å–®ä¾†èªªï¼Œinline-style èˆ‡ inline-script éƒ½æ˜¯ç¦æ­¢çš„ã€‚
ä¸€æ—¦ inline-style èˆ‡ inline-script å¯«å¾—è¶Šå¤šï¼Œç¨‹å¼ç¢¼å°±æœƒåƒç¾©å¤§åˆ©éºµèˆ¬æ”ªåœ¨ä¸€èµ·é›£ä»¥ç¶­è­·ã€‚</p>
<p>è€Œè‡ªå¾ component-based çš„å‰ç«¯å·¥å…·å‡ºç¾å¾Œï¼Œéå»çš„åŸå‰‡æ¼¸æ¼¸è¢«æ‰“ç ´ã€‚
åƒ React ï¼Œå°±æœ‰ä¸‹é¢é€™æ¨£çš„å¯«æ³•ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> style = &#123;</div><div class="line">  <span class="string">'color'</span>: <span class="string">'red'</span>,</div><div class="line">  <span class="string">'fontSize'</span>: <span class="string">'46px'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> clickHandler = <span class="function"><span class="params">()</span> =&gt;</span> alert(<span class="string">'hi'</span>); </div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span> <span class="attr">onclick</span>=<span class="string">&#123;clickHandler&#125;</span>&gt;</span></span></div><div class="line">     Hello, world!</div><div class="line">  <span class="tag">&lt;/<span class="name">h1</span>&gt;</span>,</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'example'</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<p>å°‡ä¸€å€‹ç¶²é å…ƒä»¶ (H1) çš„<strong>æ¨£å¼ã€äº‹ä»¶èˆ‡çµæ§‹ï¼Œé€šé€šå°è£åœ¨ä¸€ä»½ç¨‹å¼ç¢¼</strong>ç•¶ä¸­ã€‚</p>
<p>è€Œ Vue ä¹Ÿæœ‰é¡ä¼¼çš„åšæ³•ï¼Œåƒ Vue æä¾›çš„ Vue å…ƒä»¶æª”ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">/* HTML */</div><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">h1</span> @<span class="attr">click</span>=<span class="string">"clickHandler"</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"></div><div class="line">/* script */</div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">data</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">msg</span>: <span class="string">'Hello, world!'</span></div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">methods</span>:&#123;</div><div class="line">    clickHandler()&#123;</div><div class="line">      alert(<span class="string">'hi'</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line">/* scoped CSS */</div><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="css"></span></div><div class="line"><span class="selector-tag">h1</span> &#123;</div><div class="line">  <span class="attribute">color</span>: red;</div><div class="line">  <span class="attribute">font-size</span>: <span class="number">46px</span>;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<p>åœ¨ Vue å…ƒä»¶æª”ï¼Œé€éä¸Šé¢é€™æ¨£çš„æ–¹å¼æä¾›äº†ä¸€å€‹ template (HTML)ã€script ä»¥åŠå¸¶æœ‰ scoped çš„ style æ¨£å¼ï¼Œä¹Ÿä»ç„¶å¯ä»¥ä¿æœ‰éå» HTMLã€CSS èˆ‡ JS åˆ†é›¢çš„é–‹ç™¼é«”é©—ã€‚
ä½†æœ¬è³ªä¸Šä»æ˜¯ all-in-JS çš„è®Šç¨®èªæ³•ç³–å°±æ˜¯äº† XD</p>
<p><img src="/static/img/vue-file.png"></p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œç•¶ style æ¨™ç±¤åŠ ä¸Š <strong>scoped</strong> å±¬æ€§ï¼Œé‚£éº¼åœ¨ Vue å…ƒä»¶æª”ç¶“éç·¨è­¯å¾Œï¼Œæœƒè‡ªå‹•åœ¨å…ƒä»¶ä¸Šæ‰“ä¸Šä¸€å€‹éš¨æ©Ÿçš„å±¬æ€§ï¼Œå†é€é CSS Attribute Selector çš„ç‰¹æ€§ä¾†åšåˆ° CSS scope çš„åˆ‡åˆ†ï¼Œä½¿å¾—å³ä¾¿æ˜¯åœ¨ä¸åŒå…ƒä»¶æª”è£¡çš„ h1 ä¹Ÿèƒ½æœ‰ CSS æ¨£å¼ä¸äº’ç›¸å¹²æ“¾çš„æ•ˆæœã€‚ ç•¶ç„¶é–‹ç™¼èµ·ä¾†ï¼Œæ¯”èµ· JSXã€æˆ–æ˜¯ inline-style ç­‰çš„æ–¹å¼ï¼Œé€™ç¨®æŠ˜è¡·çš„ä½œæ³•æ›´åˆæˆ‘çš„èƒƒå£ ğŸ˜</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ˜¨å¤©çœ‹åˆ° caesar å¤§å¤§ç™¼è¡¨çš„ &lt;a href=&quot;https://blog.caesarchi.com/2017/07/25/react-css-styled-components/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;react &amp;amp;
    
    </summary>
    
      <category term="vue.js" scheme="https://kuro.tw/categories/vue-js/"/>
    
    
      <category term="vue.js" scheme="https://kuro.tw/tags/vue-js/"/>
    
      <category term="CSS" scheme="https://kuro.tw/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>ä¸éœ€ç·¨è­¯ä¹Ÿèƒ½è¼‰å…¥ .vue å…ƒä»¶æª”: ä½¿ç”¨ http-vue-loader</title>
    <link href="https://kuro.tw/posts/2017/07/11/%E4%B8%8D%E9%9C%80%E7%B7%A8%E8%AD%AF%E4%B9%9F%E8%83%BD%E8%BC%89%E5%85%A5-vue-%E5%85%83%E4%BB%B6%E6%AA%94-%E4%BD%BF%E7%94%A8-http-vue-loader/"/>
    <id>https://kuro.tw/posts/2017/07/11/ä¸éœ€ç·¨è­¯ä¹Ÿèƒ½è¼‰å…¥-vue-å…ƒä»¶æª”-ä½¿ç”¨-http-vue-loader/</id>
    <published>2017-07-10T16:16:55.000Z</published>
    <updated>2017-07-12T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸Šé€±åœ¨ Vue ç¤¾ç¾¤åœˆæœ‰å€‹ä»¤äººèˆˆå¥®çš„ç†±é–€æ–°è: CodePen å¯ä»¥æ”¯æ´ <code>.vue</code> æª”æ¡ˆäº†ï¼</p>
<p><blockquote class="twitter-tweet" data-lang="zh-tw"><p lang="en" dir="ltr">Check it out - you can use <code>.vue</code> files in CodePen Projects easily:<a href="https://t.co/Cd3Qr11xYQ" target="_blank" rel="external">https://t.co/Cd3Qr11xYQ</a> <a href="https://t.co/QvtIXxKRUk" target="_blank" rel="external">pic.twitter.com/QvtIXxKRUk</a></p>&mdash; Chris Coyier (@chriscoyier) <a href="https://twitter.com/chriscoyier/status/880859500185616387" target="_blank" rel="external">2017å¹´6æœˆ30æ—¥</a></blockquote></p>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>èº«ç‚ºä½¿ç”¨ Vue çš„é–‹ç™¼è€…è½åˆ°é€™æ¨£çš„æ¶ˆæ¯ç•¶ç„¶æ„Ÿåˆ°ç›¸ç•¶é–‹å¿ƒï¼Œä½†åŒæ™‚ä¹Ÿä¸ç¦æ„Ÿåˆ°å¥½å¥‡ï¼ŒCodePen æ˜¯å¦‚ä½•åšåˆ°ä¸é ˆé€é webpack ç·¨è­¯ vue æª”æ¡ˆï¼Œå°±å¯ä»¥å°‡ .vue çš„ component å¦‚å¯¦é¡¯ç¤ºåˆ°ç¶²é ä¸­ã€‚</p>
<p>å¤§å®¶éƒ½çŸ¥é“ï¼Œåœ¨ç¶²é é–‹ç™¼çš„ä¸–ç•Œä¸­ï¼Œå‰ç«¯æ˜¯æ²’æœ‰ç§˜å¯†çš„ã€‚ æ‰“é–‹äº†é–‹ç™¼å·¥å…·ï¼Œæ‰çŸ¥é“åŸä¾†æ˜¯é€é <strong><a href="https://github.com/FranckFreiburger/http-vue-loader" target="_blank" rel="external">http-vue-loader</a></strong> é€™å€‹å·¥å…·åšåˆ°çš„ã€‚</p>
<hr>

<p><strong><a href="https://github.com/FranckFreiburger/http-vue-loader" target="_blank" rel="external">http-vue-loader</a></strong> é€™å¥—å·¥å…·å¯æä¾›é–‹ç™¼è€…ç›´æ¥åœ¨ç¶²é ç’°å¢ƒä¸­è¼‰å…¥ <code>.Vue</code> Fileï¼Œç„¡éœ€é€é nodeJS ç’°å¢ƒç·¨è­¯ï¼Œä¹Ÿä¸éœ€è¦ Build çš„æ­¥é©Ÿã€‚</p>
<p>ç”¨æ³•å¾ˆç°¡å–®ï¼Œé¦–å…ˆåœ¨ç¶²é ä¸Šè¼‰å…¥ Vue èˆ‡ http-vue-loaderï¼Œå¦‚ä¸‹</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/http-vue-loader"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>æ¥è‘—ï¼Œå‡è¨­æˆ‘å€‘æœ‰ä¸€å€‹ <code>my-component.vue</code> çš„æª”æ¡ˆï¼š
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hello"</span>&gt;</span>Hello &#123;&#123;who&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">data</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">who</span>: <span class="string">'world'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line"><span class="selector-class">.hello</span> &#123;</div><div class="line">    <span class="attribute">background-color</span>: <span class="number">#ffe</span>;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>é‚£éº¼ï¼Œæˆ‘å€‘å°±å¯ä»¥åœ¨ <code>components</code> å…§é€é <code>httpVueLoader</code> ä¾†è¼‰å…¥æˆ‘å€‘çš„å­å…ƒä»¶ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"my-app"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">my-component</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="actionscript"></span></div><div class="line">  <span class="keyword">new</span> Vue(&#123;</div><div class="line">    el: <span class="string">'#my-app'</span>,</div><div class="line">    components: &#123;</div><div class="line">      <span class="string">'my-component'</span>: httpVueLoader(<span class="string">'my-component.vue'</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p><br></p>
<p>ç•¶ç„¶ï¼ŒhttpVueLoader ä¹Ÿæä¾›äº†é¡ä¼¼ <code>Vue.component(&#39;my-component&#39;, { ... })</code> çš„å®£å‘Šæ–¹å¼:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">httpVueLoaderRegister(Vue, <span class="string">'my-component.vue'</span>);</div><div class="line"></div><div class="line"><span class="keyword">new</span> Vue(&#123;</div><div class="line">    <span class="attr">components</span>: [</div><div class="line">        <span class="string">'my-component'</span></div><div class="line">    &#125;,</div></pre></td></tr></table></figure>
<p>æˆ–æ˜¯å°‡ httpVueLoader ç•¶ä½œ Plugin ä¾†ä½¿ç”¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Vue.use(httpVueLoader);</div><div class="line"></div><div class="line"><span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="attr">components</span>: &#123;</div><div class="line">      <span class="string">'my-component'</span>: <span class="string">'url:my-component.vue'</span></div><div class="line">  &#125;,</div><div class="line">  ...</div></pre></td></tr></table></figure>
<p>ç”šè‡³æ˜¯ Array çš„å½¢å¼ä¹Ÿå¯ä»¥ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> Vue(&#123;</div><div class="line">    <span class="attr">components</span>: [</div><div class="line">        <span class="string">'url:my-component.vue'</span></div><div class="line">    &#125;,</div><div class="line">    ...</div></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒhttpVueLoader ç›®å‰åƒ…æ”¯æ´ Vue 2 ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œè€Œä½œè€…ä¹Ÿåœ¨å°ˆæ¡ˆå…§èªªæ˜ï¼Œ httpVueLoader åªæ˜¯æä¾›ä¸€å€‹ç°¡ä¾¿çš„æ¸¬è©¦èˆ‡é–‹ç™¼ç’°å¢ƒï¼Œæ–¹ä¾¿é–‹ç™¼è€…ä¸éœ€è¦é€éç¹è¤‡çš„ç·¨è­¯éç¨‹æ‰èƒ½ä½¿ç”¨ vue file é€²è¡Œé–‹ç™¼ã€‚ </p>
<p>è‹¥æ˜¯è¦ç™¼ä½ˆåˆ°ç·šä¸Šçš„å°ˆæ¡ˆï¼Œå»ºè­°é‚„æ˜¯éœ€è¦é€éå·¥å…·ç·¨è­¯æ‰“åŒ…ï¼Œæœƒæœ‰æ›´å¥½çš„æ•ˆèƒ½ä»¥åŠæ›´ä½³çš„æ”¯æ´åº¦å–”ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸Šé€±åœ¨ Vue ç¤¾ç¾¤åœˆæœ‰å€‹ä»¤äººèˆˆå¥®çš„ç†±é–€æ–°è: CodePen å¯ä»¥æ”¯æ´ &lt;code&gt;.vue&lt;/code&gt; æª”æ¡ˆäº†ï¼&lt;/p&gt;
&lt;p&gt;&lt;blockquote class=&quot;twitter-tweet&quot; data-lang=&quot;zh-tw&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;
    
    </summary>
    
      <category term="vue.js" scheme="https://kuro.tw/categories/vue-js/"/>
    
    
      <category term="vue.js" scheme="https://kuro.tw/tags/vue-js/"/>
    
      <category term="httpVueLoader" scheme="https://kuro.tw/tags/httpVueLoader/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•åœ¨ Vue-CLI å»ºç«‹çš„é–‹ç™¼ç’°å¢ƒå‘¼å«è·¨åŸŸé ç«¯ RESTful APIs</title>
    <link href="https://kuro.tw/posts/2017/06/07/%E5%A6%82%E4%BD%95%E5%9C%A8-Vue-CLI-%E5%BB%BA%E7%AB%8B%E7%9A%84%E9%96%8B%E7%99%BC%E7%92%B0%E5%A2%83%E5%91%BC%E5%8F%AB%E8%B7%A8%E5%9F%9F%E9%81%A0%E7%AB%AF-RESTful-APIs/"/>
    <id>https://kuro.tw/posts/2017/06/07/å¦‚ä½•åœ¨-Vue-CLI-å»ºç«‹çš„é–‹ç™¼ç’°å¢ƒå‘¼å«è·¨åŸŸé ç«¯-RESTful-APIs/</id>
    <published>2017-06-07T10:14:00.000Z</published>
    <updated>2017-07-12T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>å‰å¹¾å¤©åœ¨ VueTW æ´»å‹•çµæŸå¾Œï¼Œæœ‰æœ‹å‹ä¾†å•ï¼šVue çš„é–‹ç™¼ç’°å¢ƒèƒ½ä¸èƒ½åœ¨ local ç«¯å»ºç«‹ proxy æœå‹™ä¾†è§£æ±ºè·¨åŸŸè®€å–å¾Œç«¯çš„ APIï¼Œ
<del>éš”å£æ£šçš„ Angular CLI å¥½åƒæœ‰é€™åŠŸèƒ½</del>ï¼Œ<a href="https://github.com/vuejs/vue-cli" target="_blank" rel="external">Vue-CLI</a> æ˜¯ä¸æ˜¯ä¹Ÿèƒ½åšåˆ°ã€‚</p>
<p>(ä½¿ç”¨ Angular é–‹ç™¼å°ˆæ¡ˆçš„æœ‹å‹ï¼Œé€™è£æ¨è–¦åƒè€ƒ Will ä¿å“¥é€™ç¯‡æ–‡ç« ï¼š<a href="http://blog.miniasp.com/post/2017/02/05/Setup-proxy-to-backend-in-Angular-CLI.aspx" target="_blank" rel="external">å¦‚ä½•åœ¨ Angular CLI å»ºç«‹çš„ Angular 2 é–‹ç™¼ç’°å¢ƒå‘¼å«é ç«¯ RESTful APIs</a>)ã€‚ </p>
<p>ä½¿ç”¨ Vue çš„æœ‹å‹ï¼Œåˆ¥è‘—æ€¥è«ç·Šå¼µï¼ŒVue-CLI ä¹Ÿæœ‰æä¾›é¡ä¼¼åŠŸèƒ½å–”ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š æœ¬æ–‡æ’°å¯«æ™‚ï¼Œä½¿ç”¨ Node v8.0.0 / NPM 5.0.0 èˆ‡ yarn v0.24.6ï¼ŒVue-CLI ç‚º 2.8.2ã€‚ 
å¯¦éš›åŸ·è¡Œæƒ…æ³å¯èƒ½å› åŸ·è¡Œç’°å¢ƒçš„ç‰ˆæœ¬æœƒæœ‰æ‰€å·®ç•°ã€‚</p>
</blockquote>
<p>é¦–å…ˆï¼Œç¬¬ä¸€æ­¥ç•¶ç„¶æ˜¯å…ˆå®‰è£ Vue-CLI: </p>
<ul>
<li><p>NPM:  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> npm install -g vue-cli</span></div></pre></td></tr></table></figure>
</li>
<li><p>YARN: </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> yarn global add vue-cli</span></div></pre></td></tr></table></figure>
</li>
</ul>
<hr>

<p>å®‰è£å¥½äº†ä¹‹å¾Œï¼Œæ¥è‘—æˆ‘å€‘é€é Vue-CLI ä¾†å»ºç«‹æ–°å°ˆæ¡ˆï¼Œæ¨£æ¿çš„éƒ¨åˆ†æˆ‘å€‘é¸ç”¨ <span style="color: red;">webpack</span>ï¼Œç„¶å¾ŒåŸ·è¡Œï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> vue init webpack <span class="built_in">test</span></span></div></pre></td></tr></table></figure>
<p>ä¸Šé¢æŒ‡ä»¤ä¸­çš„ <code>test</code> æ˜¯å°ˆæ¡ˆåç¨±ï¼Œé€™è£è«‹è‡ªè¡Œå–åæ›¿æ›æˆä½ è¦çš„åç¨±ã€‚ ç‚ºäº†ç¯€çœæ™‚é–“ï¼Œç¯„ä¾‹è£¡åªå®‰è£å¿…è¦çš„å¥—ä»¶ï¼Œå…¶ä»–é¸é …å¯ä¾ä½ çš„éœ€è¦é¸ç”¨å®‰è£ã€‚
<img src="/static/img/vue-cli.png"></p>
<p>æ¥è‘—åˆ‡æ›è‡³æ–°å¢å¥½çš„ç›®éŒ„å¾Œï¼Œå®‰è£ç›¸é—œå¥—ä»¶ã€‚</p>
<ul>
<li><p>NPM:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> <span class="built_in">test</span></span></div><div class="line"><span class="meta">$</span><span class="bash"> npm i</span></div><div class="line"><span class="meta">$</span><span class="bash"> npm run dev</span></div></pre></td></tr></table></figure>
</li>
<li><p>YARN:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> <span class="built_in">test</span></span></div><div class="line"><span class="meta">$</span><span class="bash"> yarn</span></div><div class="line"><span class="meta">$</span><span class="bash"> yarn dev</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>å®‰è£å®Œæˆä¸¦åŸ·è¡Œ dev-server ä¹‹å¾Œï¼Œæ‡‰è©²æœƒè‡ªå‹•é–‹å•Ÿç€è¦½å™¨ <code>http://localhost:8080/</code> ä¸¦çœ‹åˆ°ç•«é¢ï¼š
<img src="/static/img/hello-vue.png"></p>
<p>åˆ°ç›®å‰ç‚ºæ­¢å·²ç¶“å»ºç«‹èµ·ä¸€å€‹åŸºæœ¬çš„ Vue å°ˆæ¡ˆäº†ã€‚</p>
<hr>

<p>æ¥è‘—ï¼Œæˆ‘å€‘ä»¥ <a href="http://data.taipei/" target="_blank" rel="external">Data.Taipei</a> çš„ <a href="http://data.taipei/opendata/datalist/datasetMeta/preview?id=8ef1626a-892a-4218-8344-f7ac46e1aa48&amp;rid=9c6a96d6-353c-41c0-84cc-d181988304f2" target="_blank" rel="external">Youbikeè‡ºåŒ—å¸‚å…¬å…±è‡ªè¡Œè»Šå³æ™‚è³‡è¨Š</a> ä½œç‚ºæœ¬æ¬¡çš„ç¯„ä¾‹ã€‚
<img src="/static/img/data-taipei-Youbike.png"></p>
<p>VueJS çš„æ ¸å¿ƒä¸¦æ²’æœ‰æä¾› Ajax é€™æ¨£çš„åŠŸèƒ½ï¼Œæ‰€ä»¥åœ¨ç™¼é€é ç«¯è«‹æ±‚çš„æ™‚å€™ï¼Œæˆ‘å€‘è¦å…ˆå®‰è£ <a href="https://github.com/mzabriskie/axios" target="_blank" rel="external">axios</a> é€™æ¨£çš„å¥—ä»¶ä¾†å”åŠ©æˆ‘å€‘ï¼Œç•¶ç„¶ä½ æƒ³è¦ç”¨ jQuery AJAX æˆ–æ˜¯ Fetch API ä¹Ÿæ˜¯ ok çš„ã€‚</p>
<p>å®‰è£æ–¹å¼ï¼š</p>
<ul>
<li><p>NPM:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> npm install --save axios vue-axios</span></div></pre></td></tr></table></figure>
</li>
<li><p>YARN:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> yarn add axios vue-axios</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>å®‰è£å®Œç•¢å¾Œï¼Œæˆ‘å€‘æ‰“é–‹ App.vue æª”ï¼Œä¸¦åŠ ä¸Š <code>import</code> ä»¥åŠ <code>Vue.use</code> ä¾†è¼‰å…¥å¤–éƒ¨çš„å¥—ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></div><div class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></div><div class="line"><span class="keyword">import</span> VueAxios <span class="keyword">from</span> <span class="string">'vue-axios'</span></div><div class="line"></div><div class="line">Vue.use(VueAxios, axios)</div></pre></td></tr></table></figure>
<p>æ¥è‘—ï¼Œæˆ‘å€‘åœ¨ Vue å¯¦é«”çš„ <code>create</code> hook è£¡é¢ä¾†é€å‡º GET è«‹æ±‚è©¦è©¦ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">created()&#123;</div><div class="line">  Vue.axios.get(<span class="string">'http://data.taipei/youbike'</span>).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(response.data)</div><div class="line">  &#125;)</div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<p>åƒé€™æ¨£ï¼š
<img src="/static/img/vue-axios-code.png"></p>
<p>å­˜æª”å¾Œå†æ¬¡é–‹å•Ÿ dev-serverï¼Œæ¯«ç„¡æ„å¤–åœ°ï¼Œä½ æ‡‰è©²æœƒçœ‹åˆ°åƒé€™æ¨£çš„éŒ¯èª¤ï¼š
<img src="/static/img/ajax-error.png"></p>
<p>å› ç‚ºé ç«¯çš„ API ä¸¦æ²’æœ‰é–‹å•Ÿ CORS å”å®šï¼Œæ‰€ä»¥æˆ‘å€‘ç„¡æ³•è·¨åŸŸå­˜å–é€™å€‹è³‡æºã€‚ ä¸éé‚„å¥½ï¼ŒVue-CLI çš„ dev server æ•´åˆäº† <a href="https://github.com/chimurai/http-proxy-middleware" target="_blank" rel="external">http-proxy-middleware</a>ã€‚ é€™å€‹å·¥å…·æ›¿æˆ‘å€‘åœ¨ local ç«¯å»ºç«‹ä¸€å€‹ä»£ç†å±¤ï¼Œè®“æˆ‘å€‘åœ¨é–‹ç™¼æ™‚æœŸå°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„å‘¼å«é ç«¯çš„ HTTP APIã€‚</p>
<p>å¥—ä»¶çš„éƒ¨åˆ†ï¼ŒVue-CLI éƒ½å¹«æˆ‘å€‘æº–å‚™å¥½äº†ï¼Œæ¥è‘—æ‰“é–‹å°ˆæ¡ˆä¸‹ <code>config/index.js</code> é€™å€‹æª”æ¡ˆï¼Œç„¶å¾Œç·¨è¼¯ <code>proxyTable: {}</code> çš„éƒ¨åˆ†ã€‚
<img src="/static/img/proxyTable.png"></p>
<p>ä¿®æ”¹ <code>config/index.js</code> å¦‚ä¸‹ï¼š
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">proxyTable: &#123;</div><div class="line">  <span class="string">'/data'</span>: &#123;                        <span class="comment">// è‡ªè¨‚ local ç«¯çš„ä½ç½®</span></div><div class="line">    target: <span class="string">'http://data.taipei/'</span>,  <span class="comment">// é ç«¯ URL Domain</span></div><div class="line">    changeOrigin: <span class="literal">true</span>,</div><div class="line">    <span class="attr">pathRewrite</span>: &#123;</div><div class="line">      <span class="string">'^/data'</span>: <span class="string">''</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;,</div></pre></td></tr></table></figure></p>
<p>ç¶“éé€™æ¨£è¨­å®šå¾Œï¼Œ<code>http://data.taipei/</code> ç¶²åŸŸå…§çš„è³‡æºï¼Œéƒ½æœƒåœ¨ local ç«¯ä»¥ <code>/data</code> çš„å½¢å¼è¢«ä»£ç†ï¼Œä¹Ÿå°±æ˜¯èªªï¼Œåƒ <code>http://data.taipei/youbike</code> é€™æ¨£çš„é ç«¯è³‡æºï¼Œæˆ‘å€‘å°±å¯ä»¥åœ¨ local ç«¯ç”¨ <code>/data/youbike</code> ä¾†å–å¾—ã€‚</p>
<p>æ‰€ä»¥ï¼Œå†å›åˆ° <code>App.vue</code>ï¼Œé€™è£å°‡åŸæœ¬çš„ <code>http://data.taipei/youbike</code> æ”¹æˆ <code>/data/youbike</code>ï¼Œåƒé€™æ¨£ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">created()&#123;</div><div class="line">  Vue.axios.get(<span class="string">'/data/youbike'</span>).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(response.data)</div><div class="line">  &#125;)</div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<p>æ¥è‘—ï¼Œè¨˜å¾—è¦é‡é–‹ dev-serverï¼ŒåŸ·è¡Œ <code>$ npm run dev</code> æˆ– <code>$ yarn dev</code> ã€‚</p>
<p>æœ€å¾Œï¼Œåœ¨ç¶²é è®€å–å®Œæˆå¾Œï¼Œæ‰“é–‹ console å°±å¯ä»¥çœ‹åˆ°ï¼Œé ç«¯çš„ youbike è³‡è¨Šå·²ç¶“å¯ä»¥æ­£ç¢ºå–å¾—å›‰ã€‚
<img src="/static/img/vue-axios-ok.png"></p>
<p>è©³ç´°çš„ http-proxy-middleware è¨­å®šå¯ä»¥åƒè€ƒé€™è£¡ï¼š</p>
<ul>
<li><a href="https://github.com/chimurai/http-proxy-middleware#http-proxy-middleware-options" target="_blank" rel="external">https://github.com/chimurai/http-proxy-middleware#http-proxy-middleware-options</a></li>
<li><a href="https://vuejs-templates.github.io/webpack/proxy.html" target="_blank" rel="external">https://vuejs-templates.github.io/webpack/proxy.html</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰å¹¾å¤©åœ¨ VueTW æ´»å‹•çµæŸå¾Œï¼Œæœ‰æœ‹å‹ä¾†å•ï¼šVue çš„é–‹ç™¼ç’°å¢ƒèƒ½ä¸èƒ½åœ¨ local ç«¯å»ºç«‹ proxy æœå‹™ä¾†è§£æ±ºè·¨åŸŸè®€å–å¾Œç«¯çš„ APIï¼Œ
&lt;del&gt;éš”å£æ£šçš„ Angular CLI å¥½åƒæœ‰é€™åŠŸèƒ½&lt;/del&gt;ï¼Œ&lt;a href=&quot;https://github.com/vue
    
    </summary>
    
      <category term="vue.js" scheme="https://kuro.tw/categories/vue-js/"/>
    
    
      <category term="vue.js" scheme="https://kuro.tw/tags/vue-js/"/>
    
  </entry>
  
  <entry>
    <title>[VueJS-V2] åœ¨ v-for åˆ—è¡¨å®Œæˆåˆ†é åŠŸèƒ½ (å¾ v1 è‡³ v2)</title>
    <link href="https://kuro.tw/posts/2017/05/30/VueJS-V2-%E5%9C%A8-v-for-%E5%88%97%E8%A1%A8%E5%AE%8C%E6%88%90%E5%88%86%E9%A0%81%E5%8A%9F%E8%83%BD/"/>
    <id>https://kuro.tw/posts/2017/05/30/VueJS-V2-åœ¨-v-for-åˆ—è¡¨å®Œæˆåˆ†é åŠŸèƒ½/</id>
    <published>2017-05-30T09:00:00.000Z</published>
    <updated>2017-07-12T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>Vue 2 éƒ½ç™¼è¡ŒåŠå¹´å¤šäº†ï¼Œç›´åˆ°æœ€è¿‘æœ‰ç¶²å‹ç•™è¨€é€™æ‰æƒ³èµ·ä¸€ç›´æ²’æ›´æ–°è£¡é¢çš„å…§å®¹ï¼Œå›§ã€‚</p>
<p>å»¶çºŒä¸Šå› <a href="https://kuro.tw/posts/2016/05/30/vuejs-in-v-for-through-the-filter-in-the-list-complete-search-and-page-functions/">[VueJS] åœ¨ v-for åˆ—è¡¨ä¸­é€é filter å®Œæˆæœå°‹èˆ‡åˆ†é çš„åŠŸèƒ½</a> é€™ç¯‡çš„èªªæ˜ï¼Œ
é€™æ¬¡æˆ‘å€‘ä¾†çœ‹çœ‹ï¼Œè‡ªå¾ <span style="color: red">VueJS æ›´æ–°åˆ° V2 æ‹¿æ‰äº†å…§å»ºçš„ filterByã€limitBy ç­‰å¥½ç”¨çš„ filter å¾Œ</span>ï¼Œè¦å¦‚ä½•ä¿®æ”¹æ‰èƒ½åšåˆ°åˆ†é çš„åŠŸèƒ½ã€‚</p>
<p>é¦–å…ˆçœ‹åˆ°åŸæœ¬ V1 çš„ç¯„ä¾‹ï¼Œæ˜¯é€™æ¨£çš„ï¼Œé€™è£¡é€é <code>limitBy countOfPage pageStart</code> ä¾†å®Œæˆåˆ†é ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">"r in rows </span></span></div><div class="line">  | filterBy filter_name in 'name' </div><div class="line">  | recordLength 'filteredRowCount' </div><div class="line">  | limitBy countOfPage pageStart "&gt;</div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; (currPage-1) * countOfPage + $index + 1 &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; r.name &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; r.age &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; r.gender &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div></pre></td></tr></table></figure>
<p>å› ç‚ºå¾ V2 é–‹å§‹ï¼Œ<code>filterBy</code> ã€ <code>limitBy</code> ã€ <code>orderBy</code> éƒ½æ²’æœ‰äº†ï¼Œæ‰€ä»¥æˆ‘å€‘ç›´æ¥ç§»é™¤æ‰ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">"r in rows"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; (currPage-1) * countOfPage + $index + 1 &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; r.name &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; r.age &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; r.gender &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div></pre></td></tr></table></figure>
<p>é€™æ™‚æ‡‰è©²æœƒå‡ºç¾éŒ¯èª¤ï¼Œå› ç‚º <code>$index</code> çš„å¯«æ³•ä¹Ÿæ›´æ–°äº†ï¼Œæ‰€ä»¥æ”¹ä¸€ä¸‹ <code>v-for</code> çš„å…§å®¹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">"(r, index) in rows"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; (currPage-1) * countOfPage + index + 1 &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; r.name &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; r.age &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; r.gender &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div></pre></td></tr></table></figure>
<p>åˆ°ç›®å‰ç‚ºæ­¢ï¼Œè‡³å°‘å¯ä»¥çœ‹åˆ°ç¨‹å¼æ­£å¸¸é‹ä½œï¼Œä½†ç›¸å°åœ°<span style="color: red">åˆ†é èˆ‡æœå°‹çš„åŠŸèƒ½ä¹Ÿæ²’äº†</span>ï¼Œæ‰€ä»¥æ¥ä¸‹ä¾†å…ˆä¾†è™•ç†<strong>æœå°‹</strong>çš„éƒ¨ä»½ã€‚</p>
<hr>

<p>é¦–å…ˆï¼Œåœ¨ <code>computed</code> å±¬æ€§ï¼Œæˆ‘å€‘æ–°å¢ä¸€å€‹å«åš <code>filteredRows</code> çš„å±¬æ€§ï¼Œç”¨ä¾†è™•ç†èˆ‡ <code>filter_name</code> æ¯”å°å¾Œçš„çµæœï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">filteredRows: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="comment">// å› ç‚º JavaScript çš„ filter æœ‰åˆ†å¤§å°å¯«ï¼Œ</span></div><div class="line">  <span class="comment">// æ‰€ä»¥é€™è£¡å°‡ filter_name èˆ‡ rows[n].name é€šé€šè½‰å°å¯«æ–¹ä¾¿æ¯”å°ã€‚</span></div><div class="line">  <span class="keyword">var</span> filter_name = <span class="keyword">this</span>.filter_name.toLowerCase();</div><div class="line">  </div><div class="line">  <span class="comment">// å¦‚æœ filter_name æœ‰å…§å®¹ï¼Œå›å‚³éæ¿¾å¾Œçš„è³‡æ–™ï¼Œå¦å‰‡å°‡åŸæœ¬çš„ rows å›å‚³ã€‚</span></div><div class="line">  <span class="keyword">return</span> ( <span class="keyword">this</span>.filter_name.trim() !== <span class="string">''</span> ) ? </div><div class="line">      <span class="keyword">this</span>.rows.filter(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>)</span>&#123; <span class="keyword">return</span> d.name.toLowerCase().indexOf(filter_name) &gt; <span class="number">-1</span>; &#125;) : </div><div class="line">      <span class="keyword">this</span>.rows;</div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<p>ç„¶å¾Œå°‡ html å…§çš„ <code>rows</code> æ›æˆ <code>filteredRows</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">"(r, index) in filteredRows"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; (currPage-1) * countOfPage + index + 1 &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; r.name &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; r.age &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; r.gender &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div></pre></td></tr></table></figure>
<p>name æœå°‹çš„éƒ¨ä»½åˆ°é€™è£¡å°±ç®—å®Œæˆäº†ï¼Œæ¥è‘—å›é ­ä¾†è™•ç†<strong>åˆ†é </strong>ã€‚</p>
<hr>

<p>è™•ç†åˆ†é ä¹‹å‰ï¼Œå…ˆçœ‹åˆ°åº•ä¸‹çš„åˆ†é æŒ‰éˆ•ï¼Œ <code>n in range</code> åœ¨ V2 çš„å¯«æ³•ä¹Ÿæœ‰ä¸åŒï¼ŒåŸæœ¬çš„ç´¢å¼•æœƒç”± 0 é–‹å§‹ï¼Œä½†å¾ V2 é–‹å§‹æœƒç”± 1 é–‹å§‹ï¼Œæ‰€ä»¥éœ€è¦æŠŠåŸæœ¬çš„ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pagination"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-bind:class</span>=<span class="string">"&#123;'disabled': (currPage === 1)&#125;"</span> </span></div><div class="line">        @<span class="attr">click.prevent</span>=<span class="string">"setPage(currPage-1)"</span>&gt;<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Prev<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"n in totalPage"</span></span></div><div class="line">        <span class="attr">v-bind:class</span>=<span class="string">"&#123;'active': (currPage === (n+1))&#125;"</span> </div><div class="line">        @<span class="attr">click.prevent</span>=<span class="string">"setPage(n+1)"</span>&gt;<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>&#123;&#123;n+1&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-bind:class</span>=<span class="string">"&#123;'disabled': (currPage === totalPage)&#125;"</span> </span></div><div class="line">        @<span class="attr">click.prevent</span>=<span class="string">"setPage(currPage+1)"</span>&gt;<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Next<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>æ”¹å¯«æˆï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pagination"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-bind:class</span>=<span class="string">"&#123;'disabled': (currPage === 1)&#125;"</span> </span></div><div class="line">        @<span class="attr">click.prevent</span>=<span class="string">"setPage(currPage-1)"</span>&gt;<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Prev<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"n in totalPage"</span></span></div><div class="line">        <span class="attr">v-bind:class</span>=<span class="string">"&#123;'active': (currPage === (n))&#125;"</span> </div><div class="line">        @<span class="attr">click.prevent</span>=<span class="string">"setPage(n)"</span>&gt;<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>&#123;&#123;n&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-bind:class</span>=<span class="string">"&#123;'disabled': (currPage === totalPage)&#125;"</span> </span></div><div class="line">        @<span class="attr">click.prevent</span>=<span class="string">"setPage(currPage+1)"</span>&gt;<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Next<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>é¡¯ç¤ºå°±æœƒæ˜¯æ­£å¸¸çš„å¾ 1 é–‹å§‹äº†ã€‚</p>
<p>å†ä¾†è™•ç†é¡¯ç¤ºç­†æ•¸æ™‚ï¼Œéœ€è¦çš„æœƒæœ‰ <code>pageStart</code> ã€ <code>countOfPage</code> èˆ‡ <code>totalPage</code> é€™ä¸‰å€‹éƒ¨åˆ†ï¼Œå…¶ä¸­ <code>totalPage</code> æœƒè·Ÿå…ˆå‰æåˆ°çš„ <strong>æœå°‹</strong> æ¯”è¼ƒæœ‰é—œä¿‚ï¼Œå› ç‚ºç¸½é æ•¸ä¸å°ï¼Œç®—å‡ºä¾†çš„åˆ†é ä¹Ÿæœƒæœ‰å•é¡Œã€‚</p>
<p>åŸæœ¬çš„ <code>totalPage</code> é•·é€™æ¨£ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">totalPage: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">if</span>( <span class="keyword">this</span>.filter_name.trim() === <span class="string">''</span> ) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="built_in">Math</span>.ceil(<span class="keyword">this</span>.rows.length / <span class="keyword">this</span>.countOfPage);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">else</span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="built_in">Math</span>.ceil(<span class="keyword">this</span>.filteredRowCount / <span class="keyword">this</span>.countOfPage);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å› ç‚ºè³‡æ–™åœ¨å…ˆå‰éƒ½äº¤çµ¦ <code>filteredRows</code> è™•ç†äº†ï¼Œæ‰€ä»¥å¯ä»¥æ”¹å¯«æˆ
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">totalPage: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.ceil(<span class="keyword">this</span>.filteredRows.length / <span class="keyword">this</span>.countOfPage);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å¯¦éš›åŸ·è¡Œæœƒç™¼ç¾æœ€åº•ä¸‹çš„åˆ†é æŒ‰éˆ•å·²ç¶“æœƒéš¨è‘— Filter çš„çµæœç­†æ•¸è€Œæœ‰æ‰€ä¸åŒï¼š</p>
<p><img src="/static/img/v2-filter-1.png"></p>
<p><hr>
<img src="/static/img/v2-filter-2.png"></p>
<p>æœ€å¾Œï¼Œå†å›åˆ°è™•ç†<span style="color: red">æ¯é é¡¯ç¤ºè³‡æ–™é‡</span>çš„éƒ¨åˆ†ã€‚</p>
<p>åœ¨æ²’æœ‰äº† <code>limitBy</code> ä¹‹å¾Œï¼Œé¡¯ç¤ºç­†æ•¸çš„éƒ¨ä»½æˆ‘å€‘å¯ä»¥é€é JavaScript çš„ <code>slice</code> ä¾†è™•ç†ï¼Œç•¶ç„¶ä¹Ÿå¯ä»¥å¯«åœ¨ <code>computed</code> å±¬æ€§ã€‚
ä½†é€™å€‹ç¯„ä¾‹åªæ˜¯å–®ç´”åœ¨é¡¯ç¤ºä½œåˆ‡æ›ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥å¯«åœ¨ view ä¸Šï¼Œåƒé€™æ¨£å°‡ <code>filteredRows</code> æ”¹å¯«æˆ <code>filteredRows.slice(pageStart, pageStart + countOfPage)</code>ï¼š</p>
<p>å° <code>slice</code> ä¸ç†Ÿçš„æœ‹å‹å¯åƒè€ƒï¼š MDN: <a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Array/slice" target="_blank" rel="external">Array.prototype.slice()</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">"(r, index) in filteredRows.slice(pageStart, pageStart + countOfPage)"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; (currPage-1) * countOfPage + index + 1 &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; r.name &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; r.age &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; r.gender &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div></pre></td></tr></table></figure>
<p>å°±å®Œæˆäº†å¾ V1 æ›´æ–°åˆ° V2 çš„éç¨‹äº†ã€‚</p>
<p>å®Œæ•´æ›´æ–°çš„ç¯„ä¾‹å¯åœ¨æ­¤åƒè€ƒï¼š<br>
<a class="jsbin-embed" href="http://jsbin.com/kusafiqaka/embed?html,js,output" target="_blank" rel="external">JS Bin on jsbin.com</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Vue 2 éƒ½ç™¼è¡ŒåŠå¹´å¤šäº†ï¼Œç›´åˆ°æœ€è¿‘æœ‰ç¶²å‹ç•™è¨€é€™æ‰æƒ³èµ·ä¸€ç›´æ²’æ›´æ–°è£¡é¢çš„å…§å®¹ï¼Œå›§ã€‚&lt;/p&gt;
&lt;p&gt;å»¶çºŒä¸Šå› &lt;a href=&quot;https://kuro.tw/posts/2016/05/30/vuejs-in-v-for-through-the-filter-in-the-l
    
    </summary>
    
      <category term="vue.js" scheme="https://kuro.tw/categories/vue-js/"/>
    
    
      <category term="vue.js" scheme="https://kuro.tw/tags/vue-js/"/>
    
  </entry>
  
  <entry>
    <title>[ç­†è¨˜] Google è¡—æ™¯ API åŠ å…¥åœ–æ¨™èˆ‡é è¨­è§’åº¦è¨ˆç®—</title>
    <link href="https://kuro.tw/posts/2017/04/04/%E7%AD%86%E8%A8%98-Google-%E8%A1%97%E6%99%AF-API-%E5%8A%A0%E5%85%A5%E5%9C%96%E6%A8%99%E8%88%87%E8%A7%92%E5%BA%A6%E8%A8%88%E7%AE%97/"/>
    <id>https://kuro.tw/posts/2017/04/04/ç­†è¨˜-Google-è¡—æ™¯-API-åŠ å…¥åœ–æ¨™èˆ‡è§’åº¦è¨ˆç®—/</id>
    <published>2017-04-04T07:10:00.000Z</published>
    <updated>2017-07-12T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç›¸ä¿¡å¤§å®¶éƒ½çŸ¥é“ Google Map åœ¨å¤šå¹´ä»¥å‰å°±é–‹æ”¾äº†ã€Œè¡—æ™¯æª¢è¦–ã€é€™æ¨£çš„æœå‹™ï¼Œç•¶ç„¶ Google Map API ä¹Ÿæä¾›äº†çµ¦é–‹ç™¼è€…ä½¿ç”¨ç›¸é—œçš„ API æœå‹™ï¼šã€Œ<a target="_blank" href="https://developers.google.com/maps/documentation/javascript/streetview">Street View Service</a>ã€ä¾†é–‹ç™¼åœ°åœ–çš„æ‡‰ç”¨ã€‚</p>
<p>é™¤äº†åŸæœ¬åœ¨ Google Map ä¸Šé¢å°±æœ‰çš„è¡—æ™¯æª¢è¦–ä¹‹å¤–ï¼Œé€é Street View API é–‹ç™¼è€…å¯ä»¥è‡ªç”±åœ°åœ¨è¡—æ™¯åœ°åœ–ä¸ŠåŠ å…¥æ¨™ç¤ºé …ï¼Œä½œæ³•å°±è·Ÿå¹³æ™‚åœ¨åœ°åœ–ä¸ŠåŠ å…¥ marker ä¸€æ¨£ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> marker = <span class="keyword">new</span> google.maps.Marker(&#123;</div><div class="line">  <span class="attr">map</span>: map,</div><div class="line">  <span class="attr">icon</span>: <span class="string">'//chart.googleapis.com/chart?chst=d_map_pin_icon&amp;chld=train|ffff00'</span>,</div><div class="line">  <span class="attr">position</span>: &#123;<span class="attr">lat</span>: <span class="number">25.051269</span>, <span class="attr">lng</span>: <span class="number">121.512386</span>&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>å¦‚ä¸‹åœ–é»ƒè‰² iconï¼š
<img src="/static/img/map-marker.png"></p>
<p>é€™å€‹æ™‚å€™æˆ‘å€‘åˆ‡æ›æˆè¡—æ™¯æª¢è¦–çš„æ™‚å€™ï¼Œä½ æœƒç™¼ç¾é‚„éœ€è¦è‡ªå·±æ‰‹å‹•èª¿æ•´è§’åº¦æ‰èƒ½æ‰¾åˆ° icon çš„ä½ç½®ï¼š
<br>(å¦‚ä¸‹åœ°åœ–ï¼Œå¯æŒ‰å³ä¸‹è§’æŒ‰éˆ•åˆ‡æ›è¡—æ™¯)</p>
<iframe style="border: 1px solid #aaa; width: 720px; height: 300px;" src="https://kuro.tw/demo-pages/maps/map-add-marker.html"></iframe>

<p>éœ€è¦å°‡è¦–è§’å¾€å·¦é‚Šç§»å‹•å¾Œæ‰èƒ½æ‰¾åˆ° icon çš„ä½ç½®ã€‚</p>
<hr>

<p>é‚£éº¼ï¼Œæ˜¯å¦æœ‰æ›´å¥½çš„æ–¹å¼å¯ä»¥è®“ Google è¡—æ™¯å¯ä»¥è‡ªå‹•åˆ¤æ–·è¦–è§’æ–¹å‘å‘¢ï¼Ÿ</p>
<p>æœ‰çš„ï¼Œå¯ä»¥åˆ©ç”¨ Google Map æ‰€æä¾›çš„ <a target="_blank" href="https://developers.google.com/maps/documentation/javascript/geometry">Geometry Library</a> ä¾†å”åŠ©æˆ‘å€‘è¨ˆç®—å…©é»ä¹‹é–“çš„è§’åº¦ã€‚</p>
<p>åœ¨ Google Maps API å…§ï¼Œã€Œæ–¹å‘ã€æ˜¯ä»¥èˆ‡æ­£åŒ—çš„è§’åº¦ä¾†å®šç¾©ï¼Œä¹Ÿå°±æ˜¯å¾æ­£åŒ— (0 åº¦) çš„é †æ™‚é‡æ–¹å‘è¨ˆç®—çš„è§’åº¦ï¼Œå¯ä»¥ä½¿ç”¨ <code>computeHeading()</code> æ–¹æ³•ï¼Œå°‡å…©å€‹ <code>from</code> å’Œ <code>to</code> çš„ LatLng ç‰©ä»¶å‚³éçµ¦å®ƒï¼Œä¾†è¨ˆç®—å…©å€‹ä½ç½®ä¹‹é–“çš„æ–¹å‘ã€‚</p>
<p>å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> heading = google.maps.geometry.spherical.computeHeading(from_latLng, target_latlng);</div></pre></td></tr></table></figure>
<p><code>google.maps.geometry.spherical.computeHeading( )</code> å°±æœƒå›å‚³å…©é»ä¹‹é–“çš„è§’åº¦ï¼Œæ¥è‘—ï¼Œæˆ‘å€‘å°±å¯ä»¥é€é
<code>panorama.setPov({ heading: heading, pitch: 0 });</code> ä¾†æŒ‡å®šè¡—æ™¯çš„é è¨­è§’åº¦äº†ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç›¸ä¿¡å¤§å®¶éƒ½çŸ¥é“ Google Map åœ¨å¤šå¹´ä»¥å‰å°±é–‹æ”¾äº†ã€Œè¡—æ™¯æª¢è¦–ã€é€™æ¨£çš„æœå‹™ï¼Œç•¶ç„¶ Google Map API ä¹Ÿæä¾›äº†çµ¦é–‹ç™¼è€…ä½¿ç”¨ç›¸é—œçš„ API æœå‹™ï¼šã€Œ&lt;a target=&quot;_blank&quot; href=&quot;https://developers.google.com/ma
    
    </summary>
    
      <category term="Google Map" scheme="https://kuro.tw/categories/Google-Map/"/>
    
    
      <category term="google map" scheme="https://kuro.tw/tags/google-map/"/>
    
      <category term="street map api" scheme="https://kuro.tw/tags/street-map-api/"/>
    
  </entry>
  
  <entry>
    <title>é€é Vue-CLI å»ºç½®å°ˆæ¡ˆæ™‚ï¼Œè‡ªå‹•åˆ‡æ› devtools çš„ debug ç’°å¢ƒ</title>
    <link href="https://kuro.tw/posts/2016/12/08/%E9%80%8F%E9%81%8E-VueCLI-%E5%BB%BA%E7%BD%AE%E5%B0%88%E6%A1%88%E6%99%82%EF%BC%8C%E8%87%AA%E5%8B%95%E5%88%87%E6%8F%9B-devtools-%E7%9A%84-debug-%E7%92%B0%E5%A2%83/"/>
    <id>https://kuro.tw/posts/2016/12/08/é€é-VueCLI-å»ºç½®å°ˆæ¡ˆæ™‚ï¼Œè‡ªå‹•åˆ‡æ›-devtools-çš„-debug-ç’°å¢ƒ/</id>
    <published>2016-12-08T03:40:00.000Z</published>
    <updated>2017-07-12T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>Vue æä¾›äº†ç›¸ç•¶å¥½ç”¨çš„ debug å·¥å…· (Chrome å¥—ä»¶)ï¼Œ <a href="https://chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd" target="_blank" rel="external">Vue.js devtools</a>ï¼Œåœ¨å®‰è£ä¹‹å¾Œç•¶ä½ ç”¨ Chrome é–‹å•Ÿ Vue å°ˆæ¡ˆæ™‚ï¼ŒChrome çš„é–‹ç™¼è€…å·¥å…·æœƒå¤šå‡ºä¸€å€‹ Vue çš„ Tabï¼Œç„¶å¾ŒæŠŠ Vue Instance è£¡çš„å±¬æ€§é€šé€šåˆ—å‡ºä¾†ï¼š</p>
<p><img src="/static/img/vue-tool-screenshot.png"></p>
<p>åœ¨é è¨­é–‹å•Ÿ debug mode æ™‚ï¼ŒæŒ‰ä¸‹ Vue devtools çš„ icon ä½ æœƒçœ‹åˆ°é€™æ¨£ç•«é¢ï¼š
<img src="/static/img/vue-tool-on.png"></p>
<p>é€™æ™‚å€™æ‰“é–‹ Chrome é–‹ç™¼è€…å·¥å…·ï¼Œ vue å°ˆæ¡ˆä¸­æ‰€æœ‰ Instance çš„å±¬æ€§è³‡æ–™é€šé€šä¸€è¦½ç„¡éºã€‚</p>
<hr>

<p>ä½†æ˜¯ç•¶å°ˆæ¡ˆå®Œæˆè¦ä¸Šç·šçš„æ™‚å€™ï¼Œå°±æ‡‰è©²è¦å°‡ debug mode é—œé–‰ï¼Œå°¤å…¶åœ¨å±¬æ€§å¯èƒ½æœƒå­˜æœ‰è¼ƒç‚ºæ©Ÿæ•æ€§è³‡æ–™çš„æ™‚å€™ã€‚
é—œé–‰çš„æ–¹å¼ä¹Ÿå¾ˆç°¡å–®ï¼ŒåŠ ä¸Šé€™å…©è¡Œå°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Vue.config.debug = <span class="literal">false</span>;</div><div class="line">Vue.config.devtools = <span class="literal">false</span>;</div></pre></td></tr></table></figure>
<p>é—œé–‰å¾Œï¼Œå†é–‹å•Ÿ Vue å°ˆæ¡ˆï¼Œé›–ç„¶ icon åµæ¸¬åˆ° Vue.js æœƒäº®èµ·ä¾†ï¼Œä½†æ˜¯ä½ æœƒçœ‹åˆ°é€™æ¨£è¨Šæ¯ï¼š
<img src="/static/img/vue-tool-disabled.png"></p>
<p>é€™æ™‚å€™ Chrome é–‹ç™¼è€…å·¥å…·çš„ Vue tab å°±ä¸æœƒå‡ºç¾äº†ã€‚</p>
<hr>

<p>ä½†æ˜¯ï¼Œåœ¨å»ºç½®å°ˆæ¡ˆçš„æ™‚å€™ï¼Œå¸¸å¸¸æœƒå¿˜è¨˜æ‰‹å‹•èª¿æ•´ debug modeï¼Œå°è‡´ä¸Šç·šçš„å°ˆæ¡ˆæœƒæ˜¯é–‹å•Ÿ debug mode çš„ç‰ˆæœ¬ï¼Œ
æ˜¯å¦å¯ä»¥åœ¨ webpack å•Ÿå‹•çš„æ™‚å€™è‡ªå‹•åˆ¤æ–·ç›®å‰ç’°å¢ƒå‘¢ï¼Ÿ</p>
<p>ä»¥ Vue-CLI æä¾›çš„ package.json ç‚ºä¾‹ï¼Œä»–æä¾›äº†å…©å€‹é è¨­çš„ scriptsï¼Œ dev ç”¨åœ¨é–‹ç™¼å°ˆæ¡ˆæ™‚ä½¿ç”¨ï¼Œè€Œ build å‰‡ç”¨æ–¼å»ºç½® production ä½¿ç”¨ï¼š
<img src="/static/img/vue-package-json.png"></p>
<p>åœ–ä¸­å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ build æ¨¡å¼ä¸‹å¤šäº† <code>NODE_ENV=production</code> é€™å€‹åƒæ•¸ã€‚</p>
<p>é€™æ™‚å€™æˆ‘å€‘å°±å¯ä»¥åˆ©ç”¨ <code>NODE_ENV</code> é€™å€‹åƒæ•¸ä¾†åˆ¤æ–·ä½¿å¦é–‹å•Ÿ debug modeï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></div><div class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> isDebug_mode = process.env.NODE_ENV !== <span class="string">'production'</span>;</div><div class="line"></div><div class="line">Vue.config.debug = isDebug_mode;</div><div class="line">Vue.config.devtools = isDebug_mode;</div></pre></td></tr></table></figure>
<p>é€™æ¨£ <code>Vue.config.debug</code> çš„ç‰ˆæœ¬å°±æœƒè‡ªå‹•ä¾ç…§åŸ·è¡Œéšæ®µçš„ä¸åŒè€Œæœ‰ä¸åŒçš„è¨­å®šäº†ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Vue æä¾›äº†ç›¸ç•¶å¥½ç”¨çš„ debug å·¥å…· (Chrome å¥—ä»¶)ï¼Œ &lt;a href=&quot;https://chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd&quot; ta
    
    </summary>
    
      <category term="vue.js" scheme="https://kuro.tw/categories/vue-js/"/>
    
    
      <category term="vue.js" scheme="https://kuro.tw/tags/vue-js/"/>
    
      <category term="vue-cli" scheme="https://kuro.tw/tags/vue-cli/"/>
    
      <category term="webpack" scheme="https://kuro.tw/tags/webpack/"/>
    
      <category term="devtools" scheme="https://kuro.tw/tags/devtools/"/>
    
  </entry>
  
  <entry>
    <title>åˆ©ç”¨ Yarn å®‰è£ Vue-cli</title>
    <link href="https://kuro.tw/posts/2016/10/13/%E5%88%A9%E7%94%A8-yarn-%E5%AE%89%E8%A3%9D-vue-cli/"/>
    <id>https://kuro.tw/posts/2016/10/13/åˆ©ç”¨-yarn-å®‰è£-vue-cli/</id>
    <published>2016-10-13T03:49:07.000Z</published>
    <updated>2017-07-12T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>é€™å…©å¤© JavaScript åœˆå­çš„æœ€å¤§æ–°èæ‡‰è©²å°±æ˜¯ Facebook ç™¼å¸ƒäº†ä¸€å¥—æ–°çš„ JavaScript å¥—ä»¶ç®¡ç†å·¥å…· Yarnï¼Œæ„Ÿè¦ºä¾†å‹¢æ´¶æ´¶å‹¢ä¸å¯æ“‹ã€‚
å¯¦éš›èŠ±äº†ä¸€é»æ™‚é–“è©¦ç”¨ï¼Œè¡¨ç¾çš„ç¢ºä¹Ÿæ¯”éå» npm å¥½å¾ˆå¤šï¼Œå°¤å…¶éå» <code>npm install</code> é€Ÿåº¦éæ…¢ï¼Œå¥—ä»¶ç›¸ä¾è¡çªçš„å•é¡Œï¼Œç›®å‰åœ¨ Yarn é‚„æ²’é‡åˆ°ã€‚ å³ä½¿æ˜¯å‰›é–‹å§‹ <code>yarn run scripts</code> ç„¡æ³•å¸¶å…¥åƒæ•¸çš„å•é¡Œï¼Œåœ¨ç™¼å¸ƒçš„ç¬¬äºŒå¤©ä¹Ÿå¿«é€Ÿåœ°æ›´æ–° (v0.15.1) è§£æ±ºäº†ã€‚ ğŸ‘</p>
<p><img src="/static/img/yarn-logo.png"></p>
<p>æœ‰é—œ Yarn ä»‹ç´¹çš„éƒ¨åˆ†ï¼Œå·²ç¶“æœ‰å…¶ä»–å‰è¼©åˆ†äº«äº†ï¼Œæ¨è–¦å¯ä»¥çœ‹çœ‹é€™ç¯‡ <a href="https://medium.com/@jackypan1989/%E5%8F%96%E4%BB%A3-npm-%E7%9A%84%E6%96%B0%E5%88%A9%E5%99%A8-yarn-7d97f2f409b9#.pu0jrdcc4" target="_blank" rel="external">å–ä»£ npm çš„æ–°åˆ©å™¨ Yarn</a>ã€‚</p>
<p>æ—¢ç„¶ Yarn è™Ÿç¨±å¯ä»¥ç”¨ä¾†å–ä»£ npmï¼Œé‚£éº¼èº«ç‚º Vue çš„æ„›å¥½è€…ï¼Œä¹Ÿæƒ³é¦¬ä¸Šä¾†è©¦è©¦ <a href="https://github.com/vuejs/vue-cli" target="_blank" rel="external">Vue-cli</a> é€™å¥— Vue çš„æ¨£æ¿å·¥å…·åŒ…æ˜¯å¦ä¹Ÿå¯ä»¥é€é yarn ä¾†å–®ç¨åŸ·è¡Œã€‚</p>
<p><del>æ—¢ç„¶è¦å–ä»£ npmï¼Œé‚£éº¼ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯æŠŠ npm æ•´åŒ…å¹¹æ‰</del>ï¼Œé—œæ–¼åˆªæ‰ npm modules çš„éç¨‹æˆ‘æ˜¯åƒè€ƒ stackoverflow çš„é€™ç¯‡:
<a href="http://stackoverflow.com/questions/9283472/command-to-remove-all-npm-modules-globally" target="_blank" rel="external">Command to remove all npm modules globally?</a>ï¼Œä½†å¯¦éš›ä¸Š Yarn èˆ‡ npm æ˜¯å¯ä»¥å’Œå¹³å…±å­˜çš„ï¼Œä¸ä¸€å®šè¦æŠŠ npm å¹¹æ‰æ‰èƒ½è·‘ Yarn ï¼Œé€™è£¡åªæ˜¯æƒ³ç°¡å–®åšå€‹è©¦é©—ï¼Œå•¾å’ª ^.&lt;</p>
<p>ç„¶å¾Œå®‰è£ Yarnã€‚ åŸ·è¡Œ <code>curl -o- -L https://yarnpkg.com/install.sh | bash</code> å³å¯ã€‚</p>
<hr>

<h3 id="ç¬¬ä¸€æ­¥ï¼šå®‰è£-vue-cli"><a href="#ç¬¬ä¸€æ­¥ï¼šå®‰è£-vue-cli" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šå®‰è£ vue-cli"></a>ç¬¬ä¸€æ­¥ï¼šå®‰è£ vue-cli</h3><p>å¾ˆç°¡å–®ï¼ŒæŠŠåŸæœ¬çš„  <code>npm install -g vue-cli</code> æ”¹æˆ <code>yarn global add vue-cli</code> å°±å¯ä»¥äº†ã€‚åŸ·è¡Œçš„æ™‚å€™åƒé€™æ¨£ï¼š
<img src="/static/img/yarn-vue-1.png"></p>
<p>è€Œå®‰è£å®Œç•¢å¾Œï¼ŒåŸ·è¡Œ <code>yarn vue</code> æ‡‰è©²å¯ä»¥çœ‹åˆ°é€™æ¨£çš„ç•«é¢ã€‚
<img src="/static/img/yarn-vue-2.png"></p>
<p>æ¯åŸ·è¡Œå®Œä¸€å€‹æŒ‡ä»¤é‚„æœƒå‘Šè¨´ä½ å®ƒè·‘äº†å¤šä¹…å–”<del>ï¼Œéå¸¸å›‚å¼µ (èª¤)</del>ã€‚</p>
<h3 id="ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–-Vue-å°ˆæ¡ˆ"><a href="#ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–-Vue-å°ˆæ¡ˆ" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ– Vue å°ˆæ¡ˆ"></a>ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ– Vue å°ˆæ¡ˆ</h3><p>æ¥è‘—ï¼Œå°±ä¾†åˆå§‹åŒ–æˆ‘å€‘çš„ Vue å°ˆæ¡ˆã€‚ Vue-cli é€™å€‹ scaffolding å·¥å…·å®˜æ–¹ç›®å‰æä¾›äº†å¹¾ç¨® template è®“é–‹ç™¼è€…è‡ªè¡Œé¸æ“‡ï¼Œ
åƒæ˜¯å¤§å®¶å¸¸è¦‹çš„ webpackã€browserify éƒ½æœ‰ã€‚ç•¶ç„¶ä¹Ÿå¯ä»¥æŒ‘é¸ä»€éº¼éƒ½æ²’æœ‰çš„ simple: å°±æ˜¯æœ€åŸºæœ¬çš„ Vue å°ˆæ¡ˆé€™æ¨£ã€‚
å¦‚æœæƒ³æ›´è©³ç´°äº†è§£å„ç¨® template ç´°ç¯€çš„è©±ï¼Œå¯ä»¥åˆ° vue-templates çš„ <a href="https://github.com/vuejs-templates" target="_blank" rel="external">Repo</a> å»çœ‹ã€‚</p>
<p>é€™è£¡æˆ‘å°±é¸æ“‡æ‹¿ã€Œ<a href="https://github.com/vuejs-templates/webpack-simple" target="_blank" rel="external">webpack-simple</a>ã€ç•¶ç¯„ä¾‹ã€‚</p>
<p>åŸ·è¡Œ <code>yarn vue init webpack-simple my-project</code>
<img src="/static/img/yarn-vue-3.png"></p>
<p>å› ç‚º VueJS ç›®å‰å·²ç¶“ç™¼ä½ˆè‡³ 2.0 ç‰ˆäº†ï¼Œæ‰€ä»¥ä½ æœƒçœ‹åˆ° Vue-cli å¾ˆè²¼å¿ƒåœ°æé†’ä½ ç¾åœ¨å®‰è£çš„æ˜¯<span style="color: red;"> 2.0 çš„ç‰ˆæœ¬</span>ã€‚
è‹¥ä½ æƒ³å®‰è£çš„æ˜¯ 1.x ç‰ˆæœ¬çš„è©±ï¼Œå¯ä»¥æ”¹æˆ <br> <code>yarn vue init webpack-simple#1.0 my-project</code> å³å¯ã€‚</p>
<p>ç„¶å¾Œï¼ŒVue-cli æœƒå¹«æˆ‘å€‘å»ºç«‹ä¸€å€‹æ–°ç›®éŒ„ <code>my-project</code>ã€‚</p>
<p>é€é <code>cd my-project</code> åˆ‡æ›åˆ°æ–°å°ˆæ¡ˆç›®éŒ„å¾Œï¼Œæˆ‘å€‘å°‡åŸæœ¬çš„ <code>npm install</code> æ”¹æˆç›´æ¥åŸ·è¡Œ <code>yarn</code> å³å¯ã€‚
<img src="/static/img/yarn-vue-4.png"></p>
<h3 id="ç¬¬ä¸‰æ­¥ï¼šå•Ÿå‹•ä¸¦åŸ·è¡Œ-vue-å°ˆæ¡ˆ"><a href="#ç¬¬ä¸‰æ­¥ï¼šå•Ÿå‹•ä¸¦åŸ·è¡Œ-vue-å°ˆæ¡ˆ" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šå•Ÿå‹•ä¸¦åŸ·è¡Œ vue å°ˆæ¡ˆ"></a>ç¬¬ä¸‰æ­¥ï¼šå•Ÿå‹•ä¸¦åŸ·è¡Œ vue å°ˆæ¡ˆ</h3><p>æœ€å¾Œï¼Œç›´æ¥åŸ·è¡Œ <code>yarn run dev</code> æ‡‰è©²æœƒçœ‹åˆ°åƒé€™æ¨£çš„ç•«é¢ã€‚
<img src="/static/img/yarn-vue-5.png"></p>
<p>æ‰“é–‹ä½ çš„ç€è¦½å™¨é€£åˆ° <code>http://localhost:8080/</code> çœ‹åˆ° <code>Hello Vue!</code> çš„å­—æ¨£å°±ä»£è¡¨æˆåŠŸåŸ·è¡Œå›‰ï¼
<img src="/static/img/yarn-vue-6.png"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é€™å…©å¤© JavaScript åœˆå­çš„æœ€å¤§æ–°èæ‡‰è©²å°±æ˜¯ Facebook ç™¼å¸ƒäº†ä¸€å¥—æ–°çš„ JavaScript å¥—ä»¶ç®¡ç†å·¥å…· Yarnï¼Œæ„Ÿè¦ºä¾†å‹¢æ´¶æ´¶å‹¢ä¸å¯æ“‹ã€‚
å¯¦éš›èŠ±äº†ä¸€é»æ™‚é–“è©¦ç”¨ï¼Œè¡¨ç¾çš„ç¢ºä¹Ÿæ¯”éå» npm å¥½å¾ˆå¤šï¼Œå°¤å…¶éå» &lt;code&gt;npm install&lt;/code&gt; 
    
    </summary>
    
      <category term="vue.js" scheme="https://kuro.tw/categories/vue-js/"/>
    
    
      <category term="vue.js" scheme="https://kuro.tw/tags/vue-js/"/>
    
      <category term="yarn" scheme="https://kuro.tw/tags/yarn/"/>
    
  </entry>
  
  <entry>
    <title>[ç­†è¨˜] é€é Composition Events å¢å¼·éæ‹‰ä¸èªç³»è¼¸å…¥æ³•å°è¼¸å…¥æ¡†çš„æ”¯æ´</title>
    <link href="https://kuro.tw/posts/2016/10/11/%E7%AD%86%E8%A8%98-%E9%80%8F%E9%81%8E-Composition-Events-%E5%A2%9E%E5%BC%B7%E9%9D%9E%E6%8B%89%E4%B8%81%E8%AA%9E%E7%B3%BB%E8%BC%B8%E5%85%A5%E6%B3%95%E5%B0%8D%E8%BC%B8%E5%85%A5%E6%A1%86%E7%9A%84%E6%94%AF%E6%8F%B4/"/>
    <id>https://kuro.tw/posts/2016/10/11/ç­†è¨˜-é€é-Composition-Events-å¢å¼·éæ‹‰ä¸èªç³»è¼¸å…¥æ³•å°è¼¸å…¥æ¡†çš„æ”¯æ´/</id>
    <published>2016-10-11T04:57:30.000Z</published>
    <updated>2017-07-12T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨çˆ¬ Vue çš„åŸå§‹ç¢¼çš„æ™‚å€™ï¼Œæ„å¤–ç™¼ç¾å…©å€‹æ²’çœ‹éçš„ eventï¼š<code>compositionstart</code> èˆ‡ <code>compositionend</code>ã€‚ æŸ¥äº†ä¸€ä¸‹ MDN æ‰ç™¼ç¾é€™äº›å«åšã€Œ<a href="https://developer.mozilla.org/en-US/docs/Web/API/CompositionEvent" title="Composition Events" target="_blank" rel="external">Composition Events</a>ã€çš„ event æ˜¯å¾ DOM Level 3 ä¹‹å¾Œæ‰æ–°å¢çš„ã€‚</p>
<p>ä»‹ç´¹ Composition Events ä¹‹å‰å…ˆä¾†è«‡è«‡ DOM API éå»å°è¼¸å…¥æ¡†åµæ¸¬è®ŠåŒ–çš„å¹¾å€‹æ–¹å¼ã€‚</p>
<p>ä¸€èˆ¬ä¾†èªªï¼Œå¸¸è¦‹çš„è¡¨å–®è¼¸å…¥æ¡†å¦‚: <code>&lt;input type=&quot;text&quot;&gt;</code> å¦‚æœè¦å‹•æ…‹ç›£è½è¼¸å…¥æ¡†çš„æ–‡å­—è®ŠåŒ–æ™‚ï¼Œ
å¤§å¤šæœƒé€éç›£è½ <code>keydown</code>ã€<code>keypress</code>ã€<code>keyup</code> ç­‰éµç›¤äº‹ä»¶ä¾†åˆ¤æ–· value æ˜¯å¦è®Šå‹•ï¼Œä½†å¦‚æœæ˜¯é€éè¤‡è£½è²¼ä¸Šä¹‹é¡çš„æ“ä½œï¼Œå°±ç„¡æ³•é€ééµç›¤äº‹ä»¶ä¾†åˆ¤æ–·ã€‚</p>
<p>è€Œå³ä½¿æ˜¯ <code>change</code> äº‹ä»¶å‰‡æ˜¯è¦åœ¨ä½¿ç”¨è€…æ”¹è®Šå…§å®¹ï¼Œä¸”<span style="color: red;">ç„¦é»é›¢é–‹è¼¸å…¥æ¡†çš„å‰ä¸€åˆ»æ‰æœƒè¢«è§¸ç™¼</span>ã€‚
æ‰€ä»¥å¾Œä¾†æœ‰äº† <code>input</code> äº‹ä»¶ï¼Œ input äº‹ä»¶æœƒåœ¨<span style="color: red;">è¼¸å…¥æ¡†çš„å…§å®¹è¢«æ”¹è®Šæ™‚å³æ™‚è§¸ç™¼</span>ï¼Œç¢ºå¯¦ä¹Ÿè§£æ±ºäº†éå»åœ¨ onChange ä»¥åŠéµç›¤ç›¸é—œäº‹ä»¶å¸¶ä¾†çš„ä¸å°‘å•é¡Œã€‚</p>
<p>æ–°çš„å•é¡Œä¾†äº†ï¼</p>
<p>é€šå¸¸åƒé€™æ¨£çš„æœå°‹æ¡†ï¼Œæˆ‘å€‘æœƒç”¨é¡ä¼¼ autocomplete çš„æ–¹å¼çµ¦ä½¿ç”¨è€…æœå°‹å»ºè­° (ä»¥ google ç‚ºä¾‹)ï¼š
<img src="/static/img/google-autocompleted.png"></p>
<p>å¦‚ä¸Šåœ–ï¼Œåœ¨è¼¸å…¥ä¸­æ–‡çš„æ™‚å€™ï¼Œé€šå¸¸æœƒéœ€è¦é€éæ³¨éŸ³ä¹‹é¡çš„è¼¸å…¥æ³•ä¾†åšæ‹¼å­—ï¼Œä½†æ˜¯åœ¨å¤§éƒ¨åˆ†çš„æƒ…æ³ä¸‹ï¼Œè‡ªå‹•çµ¦ã€Œæ³¨éŸ³ç¬¦è™Ÿã€æˆ–æ˜¯ã€Œæ‹¼éŸ³æ–‡å­—ã€æœå°‹å»ºè­°æ˜¯æ²’æœ‰å¤ªå¤§æ„ç¾©çš„ã€‚</p>
<p>å›åˆ°ä¸»é¡Œã€‚é€™å€‹æ™‚å€™å°±éœ€è¦é€é <strong>Composition Events</strong> ä¾†ç‚ºè¼¸å…¥æ¡†åšå¢å¼·ã€‚
é€é Composition Events æˆ‘å€‘å¯ä»¥è§€å¯Ÿä½¿ç”¨è€…åœ¨è¼¸å…¥æ¡†å…§é–‹å•Ÿè¼¸å…¥æ³• (Input Method Editor, IME) æ™‚ï¼Œçµ„å­—æˆ–é¸å­—çš„ç‹€æ…‹ã€‚</p>
<p>Composition Events æä¾›ä¸‰å€‹äº‹ä»¶çµ¦é–‹ç™¼è€…ç›£è½ï¼šåˆ†åˆ¥æ˜¯ <code>compositionstart</code> ã€ <code>compositionend</code> ï¼Œä»¥åŠ <code>compositionupdate</code>ã€‚</p>
<ul>
<li><code>compositionstart</code>: è¼¸å…¥æ¡†å…§é–‹å•Ÿè¼¸å…¥æ³•ï¼Œä¸”æ­£åœ¨æ‹¼å­—æ™‚è§¸ç™¼ã€‚</li>
<li><code>compositionupdate</code>:è¼¸å…¥æ¡†å…§é–‹å•Ÿè¼¸å…¥æ³•ï¼Œä¸”æ­£åœ¨æ‹¼å­—æˆ–é¸å­—æ™‚æ›´æ”¹äº†å…§å®¹æ™‚è§¸ç™¼ã€‚</li>
<li><code>compositionend</code>: è¼¸å…¥æ¡†å…§é–‹å•Ÿè¼¸å…¥æ³•ï¼Œæ‹¼å­—æˆ–é¸å­—å®Œæˆï¼Œæ­£è¦é€å‡ºè‡³è¼¸å…¥æ¡†æ™‚è§¸ç™¼ã€‚</li>
</ul>
<p></p><p></p>
åŸ·è¡Œçš„æ™‚å€™åƒé€™æ¨£ï¼š
<img src="/static/img/composition-demo.png"><p></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœè¦ç¢ºèªä½¿ç”¨è€…è¼¸å…¥å®Œæˆä¸¦é€å‡ºæ–‡å­—æ™‚ï¼Œå¯ä»¥é€é <code>compositionend</code> ä¾†åšæœ€å¾Œç¢ºèªã€‚<br>
é™„ä¸Š JSBin Demo: <a href="http://jsbin.com/mofepimiqo/1/edit?js,console,output" target="_blank" rel="external">http://jsbin.com/mofepimiqo/1/edit?js,console,output</a></p>
<p>æœ€å¾Œå‰‡æ˜¯å¤§å®¶éƒ½å¾ˆé—œå¿ƒçš„ç€è¦½å™¨æ”¯æ´åº¦ã€‚ä»¥ç›®å‰ä¾†èªªï¼Œmobile å¹³å°ä¸Šå¯èƒ½é‚„ä¸å¤ª okï¼Œä½†æ˜¯ Desktop å¹³å°ä¸Šè¡¨ç¾çœ‹èµ·ä¾†ç›¸ç•¶ä¸éŒ¯ï¼Œå¯ä»¥å¤§è†½åœ°ä½¿ç”¨å›‰ã€‚
<img src="/static/img/compositionEvent-compatibility.png"></p>
<p></p><p class="no-space" style="margin-bottom:0">åƒè€ƒè³‡æ–™ï¼š</p><p></p>
<ul>
<li><a href="http://blog.zhusee.in/post/146553/enhance-ime-support-of-codemirror-with-composition-events" target="_blank" rel="external">ç”¨ Composition Event æ”¹é€² CodeMirror å°è¼¸å…¥æ³•çš„æ”¯æ´</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/CompositionEvent" title="Composition Events" target="_blank" rel="external">MDN: Composition Events</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘åœ¨çˆ¬ Vue çš„åŸå§‹ç¢¼çš„æ™‚å€™ï¼Œæ„å¤–ç™¼ç¾å…©å€‹æ²’çœ‹éçš„ eventï¼š&lt;code&gt;compositionstart&lt;/code&gt; èˆ‡ &lt;code&gt;compositionend&lt;/code&gt;ã€‚ æŸ¥äº†ä¸€ä¸‹ MDN æ‰ç™¼ç¾é€™äº›å«åšã€Œ&lt;a href=&quot;https://develope
    
    </summary>
    
      <category term="HTML" scheme="https://kuro.tw/categories/HTML/"/>
    
    
      <category term="javascript" scheme="https://kuro.tw/tags/javascript/"/>
    
      <category term="html" scheme="https://kuro.tw/tags/html/"/>
    
      <category term="events" scheme="https://kuro.tw/tags/events/"/>
    
  </entry>
  
  <entry>
    <title>VueJS å„ç¨®è³‡æ–™ç¶å®š (data binding) çš„æ–¹å¼</title>
    <link href="https://kuro.tw/posts/2016/10/05/VueJS-%E5%90%84%E7%A8%AE%E8%B3%87%E6%96%99%E7%B6%81%E5%AE%9A-data-binding-%E7%9A%84%E6%96%B9%E5%BC%8F/"/>
    <id>https://kuro.tw/posts/2016/10/05/VueJS-å„ç¨®è³‡æ–™ç¶å®š-data-binding-çš„æ–¹å¼/</id>
    <published>2016-10-05T01:04:34.000Z</published>
    <updated>2017-07-12T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¤§éƒ¨åˆ†è³‡æ–™æ˜¯å¾é€™è£¡ä¾†çš„: <a href="https://github.com/vuejs/vue/wiki/1.0.0-binding-syntax-cheatsheet" target="_blank" rel="external">Vue 1.0.0 binding syntax cheatsheet</a>ï¼Œå†åŠ ä¸Šå° Vue 2.0 è£œå……çš„éƒ¨åˆ†ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- normal directive --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"ok"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- directive with argument --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">"onClick"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- v-on with argument + key modifier --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-on:keyup.enter</span>=<span class="string">"handleEnter"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- literal modifier: pass literal string to directive for Vue 1.x, --&gt;</span></div><div class="line"><span class="comment">&lt;!-- but deprecated in 2.0 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-link.literal</span>=<span class="string">"/a/b/c"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- binding an attribute with v-bind --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">v-bind:src</span>=<span class="string">"imgSrc"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">"baseURL + '/path'"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- shorthand: colon for v-bind --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">"imgSrc"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">"baseURL + '/path'"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- shorthand: @ for v-on --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"onClick"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- key modifier --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> @<span class="attr">keyup.enter</span>=<span class="string">"handleEnter"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- stop/prevent modifier --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.stop</span>=<span class="string">"onClick"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">form</span> @<span class="attr">submit.prevent</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- props for Vue 1.x --&gt;</span></div><div class="line"><span class="comment">&lt;!-- .once and .sync are deprecated in 2.0 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">my-comp</span></span></div><div class="line">  <span class="attr">prop</span>=<span class="string">"literal string"</span></div><div class="line">  <span class="attr">v-bind:prop</span>=<span class="string">"defaultOneWay"</span></div><div class="line">  <span class="attr">v-bind:prop.sync</span>=<span class="string">"twoWay"</span></div><div class="line">  <span class="attr">v-bind:prop.once</span>=<span class="string">"oneTime"</span>&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">my-comp</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- props with one time binding for Vue 2.0 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">my-comp</span></span></div><div class="line">  <span class="attr">prop</span>=<span class="string">"literal string"</span></div><div class="line">  <span class="attr">v-bind:prop</span>=<span class="string">"defaultOneWay"</span></div><div class="line">  <span class="attr">v-once</span>&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">my-comp</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- component with props and custom events, in shorthand --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">item-list</span></span></div><div class="line">  <span class="attr">:items</span>=<span class="string">"items"</span></div><div class="line">  <span class="attr">:open.sync</span>=<span class="string">"isListOpen"</span></div><div class="line">  @<span class="attr">ready</span>=<span class="string">"onItemsReady"</span></div><div class="line">  @<span class="attr">update</span>=<span class="string">"onItemsUpdate"</span>&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">item-list</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- v-el and v-ref now just use the argument --&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- registers vm.$refs.child for Vue 1.x --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">comp</span> <span class="attr">v-ref:child</span>&gt;</span><span class="tag">&lt;/<span class="name">comp</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- registers vm.$refs.child for Vue 2.0 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">comp</span> <span class="attr">ref:child</span>&gt;</span><span class="tag">&lt;/<span class="name">comp</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- registers vm.$els.node for Vue 1.x, but deprecated in 2.0 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-el:node</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¤§éƒ¨åˆ†è³‡æ–™æ˜¯å¾é€™è£¡ä¾†çš„: &lt;a href=&quot;https://github.com/vuejs/vue/wiki/1.0.0-binding-syntax-cheatsheet&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Vue 1.0.0 binding
    
    </summary>
    
      <category term="vue.js" scheme="https://kuro.tw/categories/vue-js/"/>
    
    
      <category term="vue.js" scheme="https://kuro.tw/tags/vue-js/"/>
    
  </entry>
  
  <entry>
    <title>[VueJS] V1 èˆ‡ V2 å…ƒä»¶å¯¦é«”ä¹‹å·®ç•°</title>
    <link href="https://kuro.tw/posts/2016/10/03/VueJS-V1-%E8%88%87-V2-%E5%85%83%E4%BB%B6%E5%AF%A6%E9%AB%94%E4%B9%8B%E5%B7%AE%E7%95%B0/"/>
    <id>https://kuro.tw/posts/2016/10/03/VueJS-V1-èˆ‡-V2-å…ƒä»¶å¯¦é«”ä¹‹å·®ç•°/</id>
    <published>2016-10-03T10:20:01.000Z</published>
    <updated>2017-07-12T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç‹‚è³€ï¼ <a href="https://github.com/vuejs/vue/releases/tag/v2.0.0" title="Vue 2.0" target="_blank" rel="external">Vue 2.0</a> çµ‚æ–¼æ­£å¼ç™¼ä½ˆï¼</p>
<p>é—œæ–¼ Vue 2.0 çš„æ–°ç‰¹æ€§ï¼Œä½œè€…ä¹Ÿåœ¨å®˜æ–¹ Blog - <a href="https://medium.com/the-vue-point/vue-2-0-is-here-ef1f26acf4b8#.n0m3yjfmp" title="Vue 2.0 is Here!" target="_blank" rel="external">Vue 2.0 is Here!</a> (<a href="http://jiongks.name/blog/vue-2-is-here/" title="Vue 2.0 æ¥äº†ï¼" target="_blank" rel="external">ä¸­æ–‡ç¿»è­¯</a>) ä¸€æ–‡ä¸­æ•˜è¿°åœ°ç›¸ç•¶è©³ç´°ï¼Œé€™è£¡å°±ä¸å¤šèªªã€‚</p>
<p>å¦‚æœä½ ä¹Ÿèˆ‡æˆ‘ä¸€æ¨£æ˜¯å¾ V1 å°±é–‹å§‹æ¥è§¸çš„é–‹ç™¼è€…ï¼Œä¸€å®šéƒ½çŸ¥é“ VueJS æœ€æ ¸å¿ƒçš„ä¸€éƒ¨åˆ†æ˜¯ Componentï¼Œè€Œ Component æ˜¯ç”±å¯¦é«” (Vue Instance) ä¾†å¯¦ä½œã€‚
åœ¨é€™ç¯‡æ–‡ç« ï¼Œæˆ‘å€‘å°±ä¾†è«‡è«‡ Vue 1.x èˆ‡ 2.x å…ƒä»¶å¯¦é«”çš„å·®ç•°ã€‚</p>
<hr>

<h3 id="Vue-2-0-å…ƒä»¶å¯¦é«”è¨»å†Š"><a href="#Vue-2-0-å…ƒä»¶å¯¦é«”è¨»å†Š" class="headerlink" title="Vue 2.0 å…ƒä»¶å¯¦é«”è¨»å†Š"></a>Vue 2.0 å…ƒä»¶å¯¦é«”è¨»å†Š</h3><p><img alt="tree of components" src="/static/img/Vue-instance.png"></p>
<p>åƒä¸Šé¢é€™æ¨£çš„ç¶²ç«™ï¼Œæˆ‘å€‘å¯ä»¥å°‡å®ƒæŠ½è±¡åŒ–ç‚ºä¸€æ£µã€Œå…ƒä»¶æ¨¹ã€ï¼Œè€Œæ¯å€‹å…ƒä»¶æ¨¹éƒ½æœƒæœ‰å€‹æ ¹ç¯€é»ï¼Œæˆ–ç¨±ç‚ºæ ¹å¯¦é«” (root Vue instance)ã€‚</p>
<p>é‚£éº¼ï¼Œæ¯å€‹ Vue å…ƒä»¶æ¨¹çš„æ ¹å¯¦é«”å…¶å¯¦æ˜¯é€é <code>Vue</code> é€™å€‹å»ºæ§‹å‡½å¼æ‰€ç”¢ç”Ÿï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="comment">// options</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>å°‡ Vue å…ƒä»¶èˆ‡å¯¦é«” DOM çµåˆçš„æ–¹å¼æœ‰å…©ç¨®ï¼Œä¸€ç¨®æ˜¯ç›´æ¥å¯«åœ¨ <code>el</code> option å…§ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="attr">el</span>: <span class="string">'#app'</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>è€Œå¦ä¸€ç¨®æ–¹å¼å‰‡æ˜¯é€é <code>$mount</code> ä¾†æŒ‡å®šç¯€é»ï¼š
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="comment">// options without 'el'</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line">vm.$mount(<span class="string">'#app'</span>);</div></pre></td></tr></table></figure></p>
<p>é€™éƒ¨åˆ†è·Ÿ Vue 1.x çš„è¨»å†Šæ˜¯å®Œå…¨ä¸€æ¨£çš„ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ vue 1.x å…è¨±é–‹ç™¼è€…ä»¥ <code>&lt;body&gt;</code> æˆ– <code>&lt;html&gt;</code> ä½œç‚ºæ ¹å¯¦é«”çš„æ›è¼‰é»ï¼Œ
ä½†<span style="color: #f00">åˆ°äº† VueJS 2.0 å¾Œï¼Œåªèƒ½é€é <strong>ç¨ç«‹çš„ç¯€é»æ›è¼‰</strong> </span>ï¼Œå¦‚: div ç­‰ã€‚ å¦å‰‡æœƒç”¢ç”ŸéŒ¯èª¤ï¼Œè­¦å‘Šè¨Šæ¯å¦‚ä¸‹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">â€œ<span class="keyword">Do</span> <span class="keyword">not</span> <span class="keyword">mount</span> Vue <span class="keyword">to</span> &lt;html&gt; <span class="keyword">or</span> &lt;<span class="keyword">body</span>&gt; - <span class="keyword">mount</span> <span class="keyword">to</span> <span class="keyword">normal</span> elements instead.â€œ</div></pre></td></tr></table></figure>
<p>æ›æˆç”¨ç¨ç«‹çš„ DOM ç¯€é»ï¼Œå¦‚ <code>&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</code>ï¼Œå°±å¯ä»¥æ­£å¸¸é‹ä½œäº†ã€‚</p>
<hr>

<h3 id="Vue-2-0-å…ƒä»¶å¯¦é«”çš„ç”Ÿå‘½é€±æœŸ"><a href="#Vue-2-0-å…ƒä»¶å¯¦é«”çš„ç”Ÿå‘½é€±æœŸ" class="headerlink" title="Vue 2.0 å…ƒä»¶å¯¦é«”çš„ç”Ÿå‘½é€±æœŸ"></a>Vue 2.0 å…ƒä»¶å¯¦é«”çš„ç”Ÿå‘½é€±æœŸ</h3><p><img alt="Vue 2.0 Lifecycle Diagram" title="Vue 2.0 Lifecycle Diagram" src="/static/img/vue2-lifecycle.png" height="400">
<span style="font-size: 12px;">åœ–ç‰‡ä¾†æºï¼š <a href="http://vuejs.org/guide/instance.html#Instance-Lifecycle-Hooks" target="_blank" rel="external">Vue 2.0 Guide: Instance Lifecycle Hooks</a></span></p>
<p>åŸºæœ¬ä¸Š Vue 2.0 å¯¦é«”ç”Ÿå‘½é€±æœŸä¸­ï¼Œå¤§éƒ¨åˆ†çš„éšæ®µéƒ½èˆ‡ Vue 1.x æ˜¯ä¸€æ¨£çš„ï¼Œæœ€å¤§çš„ä¸åŒåœ¨æ–¼ lifecycle hook åç¨±çš„æ”¹è®Šï¼Œä»¥åŠåœ¨å…ƒä»¶è¢«æ›è¼‰ <code>mounted</code> ä¹‹å¾Œï¼Œé‚„æ–°å¢äº† <code>beforeUpdate</code> ä»¥åŠ <code>updated</code> é€™å…©çµ„åµæ¸¬æ›´æ–°çš„ hookã€‚</p>
<p>vue 1.x çš„ <code>init</code> è®Šæˆ <code>beforeCreate</code> ï¼Œ <code>beforeCompiled</code> æ”¹ç‚º <code>beforeMount</code>ã€‚ è€ŒåŸæœ¬çš„ <code>complied</code> èˆ‡ <code>ready</code> å‰‡æ˜¯çµ±ä¸€æ”¶æ–‚æˆ <code>mounted</code>ã€‚</p>
<p>å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<span style="color: #f00"><strong>è‹¥å…ƒä»¶æœ¬èº«æ˜¯é€é server-side rendering çš„è©±ï¼Œé™¤äº† <code>beforeCreate</code> ä»¥åŠ <code>created</code> ä»¥å¤–çš„æ‰€æœ‰ hook éƒ½ä¸æœƒè¢«å‘¼å«</strong></span>  <a href="https://vuejs.org/api/#Options-Lifecycle-Hooks" target="_blank" rel="external">(åƒè€ƒè³‡æ–™)</a>ã€‚</p>
<p>æœ‰é—œå…ƒä»¶ V-DOM çš„é‡æ–°æ¸²æŸ“èˆ‡æ›´æ–°å¾Œé¢å†æï¼Œå…¶ä»–éƒ¨åˆ†å‰‡èˆ‡ Vue 1.x å¤§åŒå°ç•°ã€‚</p>
<p><hr></p>
<h3 id="Vue-2-0-å…ƒä»¶èˆ‡æ¨¡æ¿çš„ç·¨è­¯-Render-Function"><a href="#Vue-2-0-å…ƒä»¶èˆ‡æ¨¡æ¿çš„ç·¨è­¯-Render-Function" class="headerlink" title="Vue 2.0 å…ƒä»¶èˆ‡æ¨¡æ¿çš„ç·¨è­¯ - Render Function"></a>Vue 2.0 å…ƒä»¶èˆ‡æ¨¡æ¿çš„ç·¨è­¯ - Render Function</h3><p>åœ¨å¤§éƒ¨åˆ†æƒ…æ³ä¸‹ï¼Œé€éå…ƒä»¶çš„ <code>template</code> å±¬æ€§ï¼Œæˆ–æ˜¯ç›´æ¥å¯«åœ¨ HTML ä¸­å°±å·²ç¶“è¶³å¤ æ“ä½œä½ çš„å…ƒä»¶äº†ã€‚
ä¸éè‹¥æ˜¯ä½ æƒ³å®Œå…¨é€é JavaScript ä¾†æ“ä½œä½ çš„å…ƒä»¶ï¼Œé‚£éº¼å¯ä»¥ä½¿ç”¨ render é€™å€‹ function ç›´æ¥ä¾†å¯«åº•å±¤çš„ virtual-DOM ä¾†å–ä»£ <code>template</code> å±¬æ€§ã€‚
VueJS 2.0 çš„ virtual DOM æ©Ÿåˆ¶ï¼Œæ˜¯æ¡ç”¨ <a href="https://github.com/snabbdom/snabbdom" title="snabbdom" target="_blank" rel="external">snabbdom</a> é€™å€‹ virtual DOM çš„ library ä¾†å¯¦ä½œçš„ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ <code>createElement</code> é€™å€‹ function ä¾†å»ºç«‹ä½ çš„å…ƒä»¶å…§å®¹ï¼š
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// @returns &#123;VNode&#125;</span></div><div class="line">createElement(</div><div class="line">  <span class="comment">// &#123;String | Object | Function&#125;</span></div><div class="line">  <span class="comment">// An HTML tag name, component options, or function</span></div><div class="line">  <span class="comment">// returning one of these. Required.</span></div><div class="line">  <span class="string">'div'</span>,</div><div class="line">  <span class="comment">// &#123;Object&#125;</span></div><div class="line">  <span class="comment">// A data object corresponding to the attributes</span></div><div class="line">  <span class="comment">// you would use in a template. Optional.</span></div><div class="line">  &#123;</div><div class="line">    <span class="comment">// (see details in the next section below)</span></div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// &#123;String | Array&#125;</span></div><div class="line">  <span class="comment">// Children VNodes. Optional.</span></div><div class="line">  [</div><div class="line">    createElement(<span class="string">'h1'</span>, <span class="string">'hello world'</span>)</div><div class="line">    createElement(MyComponent, &#123;</div><div class="line">      <span class="attr">props</span>: &#123;</div><div class="line">        <span class="attr">someProp</span>: <span class="string">'foo'</span></div><div class="line">      &#125;</div><div class="line">    &#125;),</div><div class="line">    <span class="string">'bar'</span></div><div class="line">  ]</div><div class="line">)</div></pre></td></tr></table></figure></p>
<p>å®˜æ–¹ä¹Ÿæä¾›äº†ä¸€å€‹å®Œæ•´çš„ render function ç¯„ä¾‹ï¼š
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> getChildrenTextContent = <span class="function"><span class="keyword">function</span> (<span class="params">children</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> children.map(<span class="function"><span class="keyword">function</span> (<span class="params">node</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> node.children</div><div class="line">      ? getChildrenTextContent(node.children)</div><div class="line">      : node.text</div><div class="line">  &#125;).join(<span class="string">''</span>)</div><div class="line">&#125;</div><div class="line">Vue.component(<span class="string">'anchored-heading'</span>, &#123;</div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span> (<span class="params">createElement</span>) </span>&#123;</div><div class="line">    <span class="comment">// create kebabCase id</span></div><div class="line">    <span class="keyword">var</span> headingId = getChildrenTextContent(<span class="keyword">this</span>.$slots.default)</div><div class="line">      .toLowerCase()</div><div class="line">      .replace(<span class="regexp">/\W+/g</span>, <span class="string">'-'</span>)</div><div class="line">      .replace(<span class="regexp">/(^\-|\-$)/g</span>, <span class="string">''</span>)</div><div class="line"></div><div class="line">    <span class="keyword">return</span> createElement(</div><div class="line">      <span class="string">'h'</span> + <span class="keyword">this</span>.level,</div><div class="line">      [</div><div class="line">        createElement(<span class="string">'a'</span>, &#123;</div><div class="line">          <span class="attr">attrs</span>: &#123;</div><div class="line">            <span class="attr">name</span>: headingId,</div><div class="line">            <span class="attr">href</span>: <span class="string">'#'</span> + headingId</div><div class="line">          &#125;</div><div class="line">        &#125;, <span class="keyword">this</span>.$slots.default)</div><div class="line">      ]</div><div class="line">    )</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">props</span>: &#123;</div><div class="line">    <span class="attr">level</span>: &#123;</div><div class="line">      <span class="attr">type</span>: <span class="built_in">Number</span>,</div><div class="line">      <span class="attr">required</span>: <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>ç•¶ç„¶ï¼Œä½ å¯èƒ½è·Ÿæˆ‘ä¸€æ¨£è¦ºå¾—ä¸€å±¤åˆä¸€å±¤çš„ <code>createElement</code> çœ‹äº†ç¸½æ˜¯è®“äººå­ç…©ï¼Œä½ ä¹Ÿå¯ä»¥é€éé€™å€‹ Plugin: <a href="https://github.com/vuejs/babel-plugin-transform-vue-jsx" target="_blank" rel="external">babel-plugin-transform-vue-jsx</a>ï¼Œä¾†åš JSX èªæ³•çš„è½‰æ›ï¼Œå¦‚æœä½ æ›¾æ˜¯ react æ‡‰ç”¨ç¨‹å¼çš„é–‹ç™¼è€…ï¼Œæ‡‰è©²å° JSX èªæ³•ä¸é™Œç”Ÿã€‚ å¯«èµ·ä¾†æœƒåƒé€™æ¨£ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> AnchoredHeading <span class="keyword">from</span> <span class="string">'./AnchoredHeading.vue'</span></div><div class="line"></div><div class="line"><span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="attr">el</span>: <span class="string">'#demo'</span>,</div><div class="line">  render (h) &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">AnchoredHeading</span> <span class="attr">level</span>=<span class="string">&#123;1&#125;</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">span</span>&gt;</span> world!</div><div class="line">      <span class="tag">&lt;/<span class="name">AnchoredHeading</span>&gt;</span></div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>åœ¨é è¨­æƒ…æ³ä¸­ï¼ŒVueJS 2.0 æœƒå°‡ <code>template</code> å…§çš„ HTML é€é parse è½‰æ›æˆ ASTï¼Œå†è‡ªå‹•è½‰æ›å„ªåŒ–æˆ render function å»å»ºç«‹ virtual DOMã€‚ åœ¨å»ºç«‹ virtual DOM ä¹‹å¾Œï¼Œé€é observe æ©Ÿåˆ¶èˆ‡è³‡æ–™é€²è¡Œç¶å®šï¼Œå† compile æˆå¯¦é«”çš„ DOM ä¸¦æ¸²æŸ“è‡³ç¶²é ä¸Šï¼š</p>
<p><img src="/static/img/vue2-rendering-flow.png">
<span style="font-size: 12px;">åƒè€ƒè³‡æ–™èˆ‡åœ–ç‰‡ä¾†æºï¼š <a href="https://speakerdeck.com/kazupon/next-vue-dot-js-2-dot-0" target="_blank" rel="external">Next Vue.js 2.0 by kazupon</a></span></p>
<p>å‰é¢èªªéï¼ŒVueJS 2.0 æœƒå°‡ <code>template</code> å…§çš„ HTML è‡ªå‹•ç·¨è­¯æˆ render functionï¼Œä¸‹é¢é€™æ˜¯å®˜æ–¹æ–‡ä»¶ä»¥ <code>Vue.compile</code> æä¾›çš„ demoï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- template --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>I'm a template!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">"message"</span>&gt;</span></div><div class="line">    &#123;&#123; message &#125;&#125;</div><div class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else</span>&gt;</span></div><div class="line">    No message.</div><div class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// render:</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">anonymous</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">with</span>(<span class="keyword">this</span>)&#123;<span class="keyword">return</span> _h(<span class="string">'div'</span>,[_m(<span class="number">0</span>),(message)?_h(<span class="string">'p'</span>,[_s(message)]):_h(<span class="string">'p'</span>,[<span class="string">"No message."</span>])])&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// staticRenderFns:</span></div><div class="line">_m(<span class="number">0</span>): <span class="function"><span class="keyword">function</span> <span class="title">anonymous</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">with</span>(<span class="keyword">this</span>)&#123;<span class="keyword">return</span> _h(<span class="string">'h1'</span>,[<span class="string">"I'm a template!"</span>])&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><hr></p>
<h3 id="Vue-2-0-å…ƒä»¶çš„è¿½è¹¤è®ŠåŒ–"><a href="#Vue-2-0-å…ƒä»¶çš„è¿½è¹¤è®ŠåŒ–" class="headerlink" title="Vue 2.0 å…ƒä»¶çš„è¿½è¹¤è®ŠåŒ–"></a>Vue 2.0 å…ƒä»¶çš„è¿½è¹¤è®ŠåŒ–</h3><p>æœ€å¾Œï¼Œæˆ‘å€‘ä¾†çœ‹çœ‹å…ƒä»¶å…§ç‹€æ…‹çš„è¿½è¹¤è®ŠåŒ–ã€‚æœ‰å¯«é VueJS 1.x çš„æœ‹å‹æ‡‰è©²çŸ¥é“ï¼Œå…ƒä»¶å¯¦é«”å…§æœ‰å€‹ option å« <code>data</code>ï¼Œ
é€™å€‹ <code>data</code> ç‰©ä»¶å°±æ˜¯ç”¨ä¾†å­˜æ”¾å…ƒä»¶å…§ç‹€æ…‹/è³‡æ–™çš„åœ°æ–¹ã€‚</p>
<p>èˆ‡ Vue 1.x ç›¸åŒçš„åœ°æ–¹æ˜¯ï¼Œ<code>data</code> ç‰©ä»¶é€é <code>Object.defineProperty()</code> ä¾†ç‚ºå…ƒä»¶å…§å„å±¬æ€§è¨­å®š ã€Œgetterã€èˆ‡ã€Œsetterã€ã€‚
å°±åœ¨ data å±¬æ€§è¢«å­˜å–ä¿®æ”¹æ™‚ï¼Œæœƒé€é getter/setter ä¾†é€šçŸ¥ç‰©ä»¶å…§å±¬æ€§çš„è®ŠåŒ–ï¼Œç•¶å…ˆå‰è¨­å®šå¥½çš„ setter è¢«å‘¼å«çš„æ™‚å€™ï¼Œæœƒå»è§¸ç™¼ watcher é‡æ–°è¨ˆç®—ï¼Œä¹Ÿå°±æœƒå°è‡´ DOM çš„æ›´æ–°èˆ‡é‡æ–°æ¸²æŸ“ã€‚</p>
<p>èˆ‡ Vue 1.x ä¸åŒçš„æ˜¯ï¼ŒVue 1.x æ˜¯é€é directive ä¾†é‡æ–°æ¸²æŸ“ DOM å…§å®¹ï¼š</p>
<p><img src="/static/img/vue1-watcher.png"></p>
<p>è€Œ Vue 2.0 åœ¨é€šçŸ¥ watcher æ›´æ–°æ™‚ï¼Œæœƒå»å‘¼å«å‰é¢ä»‹ç´¹çš„ ã€Œrender functionã€èˆ‡æ›´æ–°å¾Œçš„ data å»åšæ›´æ–°å¾Œå†æ¬¡æ¸²æŸ“ï¼Œæ¦‚å¿µèˆ‡ 1.x å¤§è‡´ç›¸åŒã€‚
ä½†æ›´æ–° DOM çš„æ‰‹æ³•ä¸åŒï¼Œæ¸›å°‘äº†ä¸å¿…è¦çš„æ¯”å°ï¼Œä¹Ÿå› æ­¤å¤§å¹…åº¦æå‡äº†æ•ˆèƒ½ã€‚</p>
<p><img src="/static/img/vue2-watcher.png"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç‹‚è³€ï¼ &lt;a href=&quot;https://github.com/vuejs/vue/releases/tag/v2.0.0&quot; title=&quot;Vue 2.0&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Vue 2.0&lt;/a&gt; çµ‚æ–¼æ­£å¼ç™¼ä½ˆï¼&lt;/p&gt;
&lt;p&gt;
    
    </summary>
    
      <category term="vue.js" scheme="https://kuro.tw/categories/vue-js/"/>
    
    
      <category term="vue.js" scheme="https://kuro.tw/tags/vue-js/"/>
    
  </entry>
  
  <entry>
    <title>VueJS 2.0 å‡ç´šå°å¹«æ‰‹: Vue migration helper</title>
    <link href="https://kuro.tw/posts/2016/09/30/Vue-2-0-%E5%8D%87%E7%B4%9A%E5%B0%8F%E5%B9%AB%E6%89%8B-Vue-migration-helper/"/>
    <id>https://kuro.tw/posts/2016/09/30/Vue-2-0-å‡ç´šå°å¹«æ‰‹-Vue-migration-helper/</id>
    <published>2016-09-30T14:38:01.000Z</published>
    <updated>2017-07-12T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>Vue JS è‡ªä»Šå¹´å››æœˆ (2016/04) ç™¼ä½ˆ Vue 2.0 preview ç‰ˆæœ¬è‡³ä»Šä¹Ÿæœ‰äº”å€‹æœˆäº†ï¼Œåœ¨æ–°èˆŠç‰ˆæœ¬çš„äº¤æ›¿ä¹‹ä¸­ï¼Œé–‹ç™¼è€…æœ€é—œå¿ƒçš„ä¸€å®šæ˜¯ã€Œ<strong>æˆ‘çš„å°ˆæ¡ˆèƒ½ä¸èƒ½å‡åˆ° Vue 2.0</strong>ã€ã€ã€Œ<strong>å‡ä¸Šå»æœƒä¸æœƒçˆ†</strong>ã€ã€ã€Œ<strong>å°ˆæ¡ˆè©²ç”¨é‚£å€‹ç‰ˆæœ¬ä¾†é–‹ç™¼</strong>ã€ï¼Œ<del>ã€Œè½èªªéš”å£é‚£å€‹ ng å‡ç´šå¹¾ä¹ç­‰æ–¼ç æ‰é‡ç·´ã€</del> ä¹‹é¡çš„å•é¡Œã€‚</p>
<p>ä¸éå¹¸å¥½ï¼ŒVue 1.0 èˆ‡ Vue 2.0 æœ‰ 90% çš„ API æ˜¯ç›¸åŒçš„ï¼Œéå»åœ¨ Vue 1.x çš„æ ¸å¿ƒæ¦‚å¿µåˆ° Vue 2.0 ä¸€æ¨£å¯ä»¥æ²¿ç”¨ï¼Œè€Œä¸”åˆå¤šäº†äº›æ–°ç‰¹æ€§ã€‚</p>
<p>é€™è£¡æœ‰ä¸€ä»½å®˜æ–¹çš„<a href="http://rc.vuejs.org/guide/migration.html" title="Migration from Vue 1.x" target="_blank" rel="external">å‡ç´šå»ºè­°</a>ï¼Œæœ‰é»é•·ï¼Œå¦‚æœæ²’æœ‰è€å¿ƒè®€çš„è©±ï¼Œæ²’é—œä¿‚ï¼Œé€™è£¡ä»‹ç´¹ä½ å¥½ç‰©: <br> <strong><span style="color: #f00;">Vue migration helper</span></strong>ã€‚</p>
<p>å‚³èªªä¸­çš„å‡ç´šå°å¹«æ‰‹ Vue migration helper: <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">https://github.com/vuejs/vue-migration-helper</a></p>
<p>ä½¿ç”¨æ–¹å¼å¾ˆç°¡å–®ï¼Œæ‰“é–‹ terminal é€é npm å®‰è£å¾Œï¼Œåœ¨ä½ çš„å°ˆæ¡ˆç›®éŒ„ä¸‹åŸ·è¡Œ vue-migration-helperï¼Œå°å¹«æ‰‹å°±æœƒå¹«ä½ æƒææ•´ä»½å°ˆæ¡ˆï¼Œç„¶å¾Œçµ¦ä½ ä¿®æ”¹çš„å»ºè­°äº†ã€‚</p>
<p>å®Œæ•´çš„å®‰è£èˆ‡ä½¿ç”¨æ–¹å¼ï¼š
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> install</span></div><div class="line"><span class="meta">$</span><span class="bash"> npm install --global git://github.com/vuejs/vue-migration-helper.git</span></div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> navigate to a Vue 1.x project directory</span></div><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> path/to/my-vue-project</span></div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> scan all files <span class="keyword">in</span> the current directory</span></div><div class="line"><span class="meta">$</span><span class="bash"> vue-migration-helper</span></div></pre></td></tr></table></figure></p>
<p>æ‹¿ä¹‹å‰çš„æŸä»½ç¯„ä¾‹è©¦è©¦ï¼Œå°±åƒé€™æ¨£ï¼š</p>
<p><del>èŠ±æƒ¹ç™¼</del>ï¼Œæ»¿å‘æ»¿è°·çš„å‡ç´šå»ºè­°
<img src="/static/img/vue-migration-demo.png" alt="migration"></p>
<p>ä¾ç…§ migration helper çµ¦çš„å»ºè­°ä¸€ä¸€ä¿®æ­£å¾Œï¼Œå†æ¬¡åŸ·è¡Œå°ˆæ¡ˆï¼Œæª¢æŸ¥ä¸€ä¸‹ consoleï¼Œæ˜¯å¦æœ‰å™´éŒ¯ï¼Œå¦‚æœæ²’æœ‰éŒ¯èª¤ï¼Œé‚£éº¼å°ˆæ¡ˆçš„å‡ç´šä¹Ÿå°±å·®ä¸å¤šäº†ã€‚</p>
<p>ä¸éè¦æ³¨æ„ï¼Œç›®å‰ Vue migration helper é‚„åœ¨ beta éšæ®µï¼Œå¦‚æœæœªä¾†è¦å†æ›´æ–°è‡³æ–°ç‰ˆçš„è©±ï¼Œç›´æ¥å†æ¬¡åŸ·è¡Œ <code>npm install --global git://github.com/vuejs/vue-migration-helper.git</code> é‡æ–°å®‰è£ä¸€æ¬¡å°±å¥½ã€‚</p>
<p>æœ€å¾Œï¼Œé„‰è¦ªå•Šï¼Œå¦‚æœä½ æ­£è¦é–‹å•Ÿæ–°å°ˆæ¡ˆï¼Œå»ºè­°ç¾åœ¨å°±å¯ä»¥ç›´æ¥å¾ Vue 2.0 é€²å…¥å–”ï¼</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Vue JS è‡ªä»Šå¹´å››æœˆ (2016/04) ç™¼ä½ˆ Vue 2.0 preview ç‰ˆæœ¬è‡³ä»Šä¹Ÿæœ‰äº”å€‹æœˆäº†ï¼Œåœ¨æ–°èˆŠç‰ˆæœ¬çš„äº¤æ›¿ä¹‹ä¸­ï¼Œé–‹ç™¼è€…æœ€é—œå¿ƒçš„ä¸€å®šæ˜¯ã€Œ&lt;strong&gt;æˆ‘çš„å°ˆæ¡ˆèƒ½ä¸èƒ½å‡åˆ° Vue 2.0&lt;/strong&gt;ã€ã€ã€Œ&lt;strong&gt;å‡ä¸Šå»æœƒä¸æœƒçˆ†&lt;/strong&gt;ã€
    
    </summary>
    
      <category term="vue.js" scheme="https://kuro.tw/categories/vue-js/"/>
    
    
      <category term="vue.js" scheme="https://kuro.tw/tags/vue-js/"/>
    
  </entry>
  
  <entry>
    <title>[VueJS] åœ¨ v-for åˆ—è¡¨ä¸­é€é filter å®Œæˆæœå°‹èˆ‡åˆ†é çš„åŠŸèƒ½</title>
    <link href="https://kuro.tw/posts/2016/05/30/vuejs-in-v-for-through-the-filter-in-the-list-complete-search-and-page-functions/"/>
    <id>https://kuro.tw/posts/2016/05/30/vuejs-in-v-for-through-the-filter-in-the-list-complete-search-and-page-functions/</id>
    <published>2016-05-30T06:30:00.000Z</published>
    <updated>2017-07-12T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘ <a href="https://vuejs.org/" target="_blank" rel="external">Vue.js</a> æ­£å¤¯ï¼Œæ‰€ä»¥æ‰‹ä¸Šå¹¾å€‹æ±è¥¿æ‰“ç®—ç”¨é€™å€‹ä¾†æ”¹å¯«ï¼Œé—œæ–¼ Vue.js çš„åŸºæœ¬ä»‹ç´¹å¯ä»¥åƒè€ƒå°å¼Ÿçš„æŠ•å½±ç‰‡ï¼Œé€™è£¡å°±ä¸å†è´…è¿°ã€‚</p>
<iframe src="//www.slideshare.net/slideshow/embed_code/key/DLQDvLrRSNunsY" width="476" height="400" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:10px; max-width: 100%;" allowfullscreen> </iframe>

<p>æœ‰ç”¨é Vue.js é–‹ç™¼çš„æœ‹å‹ä¸€å®šçŸ¥é“å®ƒæä¾›çš„ filter åŠŸèƒ½ååˆ†å¼·å¤§ï¼Œåœ¨ <code>v-for</code> åˆ—è¡¨ä¸­ä½¿ç”¨ <code>filterBy</code> å¯ä»¥åœ¨ä¸€è¡Œå…§å®Œæˆåˆ—è¡¨æœå°‹çš„åŠŸèƒ½ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"filter-by-example"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"n"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- é€é input æ¬„ä½çš„ v-model n èˆ‡ user.name åšæ¨¡ç³Šæ¯”å° --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"user in users | filterBy n in 'name'"</span>&gt;</span></div><div class="line">      &#123;&#123; user.name &#125;&#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>è‹¥æ˜¯è¦é™åˆ¶é¡¯ç¤ºçš„ç­†æ•¸ä¹Ÿèƒ½ç”¨ <code>limitBy</code> åšåˆ°ï¼Œé€²è€Œå®Œæˆåˆ†é çš„åŠŸèƒ½ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- åªé¡¯ç¤ºå‰ 10 å€‹å…ƒç´  --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">"item in items | limitBy 10"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- é¡¯ç¤ºç¬¬ 5 åˆ° 15 ç­†å…ƒç´ --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">"item in items | limitBy 10 5"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>é€™æ¬¡é‡åˆ°çš„å•é¡Œæ˜¯é€™æ¨£çš„ï¼Œå¦‚æœæˆ‘å€‘æƒ³è¦åŒæ™‚å®Œæˆã€Œæœå°‹ã€èˆ‡ã€Œåˆ†é ã€çš„éœ€æ±‚ï¼Œå…‰é  <code>filterBy</code> èˆ‡ <code>limitBy</code> å°±ä¸æ˜¯é‚£éº¼å®¹æ˜“åšåˆ°ï¼Œé‚„å¥½ Vue.js æä¾›äº†<a href="http://vuejs.org/guide/custom-filter.html" target="_blank" rel="external">è‡ªè¨‚ filter</a> çš„åŠŸèƒ½ï¼šå…ˆç”¨ filterBy éæ¿¾ï¼Œå†é€éè‡ªè¨‚ recordLength è¨˜éŒ„éæ¿¾å¾Œçš„è³‡æ–™æ•¸é‡ï¼Œæœ€å¾Œå†ç”¨ limitBy æ­é…é ç±¤åˆ‡æ›é é¢ã€‚
å°å¿ƒ filter çš„é †åºï¼Œfilter æœƒä¾åºåŸ·è¡Œï¼Œç„¶å¾Œå†ç¹¼çºŒä¸‹å€‹ filterã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">" r in rows</span></span></div><div class="line">             | filterBy filter_name in 'name'</div><div class="line">             | recordLength 'filteredRowCount'</div><div class="line">             | limitBy countOfPage pageStart "&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>......<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div></pre></td></tr></table></figure>
<p>ç„¶å¾Œæ˜¯è‡ªå®šçš„ filter <code>recordLength</code>ï¼š
result ä»£è¡¨å‚³å…¥çš„è³‡æ–™ï¼Œ key å‰‡æ˜¯å¾ view å¸¶å…¥çš„åƒæ•¸ï¼Œé€™å€‹ç¯„ä¾‹æ˜¯ <code>filteredRowCount</code>ã€‚</p>
<p>é€™è£¡é€é <code>vm.$set</code> ä¾†å°‡éæ¿¾å¾Œçš„æ•¸é‡æŒ‡å®šè‡³ vue å¯¦é«”ï¼Œä»¥ä¾¿å¯ä»¥ç›´æ¥åœ¨ Vue å¯¦é«”ä½¿ç”¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Vue.filter(<span class="string">'recordLength'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">result, key</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.$set(key, result.length);</div><div class="line">  <span class="keyword">return</span> result;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>æœ€å¾Œåœ¨é ç±¤çš„éƒ¨åˆ†ï¼Œæˆ‘å€‘å°±å¯ä»¥ç°¡å–®é€é <code>filter_name</code> æ¬„ä½æ˜¯å¦ç©ºç™½ä¾†åˆ‡æ›æ˜¯å¦é€é <code>filteredRowCount</code> è¨ˆç®—ç¸½é æ•¸:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">totalPage: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">if</span>( <span class="keyword">this</span>.filter_name.trim() === <span class="string">''</span> ) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.ceil(<span class="keyword">this</span>.rows.length / <span class="keyword">this</span>.countOfPage);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">else</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.ceil(<span class="keyword">this</span>.filteredRowCount / <span class="keyword">this</span>.countOfPage);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å®Œæ•´çš„ <a href="http://jsbin.com/bimawidora/1/edit?html,js,output" target="_blank" rel="external">demo</a> å¦‚ä¸‹:</p>
<p><a class="jsbin-embed" href="http://jsbin.com/bimawidora/embed?output" target="_blank" rel="external">JS Bin on jsbin.com</a><script src="http://static.jsbin.com/js/embed.min.js?3.35.12"></script></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘ &lt;a href=&quot;https://vuejs.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Vue.js&lt;/a&gt; æ­£å¤¯ï¼Œæ‰€ä»¥æ‰‹ä¸Šå¹¾å€‹æ±è¥¿æ‰“ç®—ç”¨é€™å€‹ä¾†æ”¹å¯«ï¼Œé—œæ–¼ Vue.js çš„åŸºæœ¬ä»‹ç´¹å¯ä»¥åƒè€ƒå°å¼Ÿçš„æŠ•å½±ç‰‡ï¼Œé€™è£¡å°±ä¸å†è´…è¿°ã€‚&lt;/p&gt;
&lt;ifr
    
    </summary>
    
      <category term="vue.js" scheme="https://kuro.tw/categories/vue-js/"/>
    
    
      <category term="vue.js" scheme="https://kuro.tw/tags/vue-js/"/>
    
  </entry>
  
  <entry>
    <title>åˆ©ç”¨ d3.js è£½ä½œ responsive çš„é•·æ¢åœ–</title>
    <link href="https://kuro.tw/posts/2015/12/20/use-d3js-to-create-responsive-histogram/"/>
    <id>https://kuro.tw/posts/2015/12/20/use-d3js-to-create-responsive-histogram/</id>
    <published>2015-12-19T22:02:00.000Z</published>
    <updated>2017-07-12T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>åˆ©ç”¨ d3.js æˆ‘å€‘å¯ä»¥å¾ˆè¼•æ˜“åœ°ç”¢ç”Ÿæˆ‘å€‘æƒ³è¦çš„åœ–è¡¨ï¼Œä»¥æœ€å¸¸è¦‹çš„é•·æ¢åœ–ç‚ºä¾‹ï¼Œåªè¦é€é scale (æ¯”ä¾‹å°º) èˆ‡ axis (è»¸ç·š)ï¼Œå†åŠ ä¸Šä¸€é» SVG çš„åŸºç¤çŸ¥è­˜ï¼Œåƒé€™æ¨£çš„é•·æ¢åœ–ä¸€ä¸‹å­å°±å¯ä»¥ç”Ÿæˆã€‚</p>
<p><img src="http://user-image.logdown.io/user/3292/blog/3340/post/378297/2V8wHgLUTEawU5iJstYS_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-12-20%20%E4%B8%8B%E5%8D%8812.21.25.png" alt="è¢å¹•å¿«ç…§ 2015-12-20 ä¸‹åˆ12.21.25.png">
[<a href="http://kurotanshi.github.io/d3js-samples/rwd/rwd.html" title="é•·æ¢åœ–ç¯„ä¾‹" target="_blank" rel="external">Code</a>]</p>
<p>ä½†æ˜¯ï¼Œåƒé€™æ¨£å°ºå¯¸çš„åœ–è¡¨ï¼Œå¾€å¾€éƒ½æœƒå› ç‚ºå¤ªå¤§è€Œä¸é©åˆåœ¨æ‰‹æ©Ÿè¢å¹•ä¸Šå‘ˆç¾ã€‚é‚„å¥½ SVG æœ‰è‘—å‘é‡åœ–å½¢çš„ç‰¹æ€§ï¼Œå¯ä»¥è‡ªç”±ç¸®æ”¾ï¼Œé€™ç¯‡å°±ä¾†ç°¡å–®ä»‹ç´¹ d3.js çš„é•·æ¢åœ–å¦‚ä½•ä¹Ÿèƒ½åšå‡º rwd çš„æ•ˆæœã€‚</p>
<p>åœ¨ä¸Šé¢çš„ç¨‹å¼ç¢¼å…§ï¼Œæˆ‘å€‘å¯ä»¥çœ‹åˆ°ï¼ŒåŸå…ˆè¨­å®šçš„å¯¬é«˜æ˜¯å¯«æ­»çš„ 960 èˆ‡ 500 (æœªæ‰£é™¤é‚Šç•Œ)
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> margin = <span class="number">40</span>,</div><div class="line">    width = <span class="number">960</span> - margin*<span class="number">2</span>,</div><div class="line">    height = <span class="number">500</span> - margin*<span class="number">2</span>;</div></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥ç¬¬ä¸€æ­¥ï¼Œæˆ‘å€‘å…ˆå°‡å¤–å±¤çš„ <code>.content</code> å…ƒç´ è¨­å®šæˆå¯¬é«˜ 100%ï¼Œç„¶å¾ŒæŠŠåŸå…ˆå¯«æ­»çš„å¯¬é«˜æ”¹æˆç”±ç¨‹å¼å»æŠ“å–å¯¦éš›çš„å¯¬é«˜
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.content</span>&#123;</div><div class="line">  <span class="attribute">display</span>: block;</div><div class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</div><div class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</div><div class="line">  <span class="attribute">min-width</span>: <span class="number">300px</span>;</div><div class="line">  <span class="attribute">max-width</span>: <span class="number">960px</span>;</div><div class="line">  <span class="attribute">max-height</span>: <span class="number">500px</span>;</div><div class="line">  <span class="attribute">overflow</span>: hidden;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å°‡å°ºå¯¸æ”¹æˆå³æ™‚å–å¾—çš„å¯¬é«˜</span></div><div class="line">width = <span class="built_in">parseInt</span>(d3.select(<span class="string">".content"</span>).style(<span class="string">"width"</span>), <span class="number">10</span>) - margin*<span class="number">2</span>;</div><div class="line">height = <span class="built_in">parseInt</span>(d3.select(<span class="string">".content"</span>).style(<span class="string">"height"</span>), <span class="number">10</span>) - margin*<span class="number">2</span>;</div></pre></td></tr></table></figure>
<p>ç„¶å¾Œæˆ‘å€‘å°‡ç€è¦½å™¨ç¸®å°ä¹‹å¾Œé‡æ•´ï¼Œçµæœåƒé€™æ¨£ï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/378297/Jrbqo6EaTJswhfBQUF6g_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-12-20%20%E4%B8%8B%E5%8D%881.23.36.png" alt="è¢å¹•å¿«ç…§ 2015-12-20 ä¸‹åˆ1.23.36.png">
[<a href="http://kurotanshi.github.io/d3js-samples/rwd/rwd2.html" title="é•·æ¢åœ–ç¯„ä¾‹2" target="_blank" rel="external">Code</a>]</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œé€™å€‹æ™‚å€™å› ç‚ºç•«é¢çš„å¯¬é«˜å·²ç¶“ä¸æ˜¯å¯«æ­»çš„äº†ï¼Œæ‰€ä»¥æœƒä¾ã€Œç¹ªè£½åœ–å½¢ç•¶ä¸‹ã€çš„å¯¬é«˜å»åšæ¯”ä¾‹çš„ä¿®æ­£ã€‚é€™æ™‚æˆ‘å€‘å·²ç¶“å®Œæˆäº†é•·æ¢åœ– RWD çš„ç¬¬ä¸€æ­¥äº†ã€‚</p>
<p>é€™æ™‚è¦æ˜¯å°‡è¡Œå‹•è£ç½®è¢å¹•æ©«æ“ºå¾Œï¼Œæ¯”ä¾‹ä¸¦ä¸æœƒä¾ç…§æ©«æ“ºä¹‹å¾Œæœ‰æ‰€ä¸åŒï¼Œå¦‚æœè¦ä½¿ç”¨è€…ä¸æ–·åœ°é‡æ•´é é¢ï¼Œé€™å°±å¤ªä¸å‹å–„äº†ã€‚æ‰€ä»¥ï¼Œæˆ‘å€‘è¦åœ¨ç€è¦½å™¨ä¸ŠåŠ ä¸Š <code>resize</code> äº‹ä»¶ï¼Œä¸¦å°‡ç¹ªè£½åœ–å½¢çš„å‹•ä½œé€šé€šå°è£è‡³ rendering é€™å€‹ function å…§ã€‚</p>
<p>é€™å€‹æ™‚å€™çš„ç¨‹å¼æ¶æ§‹æœƒåƒé€™æ¨£ï¼š
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> svg = d3.select(<span class="string">'.svg'</span>);</div><div class="line"></div><div class="line"><span class="comment">// å°‡ç¹ªè£½å‹•ä½œåŒ…è£è‡³ function å…§</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">rendering</span>(<span class="params"></span>) </span>&#123;</div><div class="line">   <span class="comment">// å°‡ç¹ªè£½çš„ç¨‹å¼ç¢¼é€šé€šæ¬åˆ°è£¡é¢</span></div><div class="line">   <span class="comment">// å…§ç•¥</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// å°‡ window ç¶å®š resize äº‹ä»¶ï¼Œä¸¦é‡æ–°ç¹ªè£½åœ–å‹</span></div><div class="line">d3.select(<span class="built_in">window</span>).on(<span class="string">'resize'</span>, rendering);</div><div class="line"></div><div class="line"><span class="comment">// é¦–æ¬¡ç¹ªè£½</span></div><div class="line">rendering();</div></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥ï¼Œé€™å€‹æ™‚å€™ï¼Œæˆ‘å€‘å¯ä»¥ä»»æ„æ‹‰æ”¾ç€è¦½å™¨çš„å°ºå¯¸
åƒé€™æ¨£
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/378297/eTI8r7EXSQWaH80HZuKH_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-12-20%20%E4%B8%8B%E5%8D%881.39.54.png" alt="è¢å¹•å¿«ç…§ 2015-12-20 ä¸‹åˆ1.39.54.png"></p>
<p>æˆ–æ˜¯é€™æ¨£
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/378297/NMpkG3LeTOWaYaNf9pYC_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-12-20%20%E4%B8%8B%E5%8D%881.40.01.png" alt="è¢å¹•å¿«ç…§ 2015-12-20 ä¸‹åˆ1.40.01.png"></p>
<p>[<a href="http://kurotanshi.github.io/d3js-samples/rwd/rwd3.html" title="é•·æ¢åœ–ç¯„ä¾‹3" target="_blank" rel="external">Code</a>]
éƒ½æ˜¯æ²’æœ‰å•é¡Œçš„ã€‚</p>
<p>é€™ä»½é•·æ¢åœ–åˆ°ç›®å‰ç‚ºæ­¢å·²ç¶“å¯ä»¥èªªæ˜¯å¥½æ£’æ£’äº†ã€‚
å¯æ˜¯ä¸æ›‰å¾—æœ‰æ²’æœ‰äººç™¼ç¾ï¼Œåœ¨æœ€å¾Œé‚£å¼µæ©«æ“ºçš„ y è»¸åˆ»åº¦å¯¦åœ¨å¤ªéæ“æ“ ï¼Œå…¶å¯¦æ˜¯ä¸å®¹æ˜“é–±è®€çš„:
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/378297/VA6ir3TRyutauy6ALqdH_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-12-20%20%E4%B8%8B%E5%8D%881.42.43.png" alt="è¢å¹•å¿«ç…§ 2015-12-20 ä¸‹åˆ1.42.43.png"></p>
<p>æˆ‘å€‘å¯ä»¥æ€éº¼æ¨£æ›´å„ªåŒ–å‘¢ï¼Ÿ</p>
<p>é€™æ™‚å€™å°±è¦åˆ©ç”¨ d3.js æä¾›çš„ <code>tick()</code> åŠŸèƒ½ï¼Œä¾†ç‚ºæˆ‘å€‘èª¿æ•´ y è»¸ä¸Šçš„åˆ»åº¦ã€‚
åªè¦åœ¨ y è»¸ä¸ŠåŠ ä¸Š tick ï¼Œåƒé€™æ¨£:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// y è»¸åŠ ä¸Š ticks</span></div><div class="line"><span class="keyword">var</span> yAxis = d3.svg.axis()</div><div class="line">      .scale(yScale2)</div><div class="line">      .orient(<span class="string">"left"</span>)</div><div class="line">      .ticks(<span class="built_in">Math</span>.max(height/<span class="number">50</span>, <span class="number">2</span>));</div></pre></td></tr></table></figure>
<p><code>Math.max</code> æœƒå›å‚³å…©å€‹æŒ‡å®šæ•¸å­—ä¸­è¼ƒå¤§çš„ä¸€å€‹ï¼Œè€Œ <code>ticks()</code> å‰‡æ˜¯è¨­å®šè»¸ç·šä¸Šåˆ»åº¦çš„æ•¸é‡ã€‚</p>
<p>æ‰€ä»¥ç¶“éå‰›å‰›çš„è¨­å®šï¼Œç•¶åœ–å½¢çš„é«˜åº¦å¤§æ–¼ 100px çš„æ™‚å€™ï¼Œåœ–è¡¨æ¯ 50px æœƒæœ‰ä¸€å€‹åˆ»åº¦ï¼Œè€Œåœ–å½¢é«˜åº¦å°æ–¼æˆ–ç­‰æ–¼ 100px æ™‚ï¼Œå‰‡è‡³å°‘æœƒæœ‰å…©å€‹åˆ»åº¦ï¼Œåƒé€™æ¨£ï¼š</p>
<p><img src="http://user-image.logdown.io/user/3292/blog/3340/post/378297/Mz3vq9BKRZ2dkSd5SP6W_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-12-20%20%E4%B8%8B%E5%8D%881.54.29.png" alt="è¢å¹•å¿«ç…§ 2015-12-20 ä¸‹åˆ1.54.29.png"></p>
<p><img src="http://user-image.logdown.io/user/3292/blog/3340/post/378297/swZcbhnQPmhiWQBwTbDG_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-12-20%20%E4%B8%8B%E5%8D%881.55.08.png" alt="è¢å¹•å¿«ç…§ 2015-12-20 ä¸‹åˆ1.55.08.png"></p>
<p>[<a href="http://kurotanshi.github.io/d3js-samples/rwd/rwd4.html" title="é•·æ¢åœ–ç¯„ä¾‹4" target="_blank" rel="external">Code</a>]</p>
<p>å¯¦éš›ç”¨æ‰‹æ©Ÿè©¦è©¦ï¼š</p>
<p><img src="http://user-image.logdown.io/user/3292/blog/3340/post/378297/mM3agzeTGGGdM2p4YjZq_2015-12-20%2003.33.30.png" alt="2015-12-20 03.33.30.png">
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/378297/j4wccnAOTZWhLzubTUDw_2015-12-20%2003.33.43.png" alt="2015-12-20 03.33.43.png"></p>
<p>é€éé€™æ¨£çš„ä¿®æ­£ï¼Œå°±å¯ä»¥è®“åœ–è¡¨è®Šå¾—æ›´å¥½é–±è®€äº†ã€‚</p>
<p>ä»¥ä¸Šï¼Œæˆ‘å€‘åªè¦åšç°¡å–®çš„å°èª¿æ•´ï¼Œå°±å¯ä»¥è®“ç¾æœ‰çš„ d3 é•·æ¢åœ–åšåˆ°æœ‰ RWD çš„æ•ˆæœã€‚</p>
<p>ä½†æ˜¯è¦æ³¨æ„çš„æ˜¯ï¼Œä¸æ˜¯æ‰€æœ‰åœ–è¡¨éƒ½åˆé©åœ¨æ‰‹æ©Ÿè¢å¹•ä¸Šå‘ˆç¾ï¼Œåœ¨è¨­è¨ˆæ™‚ä¹Ÿéœ€è¦æŠŠé€™äº›è€ƒæ…®é€²å»ï¼Œæ˜¯è¦ç‚ºæ‰‹æ©Ÿç‰ˆæœ¬å¦å¤–åšä¸€å€‹æ–°çš„åœ–è¡¨ï¼Œæˆ–æ˜¯åš RWD çš„è¨­è¨ˆï¼Œå°±çœ‹ä½¿ç”¨çš„æƒ…å¢ƒä»¥åŠæƒ³è¡¨é”çš„æ„ç¾©ä¾†æ±ºå®šå›‰ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åˆ©ç”¨ d3.js æˆ‘å€‘å¯ä»¥å¾ˆè¼•æ˜“åœ°ç”¢ç”Ÿæˆ‘å€‘æƒ³è¦çš„åœ–è¡¨ï¼Œä»¥æœ€å¸¸è¦‹çš„é•·æ¢åœ–ç‚ºä¾‹ï¼Œåªè¦é€é scale (æ¯”ä¾‹å°º) èˆ‡ axis (è»¸ç·š)ï¼Œå†åŠ ä¸Šä¸€é» SVG çš„åŸºç¤çŸ¥è­˜ï¼Œåƒé€™æ¨£çš„é•·æ¢åœ–ä¸€ä¸‹å­å°±å¯ä»¥ç”Ÿæˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://user-image.lo
    
    </summary>
    
      <category term="D3.js" scheme="https://kuro.tw/categories/D3-js/"/>
    
    
      <category term="d3.js" scheme="https://kuro.tw/tags/d3-js/"/>
    
      <category term="rwd" scheme="https://kuro.tw/tags/rwd/"/>
    
  </entry>
  
  <entry>
    <title>åˆ©ç”¨ Google Fusion Tableï¼Œä¸ç”¨å¯« code ä¹Ÿå¯ä»¥ç”¢ç”Ÿä¸»é¡Œåœ°åœ–</title>
    <link href="https://kuro.tw/posts/2015/10/15/using-google-fusion-table-without-writing-code-or-topic-maps/"/>
    <id>https://kuro.tw/posts/2015/10/15/using-google-fusion-table-without-writing-code-or-topic-maps/</id>
    <published>2015-10-14T18:16:00.000Z</published>
    <updated>2017-07-12T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ„Ÿè¬å°åŒ—å¸‚æ”¿åºœä»¥åŠ<a href="https://www.facebook.com/photo.php?fbid=10204828212414899&amp;set=a.1357755313713.2044236.1526408898&amp;type=3" target="_blank" rel="external">ç›¸é—œäººå£«çš„åŠªåŠ›</a>ï¼Œåœ¨åæœˆä¸­æ—¬çš„æ™‚å€™ï¼Œå°åŒ—å¸‚ open data å¹³å°åˆé–‹æ”¾äº†ã€Œ<a href="http://data.taipei/opendata/datalist/datasetMeta?oid=68785231-d6c5-47a1-b001-77eec70bec02" target="_blank" rel="external">å°åŒ—å¸‚ä½å®…ç«Šç›œé»ä½è³‡è¨Š</a>ã€é€™æ¨£çš„è³‡æ–™ï¼Œé›–ç„¶å¾ˆå¤šäººæˆ²ç¨±æˆ¿åƒ¹åˆè¦ä¸‹è·Œäº†ï¼Œä½†æ˜¯è€è©±ä¸€å¥ï¼Œèº«ç‚º<del>æœ‰è‰¯å¿ƒçš„é–‹ç™¼è€…ï¼Œç•¶ç„¶å±…ä½å®‰å…¨æ¯”æˆ¿åƒ¹ä»€éº¼çš„é‚„è¦é‡è¦å¾—å¤š</del>ã€‚</p>
<p>é‚£éº¼ï¼Œæ‹¿åˆ°é€™ä»½è³‡æ–™æˆ‘å€‘å¯ä»¥æ€éº¼ç©å‘¢?
å‰›å¥½é€™ä»½è³‡æ–™çš„æ ¼å¼æ˜¯ CSV (Comma-Separated Valuesï¼Œä¸€ç¨®ç”±é€—é»åˆ†éš”çš„ç´”æ–‡å­—è³‡æ–™æ ¼å¼)ï¼Œæ‰€ä»¥æœ¬ç¯‡å°±ä¾†ä»‹ç´¹å¦‚ä½•é€é <a href="https://support.google.com/fusiontables/answer/2571232" target="_blank" rel="external">Google Fusion Table</a> ä¾†è®“æˆ‘å€‘ä¸å¿…å¯«ä»»ä½•çš„ code ï¼Œä¹Ÿå¯ä»¥å»ºç«‹ä¸»é¡Œåœ°åœ–ã€‚</p>
<p>é¦–å…ˆå…ˆåˆ°<a href="http://data.taipei/opendata/datalist/datasetMeta?oid=68785231-d6c5-47a1-b001-77eec70bec02" target="_blank" rel="external">å°åŒ—å¸‚ä½å®…ç«Šç›œé»ä½è³‡è¨Š</a>ï¼Œé»ä¸€ä¸‹ã€Œä½¿ç”¨è³‡æ–™ã€å°‡æ‰€éœ€çš„æª”æ¡ˆä¸‹è¼‰ä¸‹ä¾†ï¼Œæœƒå¾—åˆ°ä¸€ä»½ csv æª”æ¡ˆã€‚</p>
<p><img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/UsvTpRmSDWhtT8junGNw_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.16.22.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.16.22.png"></p>
<p>æ¥è‘—æ‰“é–‹ <a href="https://support.google.com/fusiontables/answer/2571232" target="_blank" rel="external">Google Fusion Table</a> çš„é é¢ï¼Œçœ‹åˆ°ä¸‹é¢é€™å€‹ç•«é¢ï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/vFIqF2IuSOuhKhR0mKUt_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.33.31.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.33.31.png"></p>
<p>æ¥è‘—é¸æ“‡ã€ŒCREATE A FUSION TABLEã€ï¼Œæœƒçœ‹åˆ°é€™æ¨£çš„ç•«é¢ï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/QrsLmP03QNamaW0qrqjT_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.37.48.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.37.48.png"></p>
<p>ç¾åœ¨è©¦è‘—æŠŠå‰›å‰›çš„ csv ç›´æ¥é¤µçµ¦ä»–ï¼Œçœ‹çœ‹æœƒç™¼ç”Ÿä»€éº¼äº‹
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/Wf4cjXTQTrCXlw0UDWMl_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.05.47.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.05.47.png"></p>
<p>å¦‚æœä¸æ„å¤–ï¼Œä½ æ‡‰è©²æœƒå¾—åˆ°åƒé€™æ¨£çš„äº‚ç¢¼è³‡æ–™ XDDDDD
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/AUqRTPyFQX29z5TdLGaM_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.06.19.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.06.19.png"></p>
<p>ä¸éæ²’é—œä¿‚ï¼Œå±±ä¸è½‰è·¯è½‰ï¼Œæª”æ¡ˆæ ¼å¼ç•¶ç„¶ä¹Ÿå¯ä»¥è½‰ã€‚åªæ˜¯éœ€è¦å¤šèµ°å¹¾æ­¥è·¯ã€‚
é€™æ¬¡æˆ‘å€‘å°‡åŸå§‹çš„ csv è³‡æ–™å…ˆä¸Ÿåˆ° <a href="http://www.google.com/intl/zh-TW_tw/sheets/about/" target="_blank" rel="external">Google Sheet</a> å…§ï¼Œè«‹ä»–å°‡æˆ‘å€‘çš„è³‡æ–™è½‰æˆæ­£ç¢ºçš„ç·¨ç¢¼ã€‚ åœ¨å»ºç«‹ä¸€å€‹æ–°çš„ Google Sheet ä¹‹å¾Œï¼Œæˆ‘å€‘é¸æ“‡ File &gt; Import å°‡å‰›å‰›çš„ csv æª”æ¡ˆåŒ¯å…¥ï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/fNpq4j4rTEuynwQAcxOO_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.07.40.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.07.40.png"></p>
<p>è¨˜å¾—ä¸€æ¨£è¦é¸æ“‡ Commaï¼Œå› ç‚ºæ˜¯é€éé€—é»åˆ†éš”çš„è³‡æ–™æ ¼å¼ã€‚
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/bbUWtz7RXqdpZsizK5Lw_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.08.07.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.08.07.png"></p>
<p>ç„¶å¾Œå°±æœƒå¾—åˆ°æ­£ç¢ºç·¨ç¢¼å¾Œçš„è³‡æ–™å›‰ã€‚<del>ä¸éç³–å»é‡Œä¸€æ¨£ GG...å› ç‚ºåŸå§‹è³‡æ–™å°± GG äº†... orz</del>
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/wYMPpnlHTRmrgoywrKGc_%E6%9C%AA%E5%91%BD%E5%90%8D.png" alt="æœªå‘½å.png"></p>
<p>ok, åˆ°äº†é€™è£¡æˆ‘å€‘å·²ç¶“æœ‰ä¸€ä»½æ­£ç¢ºçš„è³‡æ–™ï¼Œé€™æ™‚å†å›åˆ° Funsion Tableï¼Œæˆ‘å€‘é¸æ“‡ ã€ŒGoogle Spreadsheetsã€ï¼Œç„¶å¾Œå°‡å‰›å‰›å»ºç«‹çš„ Google Sheet åŒ¯å…¥é€²ä¾†:
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/QrsLmP03QNamaW0qrqjT_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.37.48.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.37.48.png"></p>
<p><img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/66zfnteRQy6L50MJQUZ1_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.11.18.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.11.18.png"></p>
<p>åŒ¯å…¥æˆåŠŸå¾Œï¼ŒFunsion Table æœƒå‡ºç¾é€™æ¨£çš„ç•«é¢ï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/pDQ7qI4WSDub29jPiglU_%E6%9C%AA%E5%91%BD%E5%90%8D.png" alt="æœªå‘½å.png"></p>
<p>é€™å€‹æ™‚å€™ï¼Œå› ç‚ºæˆ‘å€‘è¦è£½ä½œåœ°åœ–ï¼Œæ‰€ä»¥è¦å‘Šè¨´ Funsion Table åœ°é»çš„æ¬„ä½ä¸æ˜¯å–®ç´”çš„å­—ä¸²ï¼Œè€Œæ˜¯ç”¨ä¾†è¡¨ç¤ºåœ°ç†è³‡è¨Šçš„è³‡æ–™ã€‚é»é¸ Edit &gt; Change columnsï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/thibCn9zRMO435hQgjFd_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.11.57.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.11.57.png"></p>
<p>ç„¶å¾Œå°‡ç™¼ç”Ÿåœ°é»çš„ Type æ”¹æˆ Locationï¼Œç„¶å¾Œé»ä¸Šé¢è—è‰²çš„ Save å„²å­˜ã€‚
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/TK4RPNQtQNiXcQBclDeu_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.12.09.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.12.09.png"></p>
<p>è³‡æ–™éƒ½æº–å‚™å¥½äº†ï¼Œç„¶å¾Œæˆ‘å€‘å»ºç«‹åœ°åœ–ï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/csg65yBiQIyKcj1PAnNk_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.58.53.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.58.53.png"></p>
<p>ä¸æ„å¤–çš„è©±ä½ æ‡‰è©²æœƒçœ‹åˆ°é€™æ¨£çš„ç•«é¢ï¼Œæ˜¯å› ç‚ºæˆ‘å€‘å‚³å…¥çš„æ˜¯åœ°å€çš„æ–‡å­—è³‡è¨Šï¼Œ Google éœ€è¦å°‡å®ƒè½‰ç‚ºç¶“ç·¯åº¦å¾Œæ‰èƒ½å°æ‡‰åˆ°åœ°åœ–ä¸Šï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/JJNbZ5DRRmehqBdoDytm_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.13.03.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.13.03.png"></p>
<p>ç„¶å¾Œç­‰å¾…ä¸€æ®µæ™‚é–“å¾Œï¼ŒFunsion Table å°±æœƒç‚ºæˆ‘å€‘ç”¢ç”Ÿåœ°åœ–ï¼Œåƒé€™æ¨£ï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/7cjQA7USzGy7nGrQRLDr_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.20.02.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.20.02.png"></p>
<p>é™¤äº†åœ°é»æ¨™ç¤ºå¤–ï¼Œä»–ä¹Ÿæä¾›äº†ç†±åœ– (Heat Map) çš„å‘ˆç¾ï¼Œè©¦è‘—æ‹‰æ‹‰æ—é‚Šçš„æ²è»¸èª¿æ•´åƒæ•¸å§ï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/wMQb7zI8R72jFxu7a3g4_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8811.03.53.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ11.03.53.png"></p>
<p>ç•¶ç„¶ä½ ä¹Ÿå¯ä»¥åšå¥½çš„åœ°åœ– share å‡ºä¾†ï¼Œåƒé€™æ¨£ï¼š</p>
<iframe width="800" height="400" scrolling="no" frameborder="no" src="https://www.google.com/fusiontables/embedviz?q=select+col3+from+1sAGtul5gWv1_yRpPTYI1ZvPaHQRPDod-B0MbOeS_&amp;viz=MAP&amp;h=false&amp;lat=25.05814459656792&amp;lng=121.63429174086912&amp;t=1&amp;z=12&amp;l=col3&amp;y=3&amp;tmplt=4&amp;hml=GEOCODABLE"></iframe>

<p>é€é Fusion Table æˆ‘å€‘å¯ä»¥ä¸ç”¨å¯«ä»»ä½•çš„ç¨‹å¼ç¢¼å°±ç”Ÿæˆä¸€ä»½è³‡è¨Šåœ°åœ–ï¼Œå¾ˆç°¡å–®å§ :)</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ„Ÿè¬å°åŒ—å¸‚æ”¿åºœä»¥åŠ&lt;a href=&quot;https://www.facebook.com/photo.php?fbid=10204828212414899&amp;amp;set=a.1357755313713.2044236.1526408898&amp;amp;type=3&quot; target
    
    </summary>
    
      <category term="Google Map" scheme="https://kuro.tw/categories/Google-Map/"/>
    
    
      <category term="google map" scheme="https://kuro.tw/tags/google-map/"/>
    
      <category term="Fusion Table" scheme="https://kuro.tw/tags/Fusion-Table/"/>
    
  </entry>
  
  <entry>
    <title>åˆ©ç”¨ Google Map æª¢è¦–å°åŒ—å¸‚é™é›¨æ·¹æ°´æ¨¡æ“¬åœ–</title>
    <link href="https://kuro.tw/posts/2015/09/30/use-google-map-view-rainfall-simulation-of-flooding-in-taipei-city-map/"/>
    <id>https://kuro.tw/posts/2015/09/30/use-google-map-view-rainfall-simulation-of-flooding-in-taipei-city-map/</id>
    <published>2015-09-29T20:00:00.000Z</published>
    <updated>2017-07-12T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>çœ‹åˆ°å‰å…©å¤©çš„æ–°è: <a href="https://tw.news.yahoo.com/%E6%9F%AF%E6%96%87%E5%93%B2%E6%83%B3%E5%85%AC%E9%96%8B%E6%98%93%E6%B7%B9%E6%B0%B4%E5%9C%B0%E5%8D%80-%E5%8C%97%E5%B8%82%E5%BA%9C%E5%B7%B2%E4%B8%8A%E7%B6%B2-115016390.html" title="æŸ¯æ–‡å“²æƒ³å…¬é–‹æ˜“æ·¹æ°´åœ°å€ åŒ—å¸‚åºœå·²ä¸Šç¶²" target="_blank" rel="external">æŸ¯æ–‡å“²æƒ³å…¬é–‹æ˜“æ·¹æ°´åœ°å€ åŒ—å¸‚åºœå·²ä¸Šç¶²</a>ï¼Œåˆå‰›å¥½æœ‰å‰è¼©å¯«äº†ä¸€ç¯‡ <a href="http://gis.rchss.sinica.edu.tw/qgis/?p=3221" title="åˆ©ç”¨QGISæª¢è¦–å°åŒ—å¸‚é™é›¨æ·¹æ°´æ¨¡æ“¬åœ–" target="_blank" rel="external">åˆ©ç”¨QGISæª¢è¦–å°åŒ—å¸‚é™é›¨æ·¹æ°´æ¨¡æ“¬åœ–</a>ï¼Œ<del>é›–ç„¶èº«è™•æˆ¿ä»²æ¥­ï¼Œä½†èº«ç‚ºæœ‰è‰¯å¿ƒçš„é–‹ç™¼è€…ä¸èƒ½åªæƒ³è‘—æˆ¿åƒ¹</del>ï¼Œå¿ƒæƒ³æ‡‰ä¹Ÿå¯é€é Google Map ä¾†å‘ˆç¾ï¼Œæ–¼æ˜¯è©¦äº†ä¸€ä¸‹ï¼Œé †ä¾¿å¯«ç¯‡è¨˜éŒ„ã€‚</p>
<p>é¦–å…ˆå¾<a href="http://data.taipei/opendata/datalist/datasetMeta?oid=fa1e8012-ebb4-473b-888e-97f9a9ce365e" title="è‡ºåŒ—å¸‚æ”¿åºœè³‡æ–™é–‹æ”¾å¹³å°" target="_blank" rel="external">è‡ºåŒ—å¸‚æ”¿åºœè³‡æ–™é–‹æ”¾å¹³å°</a>å°‡æ‰€éœ€çš„è³‡æ–™ä¸€ä¸€ä¸‹è¼‰ä¸‹ä¾†ï¼Œæ ¼å¼æ˜¯ kmz (å…¶å¯¦å°±æ˜¯ zip å£“ç¸®)ã€‚åœ¨è§£å£“ç¸®å¾Œå¯ä»¥å¾—åˆ° doc.kml æª”æ¡ˆã€‚ æ¥è‘—ï¼Œé›–ç„¶ Google maps API æœ‰æä¾› <a href="https://developers.google.com/maps/documentation/javascript/examples/layer-kml" title="Google maps API KML Layers" target="_blank" rel="external">KML Layers</a> çš„åœ–å±¤åµŒå¥—ï¼Œä½†è½‰å‡ºä¾†çš„ kml æª”ä¼¼ä¹è¦ç¨ä½œä¿®æ”¹å¾Œæ‰èƒ½é€é KML Layers å¥—ç”¨åœ¨ Google map ä¸Šï¼Œé€™è£æˆ‘é¸æ“‡å¦ä¸€ç¨®åšæ³•: å°‡ kml è½‰ç‚º geoJSON å¾Œä½¿ç”¨ã€‚</p>
<p>å‰é¢èªªåˆ°è¦å°‡ kml æª”æ¡ˆè½‰ç‚º geoJSONï¼Œé‚£éº¼è©²å¦‚ä½•è½‰æ›æ ¼å¼å‘¢ï¼Ÿ
å¹¸å¥½ mapbox æä¾›äº† <a href="https://github.com/mapbox/togeojson" target="_blank" rel="external">togeojson</a> é€™å¥—å·¥å…·ï¼Œé€éå®ƒæä¾›çš„ <code>toGeoJSON.kml(doc)</code> å°±å¯ä»¥è¼•é¬†åœ°å°‡å®ƒè½‰ç‚º geoJSON çš„æ ¼å¼äº†ã€‚</p>
<p>æœ‰é—œ GeoJSON å¦‚ä½•è¼¸å‡ºè‡³ Google Map å¯ä»¥åƒè€ƒå°å¼Ÿä¹‹å‰çš„ postï¼š<a href="http://kuro.tw/posts/2015/04/28/through-the-google-maps-api-geojson-data">é€é Google Maps API è™•ç† GeoJSON è³‡æ–™</a>ï¼Œé€™è£å°±ä¸å†è´…è¿°ã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œé€é Google Maps Javascript API è¼¸å‡ºçš„ GeoJSON é è¨­çš„æ¨£å¼éƒ½æ˜¯é»‘è‰²ç²—ç·šï¼Œæƒ³è¦ä¿®æ”¹æ¨£å¼çš„è©±å¯ä»¥é€é <code>setStyle</code> ä¾†åšè™•ç†ï¼Œåƒé€™æ¨£å¯ä»¥é‡å° name æ˜¯ 0.3 çš„æ™‚å€™ï¼Œæˆ‘å€‘è¼¸å‡ºæ¨£å¼ç‚ºè—è‰²çš„ç·šï¼Œå¦‚æœæ˜¯ 0.3~1.0 çš„è©±ï¼Œå‰‡æ˜¯è¼¸å‡ºç‚ºç¶ è‰²çš„ç·šæ®µï¼Œç•¶ç„¶ä¹Ÿå¯ä»¥é‡å°å¡«è‰²èˆ‡é€æ˜åº¦ç­‰ç­‰åšè¨­å®šã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">dataMap.setStyle(function(feature)&#123;</div><div class="line">  if( feature.getProperty(&apos;name&apos;) === &apos;0.3&apos;)&#123;</div><div class="line">    return &#123; fillOpacity: 0.35, fillColor: &apos;#0070FF&apos;, strokeWeight: 2, strokeColor: &apos;#0070FF&apos;, strokeOpacity: 1 &#125;;</div><div class="line">  &#125;</div><div class="line">  if( feature.getProperty(&apos;name&apos;) === &apos;0.3~1.0&apos;)&#123;</div><div class="line">    return &#123; fillOpacity: 0.35, fillColor: &apos;#54FF00&apos;, strokeWeight: 2, strokeColor: &apos;#54FF00&apos;, strokeOpacity: 1 &#125;;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>çµæœå‘ˆç¾åƒé€™æ¨£ï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/302535/lNUGoyd7RB2MOsx8i1cw_image.png" alt="image.png"></p>
<p>é€™è£ä¹Ÿæœ‰ Online Demo: <a href="http://kurotanshi.github.io/TPEDisasterSummary/rain/rain_tp_map.html" target="_blank" rel="external">http://kurotanshi.github.io/TPEDisasterSummary/rain/rain_tp_map.html</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;çœ‹åˆ°å‰å…©å¤©çš„æ–°è: &lt;a href=&quot;https://tw.news.yahoo.com/%E6%9F%AF%E6%96%87%E5%93%B2%E6%83%B3%E5%85%AC%E9%96%8B%E6%98%93%E6%B7%B9%E6%B0%B4%E5%9C%B0%E
    
    </summary>
    
      <category term="OpenData" scheme="https://kuro.tw/categories/OpenData/"/>
    
    
      <category term="google map" scheme="https://kuro.tw/tags/google-map/"/>
    
      <category term="opendata" scheme="https://kuro.tw/tags/opendata/"/>
    
  </entry>
  
  <entry>
    <title>[ç­†è¨˜] JavaScript è®Šæ•¸å®£å‘Šèˆ‡ä½œç”¨åŸŸ</title>
    <link href="https://kuro.tw/posts/2015/07/08/note-javascript-variables-declared-with-the-scope-scope/"/>
    <id>https://kuro.tw/posts/2015/07/08/note-javascript-variables-declared-with-the-scope-scope/</id>
    <published>2015-07-08T02:11:00.000Z</published>
    <updated>2017-07-12T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¤§å®¶éƒ½çŸ¥é“ï¼ŒJavaScript çš„è®Šæ•¸æœ‰å…¶ä½œç”¨åŸŸçš„ç¯„åœï¼Œè‹¥ä½¿ç”¨å‰æœªç¶“ var å®£å‘Šï¼Œå°±æœƒè‡ªå‹•è®Šæˆå…¨åŸŸè®Šæ•¸ (global variable)ï¼Œè€Œåœ¨å…¶ code block å…§å®£å‘Šçš„è®Šæ•¸ä¹Ÿåªæœ‰è©² code block å…§å¯ä»¥ä½¿ç”¨ã€‚</p>
<p>é€™æ¬¡çš„å•é¡Œï¼Œå…¶å¯¦å¾ˆä¹…ä»¥å‰åœ¨ tonyQ çš„èšæœƒä¸Šå°±è½ä»–èªªéäº†ï¼Œ<del>åªæ˜¯æ²’æƒ³åˆ°é‚„çœŸçš„æœƒé‡åˆ° XDDDD</del></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(a);		<span class="comment">// 1</span></div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ code å¾ˆç°¡å–®ï¼Œå°±æ˜¯å®£å‘Šä¸€å€‹å…¨åŸŸè®Šæ•¸ aï¼Œç„¶å¾Œå€¼ç‚º 1 ï¼Œå› ç‚ºæ˜¯å…¨åŸŸè®Šæ•¸ï¼Œæ‰€ä»¥åœ¨ä¹‹å¾Œçš„åŒ¿åå‡½å¼å…§å¯ä»¥ä½¿ç”¨å®ƒã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> a = <span class="number">100</span>;</div><div class="line">  <span class="built_in">console</span>.log(a);		<span class="comment">// 100</span></div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>é€™æ¬¡ï¼Œåœ¨åŒ¿åå‡½å¼å…§ï¼Œæˆ‘å€‘å¦å¤–å®£å‘Šäº†ä¸€å€‹ aï¼Œå€¼ç‚º 100ï¼Œå› ç‚ºå…¶ä½œç”¨åŸŸçš„é—œä¿‚ï¼Œæ‰€ä»¥ console çš„çµæœæœƒæ˜¯ 100ã€‚</p>
<p>æ¥è‘—ï¼Œå•é¡Œä¾†äº†ï¼Œå¦‚æœæˆ‘å€‘åœ¨ <code>var a = 100;</code> ä¹‹å‰å»å–å€¼ï¼Œæœƒç™¼ç”Ÿä»€éº¼äº‹å‘¢ï¼Ÿ
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(a);    <span class="comment">//  ?</span></div><div class="line">  <span class="keyword">var</span> a = <span class="number">100</span>;</div><div class="line">  <span class="built_in">console</span>.log(a);    <span class="comment">// 100</span></div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<p>ç­”æ¡ˆæ˜¯ï¼Œç¬¬ä¸€æ¬¡çš„ console.log(a) æœƒå°å‡º <strong>undefined</strong>ï¼Œè€Œç¬¬äºŒæ¬¡æœƒå‡ºç¾ 100ã€‚</p>
<p>å› ç‚ºåœ¨åŒ¿åå‡½æ•¸ç¨ç«‹çš„ scope å…§ï¼Œä¸ç®¡ var æ˜¯æ”¾åœ¨æœ€å‰é¢ï¼Œæˆ–æ˜¯æœ€å¾Œä¸€è¡Œï¼Œä»–çš„è®Šæ•¸å¯¦é«”åœ¨è©² code block ä¸€é–‹å§‹å°±æ˜¯æ–°çš„äº†ï¼Œä¹Ÿå°±æ˜¯èªªï¼Œå‰›å‰›çš„ code å…¶å¯¦ç­‰åŒä¸‹é¢é€™æ®µï¼š
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> a;</div><div class="line">  <span class="built_in">console</span>.log(a);    <span class="comment">// undefined</span></div><div class="line">  a = <span class="number">100</span>;</div><div class="line">  <span class="built_in">console</span>.log(a);    <span class="comment">// 100</span></div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥ç¬¬ä¸€æ¬¡æœƒå°å‡º undefined ã€‚</p>
<p>è¦æ€éº¼æ’é™¤é€™æ¨£çš„å•é¡Œå‘¢ï¼Œå¾ˆç°¡å–®ï¼Œè¦å˜›ä¸€é–‹å§‹å°±ä¸è¦å–ç›¸åŒåç¨±ï¼Œè¦å˜›å°±é€éåƒæ•¸çš„æ–¹å¼ä»£å…¥åŸæœ¬çš„è®Šæ•¸ï¼Œåƒé€™æ¨£ï¼š
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">_a</span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(_a);    <span class="comment">// 1</span></div><div class="line">  <span class="keyword">var</span> a = <span class="number">100</span>;</div><div class="line">  <span class="built_in">console</span>.log(a);    <span class="comment">// 100</span></div><div class="line">&#125;)(a);</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¤§å®¶éƒ½çŸ¥é“ï¼ŒJavaScript çš„è®Šæ•¸æœ‰å…¶ä½œç”¨åŸŸçš„ç¯„åœï¼Œè‹¥ä½¿ç”¨å‰æœªç¶“ var å®£å‘Šï¼Œå°±æœƒè‡ªå‹•è®Šæˆå…¨åŸŸè®Šæ•¸ (global variable)ï¼Œè€Œåœ¨å…¶ code block å…§å®£å‘Šçš„è®Šæ•¸ä¹Ÿåªæœ‰è©² code block å…§å¯ä»¥ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;é€™æ¬¡çš„å•é¡Œï¼Œå…¶å¯¦å¾ˆä¹…ä»¥å‰åœ¨ 
    
    </summary>
    
      <category term="javascript" scheme="https://kuro.tw/categories/javascript/"/>
    
    
      <category term="javascript" scheme="https://kuro.tw/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>Taipei D3.js Meetup å°èšåˆ†äº«å¿ƒå¾—</title>
    <link href="https://kuro.tw/posts/2015/06/18/taipei-d3js-meetup-gathering-to-share-experiences/"/>
    <id>https://kuro.tw/posts/2015/06/18/taipei-d3js-meetup-gathering-to-share-experiences/</id>
    <published>2015-06-18T05:32:00.000Z</published>
    <updated>2017-07-12T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>é€™æ¬¡æˆ‘åœ¨ <a href="http://www.meetup.com/Taipei-D3-js-Meetup/" title="Taipei D3.js Meetup" target="_blank" rel="external">Taipei D3.js Meetup</a> (ç¾åœ¨ä¼¼ä¹æ”¹å« Visual Thursday) åˆ†äº«çš„ Talk æ˜¯æœ‰é—œæ–¼åœ°ç†è¦–è¦ºåŒ–çš„ç°¡ä»‹ï¼Œé›–ç„¶é¡Œç›®è½èµ·ä¾†å¾ˆå­¸è¡“ï¼Œä½†å…¶å¯¦å…§å®¹æ˜¯æˆ‘é€™é™£å­å°æ–¼ Web GIS ä»¥åŠåœ°åœ–è¦–è¦ºåŒ–çš„ä¸€äº›æ‘¸ç´¢å¿ƒå¾—åˆ†äº«ã€‚</p>
<p>æ„Ÿè¬å°ç£å¾®è»Ÿæä¾›å ´åœ° XD</p>
<p>ä¸‹é¢æ˜¯æˆ‘çš„æŠ•å½±ç‰‡</p>
<iframe src="https://www.slideshare.net/slideshow/embed_code/key/mhzctMFXFoHMJn" width="476" height="400" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="margin-bottom:1em;"></iframe>


<p>é€™æ¬¡å¹¾å€‹ Demo çš„åŸå§‹ç¢¼éƒ½æ”¾åœ¨ Github ä¸Šï¼š <a href="https://github.com/kurotanshi/VisualThursday_demo" target="_blank" rel="external">https://github.com/kurotanshi/VisualThursday_demo</a>
æœ‰èˆˆè¶£çš„æœ‹å‹å¯ä»¥è‡ªè¡Œä¸‹è¼‰ç ”ç©¶ã€‚</p>
<p>æƒ³çœ‹ Online Demo çš„ä¹Ÿå¯ä»¥ç›´æ¥åˆ°é€™ï¼š <a href="http://kurotanshi.github.io/VisualThursday_demo/" target="_blank" rel="external">http://kurotanshi.github.io/VisualThursday_demo/</a></p>
<p>é›–ç„¶éƒ½æ˜¯ä»¥ Google Map ç‚ºç¯„ä¾‹ï¼Œä½†æ˜¯å¤§éƒ¨ä»½çš„åœ–è³‡ç³»çµ±å¦‚ leaflet.js / MapBox ç­‰éƒ½æ˜¯é€šç”¨çš„ï¼Œå°¤å…¶æ˜¯ <a href="http://turfjs.org/" title="http://turfjs.org/" target="_blank" rel="external">Turf.js</a> é€™å€‹åœ°ç†è³‡è¨Šåˆ†æçš„å·¥å…·ï¼Œååˆ†å¼·å¤§ï¼Œå¯ä»¥ç›´æ¥é‡å° geojson åšé‹ç®—ï¼Œä¹Ÿå¯ä»¥é€é node åœ¨å¾Œç«¯åŸ·è¡Œé‹ç®—ã€‚è‡³ä»Šæˆ‘é‚„åœ¨æ‘¸ç´¢å®ƒçš„åŠŸèƒ½ï¼Œä¹Ÿè¨±æœªä¾†æ›´åŠ ç†Ÿç·´å¾Œå¯ä»¥å†ä¾†åˆ†äº«çµ¦å¤§å®¶ã€‚</p>
<p>è¬è¬æ‰€æœ‰åœ¨ç«¯åˆé€£å‡å‰ä»é¡˜æ„ä¾†åƒèˆ‡æ´»å‹•çš„æœ‹å‹ï¼Œå¤§å®¶ç«¯åˆç¯€å¿«æ¨‚ :)</p>
<p>æœ€å¾Œï¼Œæˆ‘å€‘é‚„æœ‰å¾ˆå¤šå°ˆæ¡ˆæƒ³å¯¦ç¾ï¼Œæ­¡è¿æœ‰å¿—ä¹‹å£«åŠ å…¥ï¼</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é€™æ¬¡æˆ‘åœ¨ &lt;a href=&quot;http://www.meetup.com/Taipei-D3-js-Meetup/&quot; title=&quot;Taipei D3.js Meetup&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Taipei D3.js Meetup&lt;
    
    </summary>
    
      <category term="D3.js" scheme="https://kuro.tw/categories/D3-js/"/>
    
    
      <category term="opendata" scheme="https://kuro.tw/tags/opendata/"/>
    
      <category term="D3.js" scheme="https://kuro.tw/tags/D3-js/"/>
    
  </entry>
  
  <entry>
    <title>[JS] [Note] TWD97 æ¨™è½‰æ›çˆ² ç¶“ç·¯åº¦ </title>
    <link href="https://kuro.tw/posts/2015/06/11/js-note-twd97-convert-to-longitude-and-latitude/"/>
    <id>https://kuro.tw/posts/2015/06/11/js-note-twd97-convert-to-longitude-and-latitude/</id>
    <published>2015-06-11T03:18:00.000Z</published>
    <updated>2017-07-12T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>å› ç‚ºå¾è‡ºåŒ—å¸‚æ”¿åºœè³‡æ–™é–‹æ”¾å¹³å° API æ‹¿åˆ°çš„è³‡æ–™æ˜¯ TWD97 åº§æ¨™æ ¼å¼ï¼Œæ‰€ä»¥æˆ‘å€‘å¿…é ˆè¦å°‡å®ƒè½‰æˆç¶“ç·¯åº¦å¾Œæ‰èƒ½å¥—ç”¨è‡³ Google Map ä½¿ç”¨ã€‚ç¶²è·¯ä¸ŠæŸ¥äº†å¾ˆå¤šè³‡æ–™ï¼Œæœ€å¾Œæ‰¾åˆ°æœ€è¦ªæ°‘çš„æ˜¯ç±³èŸ²å¤§çš„ PHP ç‰ˆæœ¬ï¼Œæ–¼æ˜¯å°±æ”¹æˆå¯«æˆ‘æœ€ç†Ÿæ‚‰çš„ JSã€‚</p>
<p>reference:
<a href="http://blog.xuite.net/vexed/tech/53749528-TWD97+%E5%BA%A7%E6%A8%99%E8%BD%89%E7%B6%93%E7%B7%AF%E5%BA%A6" target="_blank" rel="external">Vexed&#39;s Blog - TWD97 åº§æ¨™è½‰ç¶“ç·¯åº¦</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">twd97_to_latlng</span>(<span class="params">$x, $y</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> pow = <span class="built_in">Math</span>.pow, M_PI = <span class="built_in">Math</span>.PI;</div><div class="line">  <span class="keyword">var</span> sin = <span class="built_in">Math</span>.sin, cos = <span class="built_in">Math</span>.cos, tan = <span class="built_in">Math</span>.tan;</div><div class="line">  <span class="keyword">var</span> $a = <span class="number">6378137.0</span>, $b = <span class="number">6356752.314245</span>;</div><div class="line">  <span class="keyword">var</span> $lng0 = <span class="number">121</span> * M_PI / <span class="number">180</span>, $k0 = <span class="number">0.9999</span>, $dx = <span class="number">250000</span>, $dy = <span class="number">0</span>;</div><div class="line">  <span class="keyword">var</span> $e = pow((<span class="number">1</span> - pow($b, <span class="number">2</span>) / pow($a, <span class="number">2</span>)), <span class="number">0.5</span>);</div><div class="line"></div><div class="line">  $x -= $dx;</div><div class="line">  $y -= $dy;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> $M = $y / $k0;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> $mu = $M / ($a * (<span class="number">1.0</span> - pow($e, <span class="number">2</span>) / <span class="number">4.0</span> - <span class="number">3</span> * pow($e, <span class="number">4</span>) / <span class="number">64.0</span> - <span class="number">5</span> * pow($e, <span class="number">6</span>) / <span class="number">256.0</span>));</div><div class="line">  <span class="keyword">var</span> $e1 = (<span class="number">1.0</span> - pow((<span class="number">1.0</span> - pow($e, <span class="number">2</span>)), <span class="number">0.5</span>)) / (<span class="number">1.0</span> + pow((<span class="number">1.0</span> - pow($e, <span class="number">2</span>)), <span class="number">0.5</span>));</div><div class="line"></div><div class="line">  <span class="keyword">var</span> $J1 = (<span class="number">3</span> * $e1 / <span class="number">2</span> - <span class="number">27</span> * pow($e1, <span class="number">3</span>) / <span class="number">32.0</span>);</div><div class="line">  <span class="keyword">var</span> $J2 = (<span class="number">21</span> * pow($e1, <span class="number">2</span>) / <span class="number">16</span> - <span class="number">55</span> * pow($e1, <span class="number">4</span>) / <span class="number">32.0</span>);</div><div class="line">  <span class="keyword">var</span> $J3 = (<span class="number">151</span> * pow($e1, <span class="number">3</span>) / <span class="number">96.0</span>);</div><div class="line">  <span class="keyword">var</span> $J4 = (<span class="number">1097</span> * pow($e1, <span class="number">4</span>) / <span class="number">512.0</span>);</div><div class="line"></div><div class="line">  <span class="keyword">var</span> $fp = $mu + $J1 * sin(<span class="number">2</span> * $mu) + $J2 * sin(<span class="number">4</span> * $mu) + $J3 * sin(<span class="number">6</span> * $mu) + $J4 * sin(<span class="number">8</span> * $mu);</div><div class="line"></div><div class="line">  <span class="keyword">var</span> $e2 = pow(($e * $a / $b), <span class="number">2</span>);</div><div class="line">  <span class="keyword">var</span> $C1 = pow($e2 * cos($fp), <span class="number">2</span>);</div><div class="line">  <span class="keyword">var</span> $T1 = pow(tan($fp), <span class="number">2</span>);</div><div class="line">  <span class="keyword">var</span> $R1 = $a * (<span class="number">1</span> - pow($e, <span class="number">2</span>)) / pow((<span class="number">1</span> - pow($e, <span class="number">2</span>) * pow(sin($fp), <span class="number">2</span>)), (<span class="number">3.0</span> / <span class="number">2.0</span>));</div><div class="line">  <span class="keyword">var</span> $N1 = $a / pow((<span class="number">1</span> - pow($e, <span class="number">2</span>) * pow(sin($fp), <span class="number">2</span>)), <span class="number">0.5</span>);</div><div class="line"></div><div class="line">  <span class="keyword">var</span> $D = $x / ($N1 * $k0);</div><div class="line"></div><div class="line">  <span class="keyword">var</span> $Q1 = $N1 * tan($fp) / $R1;</div><div class="line">  <span class="keyword">var</span> $Q2 = (pow($D, <span class="number">2</span>) / <span class="number">2.0</span>);</div><div class="line">  <span class="keyword">var</span> $Q3 = (<span class="number">5</span> + <span class="number">3</span> * $T1 + <span class="number">10</span> * $C1 - <span class="number">4</span> * pow($C1, <span class="number">2</span>) - <span class="number">9</span> * $e2) * pow($D, <span class="number">4</span>) / <span class="number">24.0</span>;</div><div class="line">  <span class="keyword">var</span> $Q4 = (<span class="number">61</span> + <span class="number">90</span> * $T1 + <span class="number">298</span> * $C1 + <span class="number">45</span> * pow($T1, <span class="number">2</span>) - <span class="number">3</span> * pow($C1, <span class="number">2</span>) - <span class="number">252</span> * $e2) * pow($D, <span class="number">6</span>) / <span class="number">720.0</span>;</div><div class="line">  <span class="keyword">var</span> $lat = $fp - $Q1 * ($Q2 - $Q3 + $Q4);</div><div class="line"></div><div class="line">  <span class="keyword">var</span> $Q5 = $D;</div><div class="line">  <span class="keyword">var</span> $Q6 = (<span class="number">1</span> + <span class="number">2</span> * $T1 + $C1) * pow($D, <span class="number">3</span>) / <span class="number">6</span>;</div><div class="line">  <span class="keyword">var</span> $Q7 = (<span class="number">5</span> - <span class="number">2</span> * $C1 + <span class="number">28</span> * $T1 - <span class="number">3</span> * pow($C1, <span class="number">2</span>) + <span class="number">8</span> * $e2 + <span class="number">24</span> * pow($T1, <span class="number">2</span>)) * pow($D, <span class="number">5</span>) / <span class="number">120.0</span>;</div><div class="line">  <span class="keyword">var</span> $lng = $lng0 + ($Q5 - $Q6 + $Q7) / cos($fp);</div><div class="line"></div><div class="line">  $lat = ($lat * <span class="number">180</span>) / M_PI;</div><div class="line">  $lng = ($lng * <span class="number">180</span>) / M_PI;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">lat</span>: $lat,</div><div class="line">    <span class="attr">lng</span>: $lng</div><div class="line">  &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å› ç‚ºå¾è‡ºåŒ—å¸‚æ”¿åºœè³‡æ–™é–‹æ”¾å¹³å° API æ‹¿åˆ°çš„è³‡æ–™æ˜¯ TWD97 åº§æ¨™æ ¼å¼ï¼Œæ‰€ä»¥æˆ‘å€‘å¿…é ˆè¦å°‡å®ƒè½‰æˆç¶“ç·¯åº¦å¾Œæ‰èƒ½å¥—ç”¨è‡³ Google Map ä½¿ç”¨ã€‚ç¶²è·¯ä¸ŠæŸ¥äº†å¾ˆå¤šè³‡æ–™ï¼Œæœ€å¾Œæ‰¾åˆ°æœ€è¦ªæ°‘çš„æ˜¯ç±³èŸ²å¤§çš„ PHP ç‰ˆæœ¬ï¼Œæ–¼æ˜¯å°±æ”¹æˆå¯«æˆ‘æœ€ç†Ÿæ‚‰çš„ JSã€‚&lt;/p&gt;
&lt;p&gt;reference:

    
    </summary>
    
      <category term="GIS" scheme="https://kuro.tw/categories/GIS/"/>
    
    
      <category term="twd97" scheme="https://kuro.tw/tags/twd97/"/>
    
      <category term="gis" scheme="https://kuro.tw/tags/gis/"/>
    
      <category term="opendata" scheme="https://kuro.tw/tags/opendata/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨ Google Map åŠ å…¥ D3 åœ–åƒ - 2</title>
    <link href="https://kuro.tw/posts/2015/05/20/added-to-the-google-map-images-d3-2/"/>
    <id>https://kuro.tw/posts/2015/05/20/added-to-the-google-map-images-d3-2/</id>
    <published>2015-05-20T07:49:00.000Z</published>
    <updated>2017-07-12T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://kuro.tw/posts/2015/05/20/join-the-d3-in-google-map-image" title="åœ¨ Google Map åŠ å…¥ D3 åœ–åƒ ">ä¸Šä¸€ç¯‡</a>æåˆ°äº†å¦‚ä½•åœ¨ Google Map è£¡é¢åŠ å…¥ D3 çš„åœ–åƒï¼Œé€™æ¬¡æˆ‘å€‘å¯¦éš›å°‡è³‡æ–™å¥—é€²å»å§ã€‚</p>
<p>è³‡æ–™ä¾†æºæ˜¯ä¸Šç¯‡æåˆ°çš„<a href="http://data.taipei/opendata/datalist/datasetMeta?oid=1d71c478-205f-42c5-8386-35f86d74fdd1" target="_blank" rel="external">è‡ºåŒ—æ·é‹å„ç«™é€²å‡ºé‡çµ±è¨ˆ</a>çš„çµ±è¨ˆè³‡æ–™ï¼Œå› ç‚ºå°åŒ—å¸‚æ”¿åºœé–‹æ”¾å¹³å°ä¸¦æ²’æœ‰æä¾› CORS (è·¨ä¾†æºè³‡æºå…±äº«)çš„æœå‹™ï¼Œæ²’é—œä¿‚ï¼Œæˆ‘å€‘ç›´æ¥å°‡è³‡æ–™ä¸‹è¼‰å­˜æˆ json æª”æ¡ˆå³å¯ã€‚ (ç¯„ä¾‹ç‚º 2015/4 é€²å‡ºç«™äººæ•¸)</p>
<p>æŒ‰ç…§æ…£ä¾‹ï¼Œå…ˆçœ‹çµæœ - Demo: <a href="http://jsbin.com/wexiva/3/" target="_blank" rel="external">http://jsbin.com/wexiva/3/</a>
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/276658/4DhTbWRwSvujvsxZC2Z5_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-05-20%20%E4%B8%8B%E5%8D%8811.54.46.png" alt="è¢å¹•å¿«ç…§ 2015-05-20 ä¸‹åˆ11.54.46.png"></p>
<p>è—è‰²çš„æ˜¯é€²ç«™äººæ•¸ï¼Œæ©˜è‰²çš„æ˜¯å‡ºç«™äººæ•¸ã€‚å¯ä»¥çœ‹å‡ºå„ç«™åœ¨ 4/1 çš„é€²å‡ºç«™äººæ•¸ç›¸ç•¶å¹³å‡ã€‚</p>
<p>å› ç‚ºé€™æ¬¡æŠ“å–çš„è³‡æ–™æ¯”è¼ƒå¤šï¼Œæ‰€ä»¥ç¨‹å¼ä¹Ÿç¨å¾®è¤‡é›œä¸€é»ï¼Œä¸éæ²’é—œä¿‚ï¼Œæ¦‚å¿µé‚„æ˜¯å¾ˆç°¡å–®çš„ã€‚
ä¸å›‰å”†ç›´æ¥çœ‹ code.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> map;</div><div class="line"><span class="keyword">var</span> overlay = <span class="keyword">new</span> google.maps.OverlayView();</div><div class="line"><span class="keyword">var</span> sta_in = [], sta_out = [], mrtData;</div><div class="line"></div><div class="line"><span class="comment">// è®€å–è³‡æ–™, sta_in = 2015 å¹´å››æœˆé€²ç«™äººæ•¸, sta_out = 2015 å¹´å››æœˆå‡ºç«™äººæ•¸.</span></div><div class="line"><span class="comment">// è³‡æ–™ä¾†æº: http://data.taipei/opendata/datalist/datasetMeta?oid=1d71c478-205f-42c5-8386-35f86d74fdd1</span></div><div class="line">d3.csv(<span class="string">"https://dl.dropboxusercontent.com/u/12537630/mrt.csv"</span>,</div><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">  mrtData = data;</div><div class="line"></div><div class="line">  <span class="comment">// é€²ç«™</span></div><div class="line">  d3.json(<span class="string">"https://dl.dropboxusercontent.com/u/12537630/mrt-in-april.json"</span>,</div><div class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">error, json</span>) </span>&#123;</div><div class="line">    sta_in = json.result.results;</div><div class="line">    <span class="keyword">if</span>( sta_in.length &gt; <span class="number">0</span> &amp;&amp; sta_out.length &gt; <span class="number">0</span> ) &#123; drawMap(); &#125;</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  <span class="comment">// å‡ºç«™</span></div><div class="line">  d3.json(<span class="string">"https://dl.dropboxusercontent.com/u/12537630/mrt-out-april.json"</span>,</div><div class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">error, json</span>) </span>&#123;</div><div class="line">    sta_out = json.result.results;</div><div class="line">    <span class="keyword">if</span>( sta_in.length &gt; <span class="number">0</span> &amp;&amp; sta_out.length &gt; <span class="number">0</span> ) &#123; drawMap(); &#125;</div><div class="line">  &#125;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawMap</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">// è¨­å®šåœ“é¤…åœ–é•·å¯¬, åŠå¾‘</span></div><div class="line">    <span class="keyword">var</span> width = <span class="number">35</span>, height = <span class="number">40</span>, radius = <span class="built_in">Math</span>.min(width, height) / <span class="number">2</span>;</div><div class="line"></div><div class="line">    <span class="comment">// é€é d3.scale.category10() ç”Ÿæˆé¡è‰²</span></div><div class="line">    <span class="keyword">var</span> color = d3.scale.category10();</div><div class="line"></div><div class="line">truetrue<span class="comment">// d3.layout.pie()</span></div><div class="line">truetrue<span class="keyword">var</span> pie = d3.layout.pie();</div><div class="line"></div><div class="line">    <span class="comment">// è¨­å®šåœ“é¤…å…§å¤–å±¤åŠå¾‘, é€™è£å…§å±¤è¨­ 0.</span></div><div class="line">    <span class="keyword">var</span> arc = d3.svg.arc()</div><div class="line">        .innerRadius(<span class="number">0</span>)</div><div class="line">        .outerRadius(radius);</div><div class="line"></div><div class="line">    overlay.onAdd = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> layer = d3.select(<span class="keyword">this</span>.getPanes().overlayLayer).append(<span class="string">"div"</span>)</div><div class="line">            .attr(<span class="string">"class"</span>, <span class="string">"stations"</span>);</div><div class="line"></div><div class="line">        overlay.draw = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> projection = <span class="keyword">this</span>.getProjection(),</div><div class="line">                padding = <span class="number">16</span>;</div><div class="line"></div><div class="line">            <span class="comment">// é‡å°æ¯ä¸€ç­†æ·é‹ç«™å¢åŠ  marker</span></div><div class="line">            <span class="keyword">var</span> marker = layer.selectAll(<span class="string">"svg"</span>)</div><div class="line">                .data(d3.entries(mrtData))</div><div class="line">                .each(transform)</div><div class="line">                .enter().append(<span class="string">"svg"</span>)</div><div class="line">                .each(transform)</div><div class="line">                .attr(&#123;</div><div class="line">                    <span class="string">'class'</span>: <span class="string">"marker"</span>,</div><div class="line">                    <span class="string">"width"</span>: width,</div><div class="line">                    <span class="string">"height"</span>: height,</div><div class="line">                    <span class="string">"transform"</span>: <span class="string">"translate("</span> + width / <span class="number">2</span> + <span class="string">","</span> + height / <span class="number">2</span> + <span class="string">")"</span>,</div><div class="line">                &#125;);</div><div class="line"></div><div class="line">            <span class="comment">// å°‡å–å¾—çš„é€²å‡ºç«™è³‡æ–™é€é .data( pie([ é€²ç«™äººæ•¸, å‡ºç«™äººæ•¸ ]) ) æŒ‡å®šåˆ°åœ“é¤…åœ–ä¸­ã€‚</span></div><div class="line">            <span class="comment">// sta_in[0] ä»£è¡¨ 4/1 é€²ç«™äººæ•¸, sta_out[0] ä»£è¡¨ 4/1 å‡ºç«™äººæ•¸.</span></div><div class="line">            <span class="keyword">var</span> g = marker.selectAll(<span class="string">"g"</span>)</div><div class="line">                .data(<span class="function"><span class="keyword">function</span>(<span class="params">d, i</span>) </span>&#123;</div><div class="line">                    <span class="keyword">return</span> pie([<span class="built_in">parseInt</span>(sta_in[<span class="number">0</span>][d.value.name].replace(<span class="string">','</span>, <span class="string">''</span>), <span class="number">10</span>), <span class="built_in">parseInt</span>(sta_out[<span class="number">0</span>][d.value.name].replace(<span class="string">','</span>, <span class="string">''</span>), <span class="number">10</span>)]);</div><div class="line">                &#125;)</div><div class="line">                .enter()</div><div class="line">                .append(<span class="string">"g"</span>);</div><div class="line"></div><div class="line">            <span class="comment">// è‘—è‰²</span></div><div class="line">            g.append(<span class="string">"path"</span>)</div><div class="line">                .attr(&#123;</div><div class="line">                  <span class="string">"fill"</span>: <span class="function"><span class="keyword">function</span>(<span class="params">d, i</span>) </span>&#123; <span class="keyword">return</span> color(i); &#125;,</div><div class="line">                  <span class="string">"d"</span>, arc,</div><div class="line">                  <span class="string">"transform"</span>: <span class="string">"translate("</span> + width / <span class="number">2</span> + <span class="string">","</span> + height / <span class="number">2</span> + <span class="string">")"</span></div><div class="line">                &#125;);</div><div class="line"></div><div class="line">            <span class="comment">// åŠ å…¥æ¨™ç±¤</span></div><div class="line">            marker.append(<span class="string">"text"</span>)</div><div class="line">                .attr(<span class="string">"x"</span>, padding + <span class="number">7</span>)</div><div class="line">                .attr(<span class="string">"y"</span>, padding)</div><div class="line">                .attr(<span class="string">"dy"</span>, <span class="string">".31em"</span>)</div><div class="line">                .text(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</div><div class="line">                    <span class="keyword">return</span> d.value.name;</div><div class="line">                &#125;);</div><div class="line"></div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">transform</span>(<span class="params">d</span>) </span>&#123;</div><div class="line">                d = <span class="keyword">new</span> google.maps.LatLng(d.value.lat, d.value.lng);</div><div class="line">                d = projection.fromLatLngToDivPixel(d);</div><div class="line">                <span class="keyword">return</span> d3.select(<span class="keyword">this</span>)</div><div class="line">                    .style(<span class="string">"left"</span>, (d.x - padding) + <span class="string">"px"</span>)</div><div class="line">                    .style(<span class="string">"top"</span>, (d.y - padding) + <span class="string">"px"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line"></div><div class="line">    &#125;;</div><div class="line">    overlay.setMap(map);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="æœ¬ç³»åˆ—æ–‡ç« åˆ—è¡¨"><a href="#æœ¬ç³»åˆ—æ–‡ç« åˆ—è¡¨" class="headerlink" title="æœ¬ç³»åˆ—æ–‡ç« åˆ—è¡¨:"></a>æœ¬ç³»åˆ—æ–‡ç« åˆ—è¡¨:</h4><ul>
<li><a href="http://kuro.tw/posts/2015/05/20/join-the-d3-in-google-map-image">åœ¨ Google Map åŠ å…¥ D3 åœ–åƒ (1)</a></li>
<li><a href="http://kuro.tw/posts/2015/05/20/added-to-the-google-map-images-d3-2">åœ¨ Google Map åŠ å…¥ D3 åœ–åƒ (2)</a></li>
</ul>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;http://kuro.tw/posts/2015/05/20/join-the-d3-in-google-map-image&quot; title=&quot;åœ¨ Google Map åŠ å…¥ D3 åœ–åƒ &quot;&gt;ä¸Šä¸€ç¯‡&lt;/a&gt;æåˆ°äº†å¦‚ä½•åœ¨ Google Map è£¡é¢åŠ å…¥ D3
    
    </summary>
    
      <category term="D3.js" scheme="https://kuro.tw/categories/D3-js/"/>
    
    
      <category term="google map" scheme="https://kuro.tw/tags/google-map/"/>
    
      <category term="d3.js" scheme="https://kuro.tw/tags/d3-js/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨ Google Map åŠ å…¥ D3 åœ–åƒ</title>
    <link href="https://kuro.tw/posts/2015/05/19/join-the-d3-in-google-map-image/"/>
    <id>https://kuro.tw/posts/2015/05/19/join-the-d3-in-google-map-image/</id>
    <published>2015-05-19T08:05:00.000Z</published>
    <updated>2017-07-12T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>å› ç‚ºæ˜¨å¤© <a href="http://data.taipei/" target="_blank" rel="external">å°åŒ—å¸‚æ”¿åºœé–‹æ”¾å¹³å°</a> é–‹å§‹æä¾› <a href="http://data.taipei/opendata/datalist/datasetMeta?oid=1d71c478-205f-42c5-8386-35f86d74fdd1" target="_blank" rel="external">è‡ºåŒ—æ·é‹å„ç«™é€²å‡ºé‡çµ±è¨ˆ</a> çš„çµ±è¨ˆè³‡æ–™ï¼Œæ‰€ä»¥å°±åœ¨æ€è€ƒå¯ä»¥åˆ©ç”¨é€™ä»½è³‡æ–™åšä»€éº¼æ‡‰ç”¨ï¼Œç¬¬ä¸€å€‹æƒ³åˆ°çš„å°±æ˜¯èƒ½å¦é€é D3 èˆ‡åœ°åœ–çš„å…±åŒå‘ˆç¾ï¼Œç•¶ç„¶å°±å¾æˆ‘æœ€ç†Ÿæ‚‰çš„ Google Map é–‹å§‹ã€‚</p>
<p>ä¸éé€™ç¯‡æ–‡ç« åªæœƒä»‹ç´¹åˆ°å¦‚ä½•åœ¨ Google Map åŠ å…¥ D3 (SVG) åœ–åƒã€‚
ç­‰æˆ‘å°‡æ·é‹å„ç«™è³‡è¨ŠåŠ å…¥å¾Œä¹Ÿè¨±æœƒé‚„æœ‰ä¸‹å›ï¼Œå“ˆå“ˆå“ˆã€‚</p>
<p>å…ˆçœ‹çµæœ - Demo: <a href="http://output.jsbin.com/wexiva/1/" target="_blank" rel="external">http://output.jsbin.com/wexiva/1/</a>
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/276547/NyZaTlSTDuH8v6DRzWAY_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-05-19%20%E4%B8%8B%E5%8D%8811.34.22.png" alt="è¢å¹•å¿«ç…§ 2015-05-19 ä¸‹åˆ11.34.22.png"></p>
<p>æ•´å€‹ç¨‹å¼éå¸¸ç°¡å–®ï¼Œé¦–å…ˆåœ¨ Google map åŠ å…¥ä¸€å€‹ <code>google.maps.OverlayView()</code>ï¼Œç„¶å¾Œé€é <code>d3.csv</code> è¼‰å…¥è³‡æ–™ã€‚åœ¨ç¹ªè£½ marker (åœ“é») çš„æ™‚å€™ï¼Œé€éè‡ªè¨‚çš„ <code>transform function</code> å»æŒ‡å®šå®ƒçš„åº§æ¨™å°±å®Œæˆäº†ã€‚</p>
<p>ç›¸é—œç¨‹å¼å¦‚ä¸‹:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// æ·é‹å„ç«™ç¶“ç·¯åº¦è³‡è¨Š: https://dl.dropboxusercontent.com/u/12537630/mrt.csv</span></div><div class="line"><span class="comment">// è³‡æ–™ä¾†æº: https://github.com/repeat/taipei-metro-stations</span></div><div class="line"></div><div class="line">d3.csv(<span class="string">"https://dl.dropboxusercontent.com/u/12537630/mrt.csv"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> overlay = <span class="keyword">new</span> google.maps.OverlayView();</div><div class="line"></div><div class="line">  <span class="comment">// æ–°å¢ OverlayView åˆ° google map</span></div><div class="line">  overlay.onAdd = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> layer = d3.select(<span class="keyword">this</span>.getPanes().overlayLayer).append(<span class="string">"div"</span>)</div><div class="line">        .attr(<span class="string">"class"</span>, <span class="string">"stations"</span>);</div><div class="line"></div><div class="line">    overlay.draw = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">var</span> projection = <span class="keyword">this</span>.getProjection(), padding = <span class="number">16</span>;</div><div class="line"></div><div class="line">      <span class="keyword">var</span> marker = layer.selectAll(<span class="string">"svg"</span>)</div><div class="line">          .data(d3.entries(data))</div><div class="line">          .each(transform)</div><div class="line">          .enter().append(<span class="string">"svg:svg"</span>)</div><div class="line">            .each(transform)</div><div class="line">            .attr(<span class="string">"class"</span>, <span class="string">"marker"</span>);</div><div class="line"></div><div class="line">      <span class="comment">// åŠ å…¥åœ“é»</span></div><div class="line">      marker.append(<span class="string">"svg:circle"</span>)</div><div class="line">          .attr(<span class="string">"r"</span>, <span class="number">6</span>)</div><div class="line">          .attr(<span class="string">"cx"</span>, padding)</div><div class="line">          .attr(<span class="string">"cy"</span>, padding);</div><div class="line"></div><div class="line">      <span class="comment">// åŠ å…¥æ¨™ç±¤</span></div><div class="line">      marker.append(<span class="string">"svg:text"</span>)</div><div class="line">          .attr(<span class="string">"x"</span>, padding + <span class="number">7</span>)</div><div class="line">          .attr(<span class="string">"y"</span>, padding)</div><div class="line">          .attr(<span class="string">"dy"</span>, <span class="string">".31em"</span>)</div><div class="line">          .text(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123; <span class="keyword">return</span> d.value.name; &#125;);</div><div class="line"></div><div class="line">      <span class="comment">// transform function. æŒ‡å®šæ¯å€‹é»çš„åº§æ¨™.</span></div><div class="line">      <span class="function"><span class="keyword">function</span> <span class="title">transform</span>(<span class="params">d</span>) </span>&#123;</div><div class="line">        d = <span class="keyword">new</span> google.maps.LatLng(d.value.lat, d.value.lng);</div><div class="line">        d = projection.fromLatLngToDivPixel(d);</div><div class="line">        <span class="keyword">return</span> d3.select(<span class="keyword">this</span>)</div><div class="line">            .style(<span class="string">"left"</span>, (d.x - padding) + <span class="string">"px"</span>)</div><div class="line">            .style(<span class="string">"top"</span>, (d.y - padding) + <span class="string">"px"</span>);</div><div class="line">      &#125;</div><div class="line">    &#125;;</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="comment">// å°‡ overlay åŠ å…¥åˆ° google åœ°åœ–</span></div><div class="line">  overlay.setMap(map);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="åƒè€ƒ"><a href="#åƒè€ƒ" class="headerlink" title="åƒè€ƒ:"></a>åƒè€ƒ:</h4><ul>
<li><a href="http://bl.ocks.org/mbostock/899711" target="_blank" rel="external">http://bl.ocks.org/mbostock/899711</a></li>
<li><a href="https://developers.google.com/maps/documentation/javascript/customoverlays?hl=zh-tw" target="_blank" rel="external">https://developers.google.com/maps/documentation/javascript/customoverlays?hl=zh-tw</a></li>
</ul>
<hr>
<h4 id="æœ¬ç³»åˆ—æ–‡ç« åˆ—è¡¨"><a href="#æœ¬ç³»åˆ—æ–‡ç« åˆ—è¡¨" class="headerlink" title="æœ¬ç³»åˆ—æ–‡ç« åˆ—è¡¨:"></a>æœ¬ç³»åˆ—æ–‡ç« åˆ—è¡¨:</h4><ul>
<li><a href="http://kuro.tw/posts/2015/05/20/join-the-d3-in-google-map-image">åœ¨ Google Map åŠ å…¥ D3 åœ–åƒ (1)</a></li>
<li><a href="http://kuro.tw/posts/2015/05/20/added-to-the-google-map-images-d3-2">åœ¨ Google Map åŠ å…¥ D3 åœ–åƒ (2)</a></li>
</ul>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å› ç‚ºæ˜¨å¤© &lt;a href=&quot;http://data.taipei/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å°åŒ—å¸‚æ”¿åºœé–‹æ”¾å¹³å°&lt;/a&gt; é–‹å§‹æä¾› &lt;a href=&quot;http://data.taipei/opendata/datalist/datase
    
    </summary>
    
      <category term="D3.js" scheme="https://kuro.tw/categories/D3-js/"/>
    
    
      <category term="google map" scheme="https://kuro.tw/tags/google-map/"/>
    
      <category term="d3.js" scheme="https://kuro.tw/tags/d3-js/"/>
    
  </entry>
  
</feed>
